{"version":3,"sources":["lib/reveal.js/js/reveal.js","lib/reveal.js/index.js","index.js"],"names":["root","factory","define","amd","Reveal","exports","module","indexh","indexv","previousSlide","currentSlide","previousBackground","isMobileDevice","isChrome","autoSlidePlayer","SLIDES_SELECTOR","HORIZONTAL_SLIDES_SELECTOR","VERTICAL_SLIDES_SELECTOR","HOME_SLIDE_SELECTOR","UA","navigator","userAgent","POST_MESSAGE_METHOD_BLACKLIST","config","width","height","margin","minScale","maxScale","controls","controlsTutorial","controlsLayout","controlsBackArrows","progress","slideNumber","showSlideNumber","hashOneBasedIndex","hash","history","keyboard","keyboardCondition","overview","disableLayout","center","touch","loop","rtl","navigationMode","shuffle","fragments","fragmentInURL","embedded","help","pause","showNotes","autoPlayMedia","preloadIframes","autoSlide","autoSlideStoppable","autoSlideMethod","defaultTiming","mouseWheel","rollingLinks","hideAddressBar","previewLinks","postMessage","postMessageEvents","focusBodyOnPageVisibilityChange","transition","transitionSpeed","backgroundTransition","parallaxBackgroundImage","parallaxBackgroundSize","parallaxBackgroundRepeat","parallaxBackgroundPosition","parallaxBackgroundHorizontal","parallaxBackgroundVertical","pdfMaxPagesPerSlide","Number","POSITIVE_INFINITY","pdfSeparateFragments","pdfPageHeightOffset","viewDistance","mobileViewDistance","display","hideInactiveCursor","hideCursorTime","dependencies","initialized","loaded","overviewSlideWidth","overviewSlideHeight","hasNavigatedRight","hasNavigatedDown","state","scale","slidesTransform","layout","dom","plugins","asyncDependencies","features","lastMouseWheelStep","writeURLTimeout","cursorHidden","cursorInactiveTimeout","eventsAreBound","autoSlideTimeout","autoSlideStartTime","autoSlidePaused","startX","startY","startCount","captured","threshold","keyboardShortcuts","registeredKeyBindings","initPlugins","pluginsToInitialize","Object","keys","length","loadAsyncDependencies","afterPlugInitialized","i","plugin","init","callback","then","start","statusDiv","forEach","s","loadScript","src","slides","classList","add","wrapper","remove","test","background","createSingletonNode","progressbar","querySelector","speakerNotes","setAttribute","pauseOverlay","controlsLeft","toArray","document","querySelectorAll","controlsRight","controlsUp","controlsDown","controlsPrev","controlsNext","controlsRightArrow","controlsDownArrow","getElementById","createElement","style","position","overflow","clip","appendChild","window","addEventListener","event","data","charAt","JSON","parse","method","result","apply","args","dispatchPostMessage","console","warn","setInterval","scrollTop","scrollLeft","horizontalSlide","verticalSlides","verticalSlide","y","configure","readURL","updateBackground","setTimeout","dispatchEvent","isPrintingPDF","removeEventListeners","readyState","setupPDF","url","script","type","async","defer","onload","onreadystatechange","onerror","err","Error","head","insertBefore","lastChild","getStatusText","node","text","nodeType","textContent","isAriaHidden","getAttribute","isDisplayHidden","getComputedStyle","childNodes","child","slideSize","getComputedSlideSize","innerWidth","innerHeight","pageWidth","Math","floor","pageHeight","slideWidth","slideHeight","injectStyleSheet","body","layoutSlideContents","doingSlideNumbers","slide","getSlideNumber","contains","left","top","contentHeight","scrollHeight","numberOfPages","max","ceil","min","page","className","parentNode","slideBackgroundElement","notes","getSlideNotes","notesSpacing","notesLayout","notesElement","innerHTML","nextSibling","bottom","numberElement","fragmentGroups","previousFragmentStep","previousPage","sortFragments","fragment","clonedPage","cloneNode","container","tagname","classname","nodes","testNode","createBackground","element","replace","contentElement","slideBackgroundContentElement","syncBackground","removeAttribute","backgroundColor","backgroundSize","backgroundRepeat","backgroundPosition","backgroundImage","opacity","backgroundVideo","backgroundIframe","backgroundOpacity","hasAttribute","contrastColor","computedBackgroundStyle","rgb","colorToRgb","a","colorBrightness","color","r","g","b","options","oldTransition","extend","numberOfSlides","transforms3d","resume","onDocumentMouseScroll","removeEventListener","enableRollingLinks","anchors","len","anchor","span","disableRollingLinks","onDocumentCursorActive","showCursor","enablePreviewLinks","disablePreviewLinks","destroy","canvas","requestAnimationFrame","Playback","Date","now","on","onAutoSlidePlayerClick","slideNumberDisplay","isSpeakerNotes","sync","addEventListeners","visibilityChange","onWindowHashChange","onWindowResize","onPointerDown","onPointerMove","onPointerUp","msPointerEnabled","onTouchStart","onTouchMove","onTouchEnd","onDocumentKeyDown","onDocumentKeyPress","onProgressClicked","onPageVisibilityChange","pointerEvents","match","eventName","el","onNavigateLeftClicked","onNavigateRightClicked","onNavigateUpClicked","onNavigateDownClicked","onNavigatePrevClicked","onNavigateNextClicked","o","Array","prototype","slice","call","deserialize","value","parseFloat","transformElement","transform","WebkitTransform","MozTransform","msTransform","transformSlides","transforms","tag","styleSheet","cssText","createTextNode","getElementsByTagName","closestParent","target","selector","parent","matchesMethod","matches","matchesSelector","msMatchesSelector","hex3","parseInt","hex6","substr","rgba","location","search","removeAddressBar","scrollTo","createEvent","initEvent","self","message","namespace","getState","stringify","onPreviewLinkClicked","toggleHelp","override","showHelp","closeOverlay","overlay","html","key","binding","description","join","preventDefault","removeChild","documentElement","setProperty","size","oldScale","presentationWidth","presentationHeight","zoom","right","devicePixelRatio","updateProgress","updateParallax","isOverview","updateOverview","remainingHeight","getRemainingHeight","newHeight","oldHeight","offsetHeight","removeProperty","nodeName","nw","naturalWidth","videoWidth","nh","naturalHeight","videoHeight","es","offsetWidth","setPreviousVerticalIndex","stack","v","getPreviousVerticalIndex","attributeName","activateOverview","overviewTransitions","cancelAutoSlide","onOverviewSlideClicked","updateSlidesVisibility","layoutOverview","hslide","h","vslide","hbackground","vbackground","vmin","deactivateOverview","cueAutoSlide","toggleOverview","locationHash","id","encodeURIComponent","index","getIndices","f","undefined","hashIndexBase","isVerticalSlide","cursor","hideCursor","wasPaused","togglePause","isPaused","toggleAutoSlide","resumeAutoSlide","pauseAutoSlide","horizontalSlides","stateBefore","concat","indexhBefore","indexvBefore","updateSlides","currentHorizontalSlide","currentVerticalSlides","navigateFragment","slideChanged","stateLoop","j","splice","pop","stopEmbeddedContent","startEmbeddedContent","updateControls","updateSlideNumber","updateNotes","updateFragments","writeURL","formatEmbeddedContent","_appendParamToIframeSource","slideh","backgroundStack","slidev","sourceAttribute","sourceURL","param","indexOf","unloadIframes","syncFragments","random","slidesLength","printMode","reverse","slideState","split","distanceX","horizontalSlidesLength","MAX_VALUE","x","verticalSlidesLength","abs","loadSlide","unloadSlide","oy","hasVerticalSlides","hasHorizontalSlides","getProgress","format","push","getSlidePastCount","getTotalSlides","indices","sep","formatSlideNumber","delimiter","isNaN","routes","availableRoutes","availableFragments","up","down","prev","next","includeAll","currentBackground","horizontalPast","horizontalFuture","backgroundh","backgroundv","shouldPreload","currentBackgroundContent","backgroundImageURL","previousBackgroundHash","currentBackgroundHash","classToBubble","backgroundWidth","backgroundHeight","horizontalOffset","horizontalSlideCount","verticalOffsetMultiplier","verticalOffset","verticalSlideCount","preload","tagName","media","sources","source","load","backgroundContent","backgroundVideoLoop","backgroundVideoMuted","encodeURI","video","muted","autoplay","excludeIframes","iframe","maxHeight","maxWidth","backgroundIframeElement","getSlideBackground","hiddenFragments","play","startEmbeddedMedia","promise","catch","startEmbeddedIframe","isAttachedToDOM","isVisible","currentTime","contentWindow","pastCount","mainLoop","totalCount","allFragments","bits","name","decodeURIComponent","error","isSameNameAsCurrentSlide","delay","clearTimeout","replaceState","pathname","isVertical","currentFragment","getSlides","getHorizontalSlides","getVerticalSlides","getSlide","indexf","paused","grouped","ordered","unordered","sorted","group","changedFragments","shown","hidden","maxIndex","offset","lastVisibleFragment","nextFragment","previousFragment","fragmentAutoSlide","parentAutoSlide","slideAutoSlide","duration","playbackRate","isLastSlide","navigateNext","setPlaying","navigateLeft","navigateRight","navigateUp","navigateDown","navigatePrev","isLastVerticalSlide","isSwipePrevented","onUserInput","shiftKey","charCode","keyCode","autoSlideWasPaused","activeElementIsCE","activeElement","contentEditable","activeElementIsInput","activeElementIsNotes","prevSlideShortcut","firstSlideShortcut","lastSlideShortcut","unusedModifier","altKey","ctrlKey","metaKey","resumeKeyCodes","useLinearMode","requestMethod","triggered","action","requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","touches","clientX","clientY","currentX","currentY","deltaX","deltaY","pointerType","MSPOINTER_TYPE_TOUCH","delta","detail","wheelDelta","slidesTotal","slideIndex","webkitHidden","msHidden","blur","focus","currentTarget","showPreview","progressCheck","diameter","diameter2","thickness","playing","progressOffset","context","getContext","render","wasPlaying","animate","progressBefore","requestAnimationFrameMethod","bind","radius","endAngle","PI","startAngle","save","clearRect","beginPath","arc","fillStyle","fill","lineWidth","strokeStyle","stroke","translate","iconSize","fillRect","moveTo","lineTo","restore","listener","off","VERSION","initialize","checkCapabilities","platform","maxTouchPoints","testElement","transforms2d","webkitRequestAnimationFrame","mozRequestAnimationFrame","query","scripts","scriptsToLoad","getQueryHash","condition","images","iframes","lazyLoadable","syncSlide","prevFragment","navigateTo","isAutoSliding","setState","pausedFlag","overviewFlag","getSlidesAttributes","map","attributes","attribute","getPreviousSlide","getCurrentSlide","getScale","getConfig","shift","unescape","getRevealElement","getPlugins","isFirstSlide","nextElementSibling","isReady","useCapture","addKeyBinding","removeKeyBinding","registerPlugin","hasPlugin","getPlugin","triggerKey","registerKeyboardShortcut","PLUGIN_DIST","markdownCondition","parseDependencies","dependency","markdown","highlight","DEPENDENCIES","TRANSITION","SLIDE","NONE","FADE","CONVEX","ZOOM","reveal","rest","global"],"mappings":"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","file":"src.197e916e.js","sourceRoot":"../src","sourcesContent":["/*!\r\n * reveal.js\r\n * http://revealjs.com\r\n * MIT licensed\r\n *\r\n * Copyright (C) 2020 Hakim El Hattab, http://hakim.se\r\n */\r\n(function( root, factory ) {\r\n\tif( typeof define === 'function' && define.amd ) {\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine( function() {\r\n\t\t\troot.Reveal = factory();\r\n\t\t\treturn root.Reveal;\r\n\t\t} );\r\n\t} else if( typeof exports === 'object' ) {\r\n\t\t// Node. Does not work with strict CommonJS.\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t// Browser globals.\r\n\t\troot.Reveal = factory();\r\n\t}\r\n}( this, function() {\r\n\r\n\t'use strict';\r\n\r\n\tvar Reveal;\r\n\r\n\t// The reveal.js version\r\n\tvar VERSION = '3.9.2';\r\n\r\n\tvar SLIDES_SELECTOR = '.slides section',\r\n\t\tHORIZONTAL_SLIDES_SELECTOR = '.slides>section',\r\n\t\tVERTICAL_SLIDES_SELECTOR = '.slides>section.present>section',\r\n\t\tHOME_SLIDE_SELECTOR = '.slides>section:first-of-type',\r\n\r\n\t\tUA = navigator.userAgent,\r\n\r\n\t\t// Methods that may not be invoked via the postMessage API\r\n\t\tPOST_MESSAGE_METHOD_BLACKLIST = /registerPlugin|registerKeyboardShortcut|addKeyBinding|addEventListener/,\r\n\r\n\t\t// Configuration defaults, can be overridden at initialization time\r\n\t\tconfig = {\r\n\r\n\t\t\t// The \"normal\" size of the presentation, aspect ratio will be preserved\r\n\t\t\t// when the presentation is scaled to fit different resolutions\r\n\t\t\twidth: 960,\r\n\t\t\theight: 700,\r\n\r\n\t\t\t// Factor of the display size that should remain empty around the content\r\n\t\t\tmargin: 0.04,\r\n\r\n\t\t\t// Bounds for smallest/largest possible scale to apply to content\r\n\t\t\tminScale: 0.2,\r\n\t\t\tmaxScale: 2.0,\r\n\r\n\t\t\t// Display presentation control arrows\r\n\t\t\tcontrols: true,\r\n\r\n\t\t\t// Help the user learn the controls by providing hints, for example by\r\n\t\t\t// bouncing the down arrow when they first encounter a vertical slide\r\n\t\t\tcontrolsTutorial: true,\r\n\r\n\t\t\t// Determines where controls appear, \"edges\" or \"bottom-right\"\r\n\t\t\tcontrolsLayout: 'bottom-right',\r\n\r\n\t\t\t// Visibility rule for backwards navigation arrows; \"faded\", \"hidden\"\r\n\t\t\t// or \"visible\"\r\n\t\t\tcontrolsBackArrows: 'faded',\r\n\r\n\t\t\t// Display a presentation progress bar\r\n\t\t\tprogress: true,\r\n\r\n\t\t\t// Display the page number of the current slide\r\n\t\t\t// - true:    Show slide number\r\n\t\t\t// - false:   Hide slide number\r\n\t\t\t//\r\n\t\t\t// Can optionally be set as a string that specifies the number formatting:\r\n\t\t\t// - \"h.v\":\t  Horizontal . vertical slide number (default)\r\n\t\t\t// - \"h/v\":\t  Horizontal / vertical slide number\r\n\t\t\t// - \"c\":\t  Flattened slide number\r\n\t\t\t// - \"c/t\":\t  Flattened slide number / total slides\r\n\t\t\t//\r\n\t\t\t// Alternatively, you can provide a function that returns the slide\r\n\t\t\t// number for the current slide. The function should take in a slide\r\n\t\t\t// object and return an array with one string [slideNumber] or\r\n\t\t\t// three strings [n1,delimiter,n2]. See #formatSlideNumber().\r\n\t\t\tslideNumber: false,\r\n\r\n\t\t\t// Can be used to limit the contexts in which the slide number appears\r\n\t\t\t// - \"all\":      Always show the slide number\r\n\t\t\t// - \"print\":    Only when printing to PDF\r\n\t\t\t// - \"speaker\":  Only in the speaker view\r\n\t\t\tshowSlideNumber: 'all',\r\n\r\n\t\t\t// Use 1 based indexing for # links to match slide number (default is zero\r\n\t\t\t// based)\r\n\t\t\thashOneBasedIndex: false,\r\n\r\n\t\t\t// Add the current slide number to the URL hash so that reloading the\r\n\t\t\t// page/copying the URL will return you to the same slide\r\n\t\t\thash: false,\r\n\r\n\t\t\t// Push each slide change to the browser history.  Implies `hash: true`\r\n\t\t\thistory: false,\r\n\r\n\t\t\t// Enable keyboard shortcuts for navigation\r\n\t\t\tkeyboard: true,\r\n\r\n\t\t\t// Optional function that blocks keyboard events when retuning false\r\n\t\t\tkeyboardCondition: null,\r\n\r\n\t\t\t// Enable the slide overview mode\r\n\t\t\toverview: true,\r\n\r\n\t\t\t// Disables the default reveal.js slide layout so that you can use\r\n\t\t\t// custom CSS layout\r\n\t\t\tdisableLayout: false,\r\n\r\n\t\t\t// Vertical centering of slides\r\n\t\t\tcenter: true,\r\n\r\n\t\t\t// Enables touch navigation on devices with touch input\r\n\t\t\ttouch: true,\r\n\r\n\t\t\t// Loop the presentation\r\n\t\t\tloop: false,\r\n\r\n\t\t\t// Change the presentation direction to be RTL\r\n\t\t\trtl: false,\r\n\r\n\t\t\t// Changes the behavior of our navigation directions.\r\n\t\t\t//\r\n\t\t\t// \"default\"\r\n\t\t\t// Left/right arrow keys step between horizontal slides, up/down\r\n\t\t\t// arrow keys step between vertical slides. Space key steps through\r\n\t\t\t// all slides (both horizontal and vertical).\r\n\t\t\t//\r\n\t\t\t// \"linear\"\r\n\t\t\t// Removes the up/down arrows. Left/right arrows step through all\r\n\t\t\t// slides (both horizontal and vertical).\r\n\t\t\t//\r\n\t\t\t// \"grid\"\r\n\t\t\t// When this is enabled, stepping left/right from a vertical stack\r\n\t\t\t// to an adjacent vertical stack will land you at the same vertical\r\n\t\t\t// index.\r\n\t\t\t//\r\n\t\t\t// Consider a deck with six slides ordered in two vertical stacks:\r\n\t\t\t// 1.1    2.1\r\n\t\t\t// 1.2    2.2\r\n\t\t\t// 1.3    2.3\r\n\t\t\t//\r\n\t\t\t// If you're on slide 1.3 and navigate right, you will normally move\r\n\t\t\t// from 1.3 -> 2.1. If \"grid\" is used, the same navigation takes you\r\n\t\t\t// from 1.3 -> 2.3.\r\n\t\t\tnavigationMode: 'default',\r\n\r\n\t\t\t// Randomizes the order of slides each time the presentation loads\r\n\t\t\tshuffle: false,\r\n\r\n\t\t\t// Turns fragments on and off globally\r\n\t\t\tfragments: true,\r\n\r\n\t\t\t// Flags whether to include the current fragment in the URL,\r\n\t\t\t// so that reloading brings you to the same fragment position\r\n\t\t\tfragmentInURL: false,\r\n\r\n\t\t\t// Flags if the presentation is running in an embedded mode,\r\n\t\t\t// i.e. contained within a limited portion of the screen\r\n\t\t\tembedded: false,\r\n\r\n\t\t\t// Flags if we should show a help overlay when the question-mark\r\n\t\t\t// key is pressed\r\n\t\t\thelp: true,\r\n\r\n\t\t\t// Flags if it should be possible to pause the presentation (blackout)\r\n\t\t\tpause: true,\r\n\r\n\t\t\t// Flags if speaker notes should be visible to all viewers\r\n\t\t\tshowNotes: false,\r\n\r\n\t\t\t// Global override for autolaying embedded media (video/audio/iframe)\r\n\t\t\t// - null:   Media will only autoplay if data-autoplay is present\r\n\t\t\t// - true:   All media will autoplay, regardless of individual setting\r\n\t\t\t// - false:  No media will autoplay, regardless of individual setting\r\n\t\t\tautoPlayMedia: null,\r\n\r\n\t\t\t// Global override for preloading lazy-loaded iframes\r\n\t\t\t// - null:   Iframes with data-src AND data-preload will be loaded when within\r\n\t\t\t//           the viewDistance, iframes with only data-src will be loaded when visible\r\n\t\t\t// - true:   All iframes with data-src will be loaded when within the viewDistance\r\n\t\t\t// - false:  All iframes with data-src will be loaded only when visible\r\n\t\t\tpreloadIframes: null,\r\n\r\n\t\t\t// Controls automatic progression to the next slide\r\n\t\t\t// - 0:      Auto-sliding only happens if the data-autoslide HTML attribute\r\n\t\t\t//           is present on the current slide or fragment\r\n\t\t\t// - 1+:     All slides will progress automatically at the given interval\r\n\t\t\t// - false:  No auto-sliding, even if data-autoslide is present\r\n\t\t\tautoSlide: 0,\r\n\r\n\t\t\t// Stop auto-sliding after user input\r\n\t\t\tautoSlideStoppable: true,\r\n\r\n\t\t\t// Use this method for navigation when auto-sliding (defaults to navigateNext)\r\n\t\t\tautoSlideMethod: null,\r\n\r\n\t\t\t// Specify the average time in seconds that you think you will spend\r\n\t\t\t// presenting each slide. This is used to show a pacing timer in the\r\n\t\t\t// speaker view\r\n\t\t\tdefaultTiming: null,\r\n\r\n\t\t\t// Enable slide navigation via mouse wheel\r\n\t\t\tmouseWheel: false,\r\n\r\n\t\t\t// Apply a 3D roll to links on hover\r\n\t\t\trollingLinks: false,\r\n\r\n\t\t\t// Hides the address bar on mobile devices\r\n\t\t\thideAddressBar: true,\r\n\r\n\t\t\t// Opens links in an iframe preview overlay\r\n\t\t\t// Add `data-preview-link` and `data-preview-link=\"false\"` to customise each link\r\n\t\t\t// individually\r\n\t\t\tpreviewLinks: false,\r\n\r\n\t\t\t// Exposes the reveal.js API through window.postMessage\r\n\t\t\tpostMessage: true,\r\n\r\n\t\t\t// Dispatches all reveal.js events to the parent window through postMessage\r\n\t\t\tpostMessageEvents: false,\r\n\r\n\t\t\t// Focuses body when page changes visibility to ensure keyboard shortcuts work\r\n\t\t\tfocusBodyOnPageVisibilityChange: true,\r\n\r\n\t\t\t// Transition style\r\n\t\t\ttransition: 'slide', // none/fade/slide/convex/concave/zoom\r\n\r\n\t\t\t// Transition speed\r\n\t\t\ttransitionSpeed: 'default', // default/fast/slow\r\n\r\n\t\t\t// Transition style for full page slide backgrounds\r\n\t\t\tbackgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom\r\n\r\n\t\t\t// Parallax background image\r\n\t\t\tparallaxBackgroundImage: '', // CSS syntax, e.g. \"a.jpg\"\r\n\r\n\t\t\t// Parallax background size\r\n\t\t\tparallaxBackgroundSize: '', // CSS syntax, e.g. \"3000px 2000px\"\r\n\r\n\t\t\t// Parallax background repeat\r\n\t\t\tparallaxBackgroundRepeat: '', // repeat/repeat-x/repeat-y/no-repeat/initial/inherit\r\n\r\n\t\t\t// Parallax background position\r\n\t\t\tparallaxBackgroundPosition: '', // CSS syntax, e.g. \"top left\"\r\n\r\n\t\t\t// Amount of pixels to move the parallax background per slide step\r\n\t\t\tparallaxBackgroundHorizontal: null,\r\n\t\t\tparallaxBackgroundVertical: null,\r\n\r\n\t\t\t// The maximum number of pages a single slide can expand onto when printing\r\n\t\t\t// to PDF, unlimited by default\r\n\t\t\tpdfMaxPagesPerSlide: Number.POSITIVE_INFINITY,\r\n\r\n\t\t\t// Prints each fragment on a separate slide\r\n\t\t\tpdfSeparateFragments: true,\r\n\r\n\t\t\t// Offset used to reduce the height of content within exported PDF pages.\r\n\t\t\t// This exists to account for environment differences based on how you\r\n\t\t\t// print to PDF. CLI printing options, like phantomjs and wkpdf, can end\r\n\t\t\t// on precisely the total height of the document whereas in-browser\r\n\t\t\t// printing has to end one pixel before.\r\n\t\t\tpdfPageHeightOffset: -1,\r\n\r\n\t\t\t// Number of slides away from the current that are visible\r\n\t\t\tviewDistance: 3,\r\n\r\n\t\t\t// Number of slides away from the current that are visible on mobile\r\n\t\t\t// devices. It is advisable to set this to a lower number than\r\n\t\t\t// viewDistance in order to save resources.\r\n\t\t\tmobileViewDistance: 2,\r\n\r\n\t\t\t// The display mode that will be used to show slides\r\n\t\t\tdisplay: 'block',\r\n\r\n\t\t\t// Hide cursor if inactive\r\n\t\t\thideInactiveCursor: true,\r\n\r\n\t\t\t// Time before the cursor is hidden (in ms)\r\n\t\t\thideCursorTime: 5000,\r\n\r\n\t\t\t// Script dependencies to load\r\n\t\t\tdependencies: []\r\n\r\n\t\t},\r\n\r\n\t\t// Flags if Reveal.initialize() has been called\r\n\t\tinitialized = false,\r\n\r\n\t\t// Flags if reveal.js is loaded (has dispatched the 'ready' event)\r\n\t\tloaded = false,\r\n\r\n\t\t// Flags if the overview mode is currently active\r\n\t\toverview = false,\r\n\r\n\t\t// Holds the dimensions of our overview slides, including margins\r\n\t\toverviewSlideWidth = null,\r\n\t\toverviewSlideHeight = null,\r\n\r\n\t\t// The horizontal and vertical index of the currently active slide\r\n\t\tindexh,\r\n\t\tindexv,\r\n\r\n\t\t// The previous and current slide HTML elements\r\n\t\tpreviousSlide,\r\n\t\tcurrentSlide,\r\n\r\n\t\tpreviousBackground,\r\n\r\n\t\t// Remember which directions that the user has navigated towards\r\n\t\thasNavigatedRight = false,\r\n\t\thasNavigatedDown = false,\r\n\r\n\t\t// Slides may hold a data-state attribute which we pick up and apply\r\n\t\t// as a class to the body. This list contains the combined state of\r\n\t\t// all current slides.\r\n\t\tstate = [],\r\n\r\n\t\t// The current scale of the presentation (see width/height config)\r\n\t\tscale = 1,\r\n\r\n\t\t// CSS transform that is currently applied to the slides container,\r\n\t\t// split into two groups\r\n\t\tslidesTransform = { layout: '', overview: '' },\r\n\r\n\t\t// Cached references to DOM elements\r\n\t\tdom = {},\r\n\r\n\t\t// A list of registered reveal.js plugins\r\n\t\tplugins = {},\r\n\r\n\t\t// List of asynchronously loaded reveal.js dependencies\r\n\t\tasyncDependencies = [],\r\n\r\n\t\t// Features supported by the browser, see #checkCapabilities()\r\n\t\tfeatures = {},\r\n\r\n\t\t// Client is a mobile device, see #checkCapabilities()\r\n\t\tisMobileDevice,\r\n\r\n\t\t// Client is a desktop Chrome, see #checkCapabilities()\r\n\t\tisChrome,\r\n\r\n\t\t// Throttles mouse wheel navigation\r\n\t\tlastMouseWheelStep = 0,\r\n\r\n\t\t// Delays updates to the URL due to a Chrome thumbnailer bug\r\n\t\twriteURLTimeout = 0,\r\n\r\n\t\t// Is the mouse pointer currently hidden from view\r\n\t\tcursorHidden = false,\r\n\r\n\t\t// Timeout used to determine when the cursor is inactive\r\n\t\tcursorInactiveTimeout = 0,\r\n\r\n\t\t// Flags if the interaction event listeners are bound\r\n\t\teventsAreBound = false,\r\n\r\n\t\t// The current auto-slide duration\r\n\t\tautoSlide = 0,\r\n\r\n\t\t// Auto slide properties\r\n\t\tautoSlidePlayer,\r\n\t\tautoSlideTimeout = 0,\r\n\t\tautoSlideStartTime = -1,\r\n\t\tautoSlidePaused = false,\r\n\r\n\t\t// Holds information about the currently ongoing touch input\r\n\t\ttouch = {\r\n\t\t\tstartX: 0,\r\n\t\t\tstartY: 0,\r\n\t\t\tstartCount: 0,\r\n\t\t\tcaptured: false,\r\n\t\t\tthreshold: 40\r\n\t\t},\r\n\r\n\t\t// A key:value map of shortcut keyboard keys and descriptions of\r\n\t\t// the actions they trigger, generated in #configure()\r\n\t\tkeyboardShortcuts = {},\r\n\r\n\t\t// Holds custom key code mappings\r\n\t\tregisteredKeyBindings = {};\r\n\r\n\t/**\r\n\t * Starts up the presentation if the client is capable.\r\n\t */\r\n\tfunction initialize( options ) {\r\n\r\n\t\t// Make sure we only initialize once\r\n\t\tif( initialized === true ) return;\r\n\r\n\t\tinitialized = true;\r\n\r\n\t\tcheckCapabilities();\r\n\r\n\t\tif( !features.transforms2d && !features.transforms3d ) {\r\n\t\t\tdocument.body.setAttribute( 'class', 'no-transforms' );\r\n\r\n\t\t\t// Since JS won't be running any further, we load all lazy\r\n\t\t\t// loading elements upfront\r\n\t\t\tvar images = toArray( document.getElementsByTagName( 'img' ) ),\r\n\t\t\t\tiframes = toArray( document.getElementsByTagName( 'iframe' ) );\r\n\r\n\t\t\tvar lazyLoadable = images.concat( iframes );\r\n\r\n\t\t\tfor( var i = 0, len = lazyLoadable.length; i < len; i++ ) {\r\n\t\t\t\tvar element = lazyLoadable[i];\r\n\t\t\t\tif( element.getAttribute( 'data-src' ) ) {\r\n\t\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\r\n\t\t\t\t\telement.removeAttribute( 'data-src' );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If the browser doesn't support core features we won't be\r\n\t\t\t// using JavaScript to control the presentation\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Cache references to key DOM elements\r\n\t\tdom.wrapper = document.querySelector( '.reveal' );\r\n\t\tdom.slides = document.querySelector( '.reveal .slides' );\r\n\r\n\t\t// Force a layout when the whole page, incl fonts, has loaded\r\n\t\twindow.addEventListener( 'load', layout, false );\r\n\r\n\t\tvar query = Reveal.getQueryHash();\r\n\r\n\t\t// Do not accept new dependencies via query config to avoid\r\n\t\t// the potential of malicious script injection\r\n\t\tif( typeof query['dependencies'] !== 'undefined' ) delete query['dependencies'];\r\n\r\n\t\t// Copy options over to our config object\r\n\t\textend( config, options );\r\n\t\textend( config, query );\r\n\r\n\t\t// Hide the address bar in mobile browsers\r\n\t\thideAddressBar();\r\n\r\n\t\t// Loads dependencies and continues to #start() once done\r\n\t\tload();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Inspect the client to see what it's capable of, this\r\n\t * should only happens once per runtime.\r\n\t */\r\n\tfunction checkCapabilities() {\r\n\r\n\t\tisMobileDevice = /(iphone|ipod|ipad|android)/gi.test( UA ) ||\r\n\t\t\t\t\t\t\t( navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 ); // iPadOS\r\n\t\tisChrome = /chrome/i.test( UA ) && !/edge/i.test( UA );\r\n\r\n\t\tvar testElement = document.createElement( 'div' );\r\n\r\n\t\tfeatures.transforms3d = 'WebkitPerspective' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'MozPerspective' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'msPerspective' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'OPerspective' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'perspective' in testElement.style;\r\n\r\n\t\tfeatures.transforms2d = 'WebkitTransform' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'MozTransform' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'msTransform' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'OTransform' in testElement.style ||\r\n\t\t\t\t\t\t\t\t'transform' in testElement.style;\r\n\r\n\t\tfeatures.requestAnimationFrameMethod = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\r\n\t\tfeatures.requestAnimationFrame = typeof features.requestAnimationFrameMethod === 'function';\r\n\r\n\t\tfeatures.canvas = !!document.createElement( 'canvas' ).getContext;\r\n\r\n\t\t// Transitions in the overview are disabled in desktop and\r\n\t\t// Safari due to lag\r\n\t\tfeatures.overviewTransitions = !/Version\\/[\\d\\.]+.*Safari/.test( UA );\r\n\r\n\t\t// Flags if we should use zoom instead of transform to scale\r\n\t\t// up slides. Zoom produces crisper results but has a lot of\r\n\t\t// xbrowser quirks so we only use it in whitelsited browsers.\r\n\t\tfeatures.zoom = 'zoom' in testElement.style && !isMobileDevice &&\r\n\t\t\t\t\t\t( isChrome || /Version\\/[\\d\\.]+.*Safari/.test( UA ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the dependencies of reveal.js. Dependencies are\r\n\t * defined via the configuration option 'dependencies'\r\n\t * and will be loaded prior to starting/binding reveal.js.\r\n\t * Some dependencies may have an 'async' flag, if so they\r\n\t * will load after reveal.js has been started up.\r\n\t */\r\n\tfunction load() {\r\n\r\n\t\tvar scripts = [],\r\n\t\t\tscriptsToLoad = 0;\r\n\r\n\t\tconfig.dependencies.forEach( function( s ) {\r\n\t\t\t// Load if there's no condition or the condition is truthy\r\n\t\t\tif( !s.condition || s.condition() ) {\r\n\t\t\t\tif( s.async ) {\r\n\t\t\t\t\tasyncDependencies.push( s );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tscripts.push( s );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tif( scripts.length ) {\r\n\t\t\tscriptsToLoad = scripts.length;\r\n\r\n\t\t\t// Load synchronous scripts\r\n\t\t\tscripts.forEach( function( s ) {\r\n\t\t\t\tloadScript( s.src, function() {\r\n\r\n\t\t\t\t\tif( typeof s.callback === 'function' ) s.callback();\r\n\r\n\t\t\t\t\tif( --scriptsToLoad === 0 ) {\r\n\t\t\t\t\t\tinitPlugins();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinitPlugins();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes our plugins and waits for them to be ready\r\n\t * before proceeding.\r\n\t */\r\n\tfunction initPlugins() {\r\n\r\n\t\tvar pluginsToInitialize = Object.keys( plugins ).length;\r\n\r\n\t\t// If there are no plugins, skip this step\r\n\t\tif( pluginsToInitialize === 0 ) {\r\n\t\t\tloadAsyncDependencies();\r\n\t\t}\r\n\t\t// ... otherwise initialize plugins\r\n\t\telse {\r\n\r\n\t\t\tvar afterPlugInitialized = function() {\r\n\t\t\t\tif( --pluginsToInitialize === 0 ) {\r\n\t\t\t\t\tloadAsyncDependencies();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfor( var i in plugins ) {\r\n\r\n\t\t\t\tvar plugin = plugins[i];\r\n\r\n\t\t\t\t// If the plugin has an 'init' method, invoke it\r\n\t\t\t\tif( typeof plugin.init === 'function' ) {\r\n\t\t\t\t\tvar callback = plugin.init();\r\n\r\n\t\t\t\t\t// If the plugin returned a Promise, wait for it\r\n\t\t\t\t\tif( callback && typeof callback.then === 'function' ) {\r\n\t\t\t\t\t\tcallback.then( afterPlugInitialized );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tafterPlugInitialized();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tafterPlugInitialized();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads all async reveal.js dependencies.\r\n\t */\r\n\tfunction loadAsyncDependencies() {\r\n\r\n\t\tif( asyncDependencies.length ) {\r\n\t\t\tasyncDependencies.forEach( function( s ) {\r\n\t\t\t\tloadScript( s.src, s.callback );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tstart();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads a JavaScript file from the given URL and executes it.\r\n\t *\r\n\t * @param {string} url Address of the .js file to load\r\n\t * @param {function} callback Method to invoke when the script\r\n\t * has loaded and executed\r\n\t */\r\n\tfunction loadScript( url, callback ) {\r\n\r\n\t\tvar script = document.createElement( 'script' );\r\n\t\tscript.type = 'text/javascript';\r\n\t\tscript.async = false;\r\n\t\tscript.defer = false;\r\n\t\tscript.src = url;\r\n\r\n\t\tif( callback ) {\r\n\r\n\t\t\t// Success callback\r\n\t\t\tscript.onload = script.onreadystatechange = function( event ) {\r\n\t\t\t\tif( event.type === \"load\" || (/loaded|complete/.test( script.readyState ) ) ) {\r\n\r\n\t\t\t\t\t// Kill event listeners\r\n\t\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = null;\r\n\r\n\t\t\t\t\tcallback();\r\n\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Error callback\r\n\t\t\tscript.onerror = function( err ) {\r\n\r\n\t\t\t\t// Kill event listeners\r\n\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = null;\r\n\r\n\t\t\t\tcallback( new Error( 'Failed loading script: ' + script.src + '\\n' + err) );\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// Append the script at the end of <head>\r\n\t\tvar head = document.querySelector( 'head' );\r\n\t\thead.insertBefore( script, head.lastChild );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Starts up reveal.js by binding input events and navigating\r\n\t * to the current URL deeplink if there is one.\r\n\t */\r\n\tfunction start() {\r\n\r\n\t\tloaded = true;\r\n\r\n\t\t// Make sure we've got all the DOM elements we need\r\n\t\tsetupDOM();\r\n\r\n\t\t// Listen to messages posted to this window\r\n\t\tsetupPostMessage();\r\n\r\n\t\t// Prevent the slides from being scrolled out of view\r\n\t\tsetupScrollPrevention();\r\n\r\n\t\t// Resets all vertical slides so that only the first is visible\r\n\t\tresetVerticalSlides();\r\n\r\n\t\t// Updates the presentation to match the current configuration values\r\n\t\tconfigure();\r\n\r\n\t\t// Read the initial hash\r\n\t\treadURL();\r\n\r\n\t\t// Update all backgrounds\r\n\t\tupdateBackground( true );\r\n\r\n\t\t// Notify listeners that the presentation is ready but use a 1ms\r\n\t\t// timeout to ensure it's not fired synchronously after #initialize()\r\n\t\tsetTimeout( function() {\r\n\t\t\t// Enable transitions now that we're loaded\r\n\t\t\tdom.slides.classList.remove( 'no-transition' );\r\n\r\n\t\t\tdom.wrapper.classList.add( 'ready' );\r\n\r\n\t\t\tdispatchEvent( 'ready', {\r\n\t\t\t\t'indexh': indexh,\r\n\t\t\t\t'indexv': indexv,\r\n\t\t\t\t'currentSlide': currentSlide\r\n\t\t\t} );\r\n\t\t}, 1 );\r\n\r\n\t\t// Special setup and config is required when printing to PDF\r\n\t\tif( isPrintingPDF() ) {\r\n\t\t\tremoveEventListeners();\r\n\r\n\t\t\t// The document needs to have loaded for the PDF layout\r\n\t\t\t// measurements to be accurate\r\n\t\t\tif( document.readyState === 'complete' ) {\r\n\t\t\t\tsetupPDF();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\twindow.addEventListener( 'load', setupPDF );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Finds and stores references to DOM elements which are\r\n\t * required by the presentation. If a required element is\r\n\t * not found, it is created.\r\n\t */\r\n\tfunction setupDOM() {\r\n\r\n\t\t// Prevent transitions while we're loading\r\n\t\tdom.slides.classList.add( 'no-transition' );\r\n\r\n\t\tif( isMobileDevice ) {\r\n\t\t\tdom.wrapper.classList.add( 'no-hover' );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.wrapper.classList.remove( 'no-hover' );\r\n\t\t}\r\n\r\n\t\tif( /iphone/gi.test( UA ) ) {\r\n\t\t\tdom.wrapper.classList.add( 'ua-iphone' );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.wrapper.classList.remove( 'ua-iphone' );\r\n\t\t}\r\n\r\n\t\t// Background element\r\n\t\tdom.background = createSingletonNode( dom.wrapper, 'div', 'backgrounds', null );\r\n\r\n\t\t// Progress bar\r\n\t\tdom.progress = createSingletonNode( dom.wrapper, 'div', 'progress', '<span></span>' );\r\n\t\tdom.progressbar = dom.progress.querySelector( 'span' );\r\n\r\n\t\t// Arrow controls\r\n\t\tdom.controls = createSingletonNode( dom.wrapper, 'aside', 'controls',\r\n\t\t\t'<button class=\"navigate-left\" aria-label=\"previous slide\"><div class=\"controls-arrow\"></div></button>' +\r\n\t\t\t'<button class=\"navigate-right\" aria-label=\"next slide\"><div class=\"controls-arrow\"></div></button>' +\r\n\t\t\t'<button class=\"navigate-up\" aria-label=\"above slide\"><div class=\"controls-arrow\"></div></button>' +\r\n\t\t\t'<button class=\"navigate-down\" aria-label=\"below slide\"><div class=\"controls-arrow\"></div></button>' );\r\n\r\n\t\t// Slide number\r\n\t\tdom.slideNumber = createSingletonNode( dom.wrapper, 'div', 'slide-number', '' );\r\n\r\n\t\t// Element containing notes that are visible to the audience\r\n\t\tdom.speakerNotes = createSingletonNode( dom.wrapper, 'div', 'speaker-notes', null );\r\n\t\tdom.speakerNotes.setAttribute( 'data-prevent-swipe', '' );\r\n\t\tdom.speakerNotes.setAttribute( 'tabindex', '0' );\r\n\r\n\t\t// Overlay graphic which is displayed during the paused mode\r\n\t\tdom.pauseOverlay = createSingletonNode( dom.wrapper, 'div', 'pause-overlay', config.controls ? '<button class=\"resume-button\">Resume presentation</button>' : null );\r\n\r\n\t\tdom.wrapper.setAttribute( 'role', 'application' );\r\n\r\n\t\t// There can be multiple instances of controls throughout the page\r\n\t\tdom.controlsLeft = toArray( document.querySelectorAll( '.navigate-left' ) );\r\n\t\tdom.controlsRight = toArray( document.querySelectorAll( '.navigate-right' ) );\r\n\t\tdom.controlsUp = toArray( document.querySelectorAll( '.navigate-up' ) );\r\n\t\tdom.controlsDown = toArray( document.querySelectorAll( '.navigate-down' ) );\r\n\t\tdom.controlsPrev = toArray( document.querySelectorAll( '.navigate-prev' ) );\r\n\t\tdom.controlsNext = toArray( document.querySelectorAll( '.navigate-next' ) );\r\n\r\n\t\t// The right and down arrows in the standard reveal.js controls\r\n\t\tdom.controlsRightArrow = dom.controls.querySelector( '.navigate-right' );\r\n\t\tdom.controlsDownArrow = dom.controls.querySelector( '.navigate-down' );\r\n\r\n\t\tdom.statusDiv = createStatusDiv();\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a hidden div with role aria-live to announce the\r\n\t * current slide content. Hide the div off-screen to make it\r\n\t * available only to Assistive Technologies.\r\n\t *\r\n\t * @return {HTMLElement}\r\n\t */\r\n\tfunction createStatusDiv() {\r\n\r\n\t\tvar statusDiv = document.getElementById( 'aria-status-div' );\r\n\t\tif( !statusDiv ) {\r\n\t\t\tstatusDiv = document.createElement( 'div' );\r\n\t\t\tstatusDiv.style.position = 'absolute';\r\n\t\t\tstatusDiv.style.height = '1px';\r\n\t\t\tstatusDiv.style.width = '1px';\r\n\t\t\tstatusDiv.style.overflow = 'hidden';\r\n\t\t\tstatusDiv.style.clip = 'rect( 1px, 1px, 1px, 1px )';\r\n\t\t\tstatusDiv.setAttribute( 'id', 'aria-status-div' );\r\n\t\t\tstatusDiv.setAttribute( 'aria-live', 'polite' );\r\n\t\t\tstatusDiv.setAttribute( 'aria-atomic','true' );\r\n\t\t\tdom.wrapper.appendChild( statusDiv );\r\n\t\t}\r\n\t\treturn statusDiv;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the given HTML element into a string of text\r\n\t * that can be announced to a screen reader. Hidden\r\n\t * elements are excluded.\r\n\t */\r\n\tfunction getStatusText( node ) {\r\n\r\n\t\tvar text = '';\r\n\r\n\t\t// Text node\r\n\t\tif( node.nodeType === 3 ) {\r\n\t\t\ttext += node.textContent;\r\n\t\t}\r\n\t\t// Element node\r\n\t\telse if( node.nodeType === 1 ) {\r\n\r\n\t\t\tvar isAriaHidden = node.getAttribute( 'aria-hidden' );\r\n\t\t\tvar isDisplayHidden = window.getComputedStyle( node )['display'] === 'none';\r\n\t\t\tif( isAriaHidden !== 'true' && !isDisplayHidden ) {\r\n\r\n\t\t\t\ttoArray( node.childNodes ).forEach( function( child ) {\r\n\t\t\t\t\ttext += getStatusText( child );\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn text;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Configures the presentation for printing to a static\r\n\t * PDF.\r\n\t */\r\n\tfunction setupPDF() {\r\n\r\n\t\tvar slideSize = getComputedSlideSize( window.innerWidth, window.innerHeight );\r\n\r\n\t\t// Dimensions of the PDF pages\r\n\t\tvar pageWidth = Math.floor( slideSize.width * ( 1 + config.margin ) ),\r\n\t\t\tpageHeight = Math.floor( slideSize.height * ( 1 + config.margin ) );\r\n\r\n\t\t// Dimensions of slides within the pages\r\n\t\tvar slideWidth = slideSize.width,\r\n\t\t\tslideHeight = slideSize.height;\r\n\r\n\t\t// Let the browser know what page size we want to print\r\n\t\tinjectStyleSheet( '@page{size:'+ pageWidth +'px '+ pageHeight +'px; margin: 0px;}' );\r\n\r\n\t\t// Limit the size of certain elements to the dimensions of the slide\r\n\t\tinjectStyleSheet( '.reveal section>img, .reveal section>video, .reveal section>iframe{max-width: '+ slideWidth +'px; max-height:'+ slideHeight +'px}' );\r\n\r\n\t\tdocument.body.classList.add( 'print-pdf' );\r\n\t\tdocument.body.style.width = pageWidth + 'px';\r\n\t\tdocument.body.style.height = pageHeight + 'px';\r\n\r\n\t\t// Make sure stretch elements fit on slide\r\n\t\tlayoutSlideContents( slideWidth, slideHeight );\r\n\r\n\t\t// Compute slide numbers now, before we start duplicating slides\r\n\t\tvar doingSlideNumbers = config.slideNumber && /all|print/i.test( config.showSlideNumber );\r\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\r\n\t\t\tslide.setAttribute( 'data-slide-number', getSlideNumber( slide ) );\r\n\t\t} );\r\n\r\n\t\t// Slide and slide background layout\r\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\r\n\r\n\t\t\t// Vertical stacks are not centred since their section\r\n\t\t\t// children will be\r\n\t\t\tif( slide.classList.contains( 'stack' ) === false ) {\r\n\t\t\t\t// Center the slide inside of the page, giving the slide some margin\r\n\t\t\t\tvar left = ( pageWidth - slideWidth ) / 2,\r\n\t\t\t\t\ttop = ( pageHeight - slideHeight ) / 2;\r\n\r\n\t\t\t\tvar contentHeight = slide.scrollHeight;\r\n\t\t\t\tvar numberOfPages = Math.max( Math.ceil( contentHeight / pageHeight ), 1 );\r\n\r\n\t\t\t\t// Adhere to configured pages per slide limit\r\n\t\t\t\tnumberOfPages = Math.min( numberOfPages, config.pdfMaxPagesPerSlide );\r\n\r\n\t\t\t\t// Center slides vertically\r\n\t\t\t\tif( numberOfPages === 1 && config.center || slide.classList.contains( 'center' ) ) {\r\n\t\t\t\t\ttop = Math.max( ( pageHeight - contentHeight ) / 2, 0 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Wrap the slide in a page element and hide its overflow\r\n\t\t\t\t// so that no page ever flows onto another\r\n\t\t\t\tvar page = document.createElement( 'div' );\r\n\t\t\t\tpage.className = 'pdf-page';\r\n\t\t\t\tpage.style.height = ( ( pageHeight + config.pdfPageHeightOffset ) * numberOfPages ) + 'px';\r\n\t\t\t\tslide.parentNode.insertBefore( page, slide );\r\n\t\t\t\tpage.appendChild( slide );\r\n\r\n\t\t\t\t// Position the slide inside of the page\r\n\t\t\t\tslide.style.left = left + 'px';\r\n\t\t\t\tslide.style.top = top + 'px';\r\n\t\t\t\tslide.style.width = slideWidth + 'px';\r\n\r\n\t\t\t\tif( slide.slideBackgroundElement ) {\r\n\t\t\t\t\tpage.insertBefore( slide.slideBackgroundElement, slide );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Inject notes if `showNotes` is enabled\r\n\t\t\t\tif( config.showNotes ) {\r\n\r\n\t\t\t\t\t// Are there notes for this slide?\r\n\t\t\t\t\tvar notes = getSlideNotes( slide );\r\n\t\t\t\t\tif( notes ) {\r\n\r\n\t\t\t\t\t\tvar notesSpacing = 8;\r\n\t\t\t\t\t\tvar notesLayout = typeof config.showNotes === 'string' ? config.showNotes : 'inline';\r\n\t\t\t\t\t\tvar notesElement = document.createElement( 'div' );\r\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes' );\r\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes-pdf' );\r\n\t\t\t\t\t\tnotesElement.setAttribute( 'data-layout', notesLayout );\r\n\t\t\t\t\t\tnotesElement.innerHTML = notes;\r\n\r\n\t\t\t\t\t\tif( notesLayout === 'separate-page' ) {\r\n\t\t\t\t\t\t\tpage.parentNode.insertBefore( notesElement, page.nextSibling );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tnotesElement.style.left = notesSpacing + 'px';\r\n\t\t\t\t\t\t\tnotesElement.style.bottom = notesSpacing + 'px';\r\n\t\t\t\t\t\t\tnotesElement.style.width = ( pageWidth - notesSpacing*2 ) + 'px';\r\n\t\t\t\t\t\t\tpage.appendChild( notesElement );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Inject slide numbers if `slideNumbers` are enabled\r\n\t\t\t\tif( doingSlideNumbers ) {\r\n\t\t\t\t\tvar numberElement = document.createElement( 'div' );\r\n\t\t\t\t\tnumberElement.classList.add( 'slide-number' );\r\n\t\t\t\t\tnumberElement.classList.add( 'slide-number-pdf' );\r\n\t\t\t\t\tnumberElement.innerHTML = slide.getAttribute( 'data-slide-number' );\r\n\t\t\t\t\tpage.appendChild( numberElement );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Copy page and show fragments one after another\r\n\t\t\t\tif( config.pdfSeparateFragments ) {\r\n\r\n\t\t\t\t\t// Each fragment 'group' is an array containing one or more\r\n\t\t\t\t\t// fragments. Multiple fragments that appear at the same time\r\n\t\t\t\t\t// are part of the same group.\r\n\t\t\t\t\tvar fragmentGroups = sortFragments( page.querySelectorAll( '.fragment' ), true );\r\n\r\n\t\t\t\t\tvar previousFragmentStep;\r\n\t\t\t\t\tvar previousPage;\r\n\r\n\t\t\t\t\tfragmentGroups.forEach( function( fragments ) {\r\n\r\n\t\t\t\t\t\t// Remove 'current-fragment' from the previous group\r\n\t\t\t\t\t\tif( previousFragmentStep ) {\r\n\t\t\t\t\t\t\tpreviousFragmentStep.forEach( function( fragment ) {\r\n\t\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Show the fragments for the current index\r\n\t\t\t\t\t\tfragments.forEach( function( fragment ) {\r\n\t\t\t\t\t\t\tfragment.classList.add( 'visible', 'current-fragment' );\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t// Create a separate page for the current fragment state\r\n\t\t\t\t\t\tvar clonedPage = page.cloneNode( true );\r\n\t\t\t\t\t\tpage.parentNode.insertBefore( clonedPage, ( previousPage || page ).nextSibling );\r\n\r\n\t\t\t\t\t\tpreviousFragmentStep = fragments;\r\n\t\t\t\t\t\tpreviousPage = clonedPage;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t// Reset the first/original page so that all fragments are hidden\r\n\t\t\t\t\tfragmentGroups.forEach( function( fragments ) {\r\n\t\t\t\t\t\tfragments.forEach( function( fragment ) {\r\n\t\t\t\t\t\t\tfragment.classList.remove( 'visible', 'current-fragment' );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// Show all fragments\r\n\t\t\t\telse {\r\n\t\t\t\t\ttoArray( page.querySelectorAll( '.fragment:not(.fade-out)' ) ).forEach( function( fragment ) {\r\n\t\t\t\t\t\tfragment.classList.add( 'visible' );\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\t// Notify subscribers that the PDF layout is good to go\r\n\t\tdispatchEvent( 'pdf-ready' );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * This is an unfortunate necessity. Some actions – such as\r\n\t * an input field being focused in an iframe or using the\r\n\t * keyboard to expand text selection beyond the bounds of\r\n\t * a slide – can trigger our content to be pushed out of view.\r\n\t * This scrolling can not be prevented by hiding overflow in\r\n\t * CSS (we already do) so we have to resort to repeatedly\r\n\t * checking if the slides have been offset :(\r\n\t */\r\n\tfunction setupScrollPrevention() {\r\n\r\n\t\tsetInterval( function() {\r\n\t\t\tif( dom.wrapper.scrollTop !== 0 || dom.wrapper.scrollLeft !== 0 ) {\r\n\t\t\t\tdom.wrapper.scrollTop = 0;\r\n\t\t\t\tdom.wrapper.scrollLeft = 0;\r\n\t\t\t}\r\n\t\t}, 1000 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an HTML element and returns a reference to it.\r\n\t * If the element already exists the existing instance will\r\n\t * be returned.\r\n\t *\r\n\t * @param {HTMLElement} container\r\n\t * @param {string} tagname\r\n\t * @param {string} classname\r\n\t * @param {string} innerHTML\r\n\t *\r\n\t * @return {HTMLElement}\r\n\t */\r\n\tfunction createSingletonNode( container, tagname, classname, innerHTML ) {\r\n\r\n\t\t// Find all nodes matching the description\r\n\t\tvar nodes = container.querySelectorAll( '.' + classname );\r\n\r\n\t\t// Check all matches to find one which is a direct child of\r\n\t\t// the specified container\r\n\t\tfor( var i = 0; i < nodes.length; i++ ) {\r\n\t\t\tvar testNode = nodes[i];\r\n\t\t\tif( testNode.parentNode === container ) {\r\n\t\t\t\treturn testNode;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If no node was found, create it now\r\n\t\tvar node = document.createElement( tagname );\r\n\t\tnode.className = classname;\r\n\t\tif( typeof innerHTML === 'string' ) {\r\n\t\t\tnode.innerHTML = innerHTML;\r\n\t\t}\r\n\t\tcontainer.appendChild( node );\r\n\r\n\t\treturn node;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates the slide background elements and appends them\r\n\t * to the background container. One element is created per\r\n\t * slide no matter if the given slide has visible background.\r\n\t */\r\n\tfunction createBackgrounds() {\r\n\r\n\t\tvar printMode = isPrintingPDF();\r\n\r\n\t\t// Clear prior backgrounds\r\n\t\tdom.background.innerHTML = '';\r\n\t\tdom.background.classList.add( 'no-transition' );\r\n\r\n\t\t// Iterate over all horizontal slides\r\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( slideh ) {\r\n\r\n\t\t\tvar backgroundStack = createBackground( slideh, dom.background );\r\n\r\n\t\t\t// Iterate over all vertical slides\r\n\t\t\ttoArray( slideh.querySelectorAll( 'section' ) ).forEach( function( slidev ) {\r\n\r\n\t\t\t\tcreateBackground( slidev, backgroundStack );\r\n\r\n\t\t\t\tbackgroundStack.classList.add( 'stack' );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t\t// Add parallax background if specified\r\n\t\tif( config.parallaxBackgroundImage ) {\r\n\r\n\t\t\tdom.background.style.backgroundImage = 'url(\"' + config.parallaxBackgroundImage + '\")';\r\n\t\t\tdom.background.style.backgroundSize = config.parallaxBackgroundSize;\r\n\t\t\tdom.background.style.backgroundRepeat = config.parallaxBackgroundRepeat;\r\n\t\t\tdom.background.style.backgroundPosition = config.parallaxBackgroundPosition;\r\n\r\n\t\t\t// Make sure the below properties are set on the element - these properties are\r\n\t\t\t// needed for proper transitions to be set on the element via CSS. To remove\r\n\t\t\t// annoying background slide-in effect when the presentation starts, apply\r\n\t\t\t// these properties after short time delay\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tdom.wrapper.classList.add( 'has-parallax-background' );\r\n\t\t\t}, 1 );\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tdom.background.style.backgroundImage = '';\r\n\t\t\tdom.wrapper.classList.remove( 'has-parallax-background' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a background for the given slide.\r\n\t *\r\n\t * @param {HTMLElement} slide\r\n\t * @param {HTMLElement} container The element that the background\r\n\t * should be appended to\r\n\t * @return {HTMLElement} New background div\r\n\t */\r\n\tfunction createBackground( slide, container ) {\r\n\r\n\r\n\t\t// Main slide background element\r\n\t\tvar element = document.createElement( 'div' );\r\n\t\telement.className = 'slide-background ' + slide.className.replace( /present|past|future/, '' );\r\n\r\n\t\t// Inner background element that wraps images/videos/iframes\r\n\t\tvar contentElement = document.createElement( 'div' );\r\n\t\tcontentElement.className = 'slide-background-content';\r\n\r\n\t\telement.appendChild( contentElement );\r\n\t\tcontainer.appendChild( element );\r\n\r\n\t\tslide.slideBackgroundElement = element;\r\n\t\tslide.slideBackgroundContentElement = contentElement;\r\n\r\n\t\t// Syncs the background to reflect all current background settings\r\n\t\tsyncBackground( slide );\r\n\r\n\t\treturn element;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders all of the visual properties of a slide background\r\n\t * based on the various background attributes.\r\n\t *\r\n\t * @param {HTMLElement} slide\r\n\t */\r\n\tfunction syncBackground( slide ) {\r\n\r\n\t\tvar element = slide.slideBackgroundElement,\r\n\t\t\tcontentElement = slide.slideBackgroundContentElement;\r\n\r\n\t\t// Reset the prior background state in case this is not the\r\n\t\t// initial sync\r\n\t\tslide.classList.remove( 'has-dark-background' );\r\n\t\tslide.classList.remove( 'has-light-background' );\r\n\r\n\t\telement.removeAttribute( 'data-loaded' );\r\n\t\telement.removeAttribute( 'data-background-hash' );\r\n\t\telement.removeAttribute( 'data-background-size' );\r\n\t\telement.removeAttribute( 'data-background-transition' );\r\n\t\telement.style.backgroundColor = '';\r\n\r\n\t\tcontentElement.style.backgroundSize = '';\r\n\t\tcontentElement.style.backgroundRepeat = '';\r\n\t\tcontentElement.style.backgroundPosition = '';\r\n\t\tcontentElement.style.backgroundImage = '';\r\n\t\tcontentElement.style.opacity = '';\r\n\t\tcontentElement.innerHTML = '';\r\n\r\n\t\tvar data = {\r\n\t\t\tbackground: slide.getAttribute( 'data-background' ),\r\n\t\t\tbackgroundSize: slide.getAttribute( 'data-background-size' ),\r\n\t\t\tbackgroundImage: slide.getAttribute( 'data-background-image' ),\r\n\t\t\tbackgroundVideo: slide.getAttribute( 'data-background-video' ),\r\n\t\t\tbackgroundIframe: slide.getAttribute( 'data-background-iframe' ),\r\n\t\t\tbackgroundColor: slide.getAttribute( 'data-background-color' ),\r\n\t\t\tbackgroundRepeat: slide.getAttribute( 'data-background-repeat' ),\r\n\t\t\tbackgroundPosition: slide.getAttribute( 'data-background-position' ),\r\n\t\t\tbackgroundTransition: slide.getAttribute( 'data-background-transition' ),\r\n\t\t\tbackgroundOpacity: slide.getAttribute( 'data-background-opacity' )\r\n\t\t};\r\n\r\n\t\tif( data.background ) {\r\n\t\t\t// Auto-wrap image urls in url(...)\r\n\t\t\tif( /^(http|file|\\/\\/)/gi.test( data.background ) || /\\.(svg|png|jpg|jpeg|gif|bmp)([?#\\s]|$)/gi.test( data.background ) ) {\r\n\t\t\t\tslide.setAttribute( 'data-background-image', data.background );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\telement.style.background = data.background;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Create a hash for this combination of background settings.\r\n\t\t// This is used to determine when two slide backgrounds are\r\n\t\t// the same.\r\n\t\tif( data.background || data.backgroundColor || data.backgroundImage || data.backgroundVideo || data.backgroundIframe ) {\r\n\t\t\telement.setAttribute( 'data-background-hash', data.background +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundSize +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundImage +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundVideo +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundIframe +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundColor +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundRepeat +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundPosition +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundTransition +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundOpacity );\r\n\t\t}\r\n\r\n\t\t// Additional and optional background properties\r\n\t\tif( data.backgroundSize ) element.setAttribute( 'data-background-size', data.backgroundSize );\r\n\t\tif( data.backgroundColor ) element.style.backgroundColor = data.backgroundColor;\r\n\t\tif( data.backgroundTransition ) element.setAttribute( 'data-background-transition', data.backgroundTransition );\r\n\r\n\t\tif( slide.hasAttribute( 'data-preload' ) ) element.setAttribute( 'data-preload', '' );\r\n\r\n\t\t// Background image options are set on the content wrapper\r\n\t\tif( data.backgroundSize ) contentElement.style.backgroundSize = data.backgroundSize;\r\n\t\tif( data.backgroundRepeat ) contentElement.style.backgroundRepeat = data.backgroundRepeat;\r\n\t\tif( data.backgroundPosition ) contentElement.style.backgroundPosition = data.backgroundPosition;\r\n\t\tif( data.backgroundOpacity ) contentElement.style.opacity = data.backgroundOpacity;\r\n\r\n\t\t// If this slide has a background color, we add a class that\r\n\t\t// signals if it is light or dark. If the slide has no background\r\n\t\t// color, no class will be added\r\n\t\tvar contrastColor = data.backgroundColor;\r\n\r\n\t\t// If no bg color was found, check the computed background\r\n\t\tif( !contrastColor ) {\r\n\t\t\tvar computedBackgroundStyle = window.getComputedStyle( element );\r\n\t\t\tif( computedBackgroundStyle && computedBackgroundStyle.backgroundColor ) {\r\n\t\t\t\tcontrastColor = computedBackgroundStyle.backgroundColor;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( contrastColor ) {\r\n\t\t\tvar rgb = colorToRgb( contrastColor );\r\n\r\n\t\t\t// Ignore fully transparent backgrounds. Some browsers return\r\n\t\t\t// rgba(0,0,0,0) when reading the computed background color of\r\n\t\t\t// an element with no background\r\n\t\t\tif( rgb && rgb.a !== 0 ) {\r\n\t\t\t\tif( colorBrightness( contrastColor ) < 128 ) {\r\n\t\t\t\t\tslide.classList.add( 'has-dark-background' );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tslide.classList.add( 'has-light-background' );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Registers a listener to postMessage events, this makes it\r\n\t * possible to call all reveal.js API methods from another\r\n\t * window. For example:\r\n\t *\r\n\t * revealWindow.postMessage( JSON.stringify({\r\n\t *   method: 'slide',\r\n\t *   args: [ 2 ]\r\n\t * }), '*' );\r\n\t */\r\n\tfunction setupPostMessage() {\r\n\r\n\t\tif( config.postMessage ) {\r\n\t\t\twindow.addEventListener( 'message', function ( event ) {\r\n\t\t\t\tvar data = event.data;\r\n\r\n\t\t\t\t// Make sure we're dealing with JSON\r\n\t\t\t\tif( typeof data === 'string' && data.charAt( 0 ) === '{' && data.charAt( data.length - 1 ) === '}' ) {\r\n\t\t\t\t\tdata = JSON.parse( data );\r\n\r\n\t\t\t\t\t// Check if the requested method can be found\r\n\t\t\t\t\tif( data.method && typeof Reveal[data.method] === 'function' ) {\r\n\r\n\t\t\t\t\t\tif( POST_MESSAGE_METHOD_BLACKLIST.test( data.method ) === false ) {\r\n\r\n\t\t\t\t\t\t\tvar result = Reveal[data.method].apply( Reveal, data.args );\r\n\r\n\t\t\t\t\t\t\t// Dispatch a postMessage event with the returned value from\r\n\t\t\t\t\t\t\t// our method invocation for getter functions\r\n\t\t\t\t\t\t\tdispatchPostMessage( 'callback', { method: data.method, result: result } );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tconsole.warn( 'reveal.js: \"'+ data.method +'\" is is blacklisted from the postMessage API' );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, false );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies the configuration settings from the config\r\n\t * object. May be called multiple times.\r\n\t *\r\n\t * @param {object} options\r\n\t */\r\n\tfunction configure( options ) {\r\n\r\n\t\tvar oldTransition = config.transition;\r\n\r\n\t\t// New config options may be passed when this method\r\n\t\t// is invoked through the API after initialization\r\n\t\tif( typeof options === 'object' ) extend( config, options );\r\n\r\n\t\t// Abort if reveal.js hasn't finished loading, config\r\n\t\t// changes will be applied automatically once loading\r\n\t\t// finishes\r\n\t\tif( loaded === false ) return;\r\n\r\n\t\tvar numberOfSlides = dom.wrapper.querySelectorAll( SLIDES_SELECTOR ).length;\r\n\r\n\t\t// Remove the previously configured transition class\r\n\t\tdom.wrapper.classList.remove( oldTransition );\r\n\r\n\t\t// Force linear transition based on browser capabilities\r\n\t\tif( features.transforms3d === false ) config.transition = 'linear';\r\n\r\n\t\tdom.wrapper.classList.add( config.transition );\r\n\r\n\t\tdom.wrapper.setAttribute( 'data-transition-speed', config.transitionSpeed );\r\n\t\tdom.wrapper.setAttribute( 'data-background-transition', config.backgroundTransition );\r\n\r\n\t\tdom.controls.style.display = config.controls ? 'block' : 'none';\r\n\t\tdom.progress.style.display = config.progress ? 'block' : 'none';\r\n\r\n\t\tdom.controls.setAttribute( 'data-controls-layout', config.controlsLayout );\r\n\t\tdom.controls.setAttribute( 'data-controls-back-arrows', config.controlsBackArrows );\r\n\r\n\t\tif( config.shuffle ) {\r\n\t\t\tshuffle();\r\n\t\t}\r\n\r\n\t\tif( config.rtl ) {\r\n\t\t\tdom.wrapper.classList.add( 'rtl' );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.wrapper.classList.remove( 'rtl' );\r\n\t\t}\r\n\r\n\t\tif( config.center ) {\r\n\t\t\tdom.wrapper.classList.add( 'center' );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.wrapper.classList.remove( 'center' );\r\n\t\t}\r\n\r\n\t\t// Exit the paused mode if it was configured off\r\n\t\tif( config.pause === false ) {\r\n\t\t\tresume();\r\n\t\t}\r\n\r\n\t\tif( config.showNotes ) {\r\n\t\t\tdom.speakerNotes.setAttribute( 'data-layout', typeof config.showNotes === 'string' ? config.showNotes : 'inline' );\r\n\t\t}\r\n\r\n\t\tif( config.mouseWheel ) {\r\n\t\t\tdocument.addEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\r\n\t\t\tdocument.addEventListener( 'mousewheel', onDocumentMouseScroll, false );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdocument.removeEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\r\n\t\t\tdocument.removeEventListener( 'mousewheel', onDocumentMouseScroll, false );\r\n\t\t}\r\n\r\n\t\t// Rolling 3D links\r\n\t\tif( config.rollingLinks ) {\r\n\t\t\tenableRollingLinks();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdisableRollingLinks();\r\n\t\t}\r\n\r\n\t\t// Auto-hide the mouse pointer when its inactive\r\n\t\tif( config.hideInactiveCursor ) {\r\n\t\t\tdocument.addEventListener( 'mousemove', onDocumentCursorActive, false );\r\n\t\t\tdocument.addEventListener( 'mousedown', onDocumentCursorActive, false );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tshowCursor();\r\n\r\n\t\t\tdocument.removeEventListener( 'mousemove', onDocumentCursorActive, false );\r\n\t\t\tdocument.removeEventListener( 'mousedown', onDocumentCursorActive, false );\r\n\t\t}\r\n\r\n\t\t// Iframe link previews\r\n\t\tif( config.previewLinks ) {\r\n\t\t\tenablePreviewLinks();\r\n\t\t\tdisablePreviewLinks( '[data-preview-link=false]' );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdisablePreviewLinks();\r\n\t\t\tenablePreviewLinks( '[data-preview-link]:not([data-preview-link=false])' );\r\n\t\t}\r\n\r\n\t\t// Remove existing auto-slide controls\r\n\t\tif( autoSlidePlayer ) {\r\n\t\t\tautoSlidePlayer.destroy();\r\n\t\t\tautoSlidePlayer = null;\r\n\t\t}\r\n\r\n\t\t// Generate auto-slide controls if needed\r\n\t\tif( numberOfSlides > 1 && config.autoSlide && config.autoSlideStoppable && features.canvas && features.requestAnimationFrame ) {\r\n\t\t\tautoSlidePlayer = new Playback( dom.wrapper, function() {\r\n\t\t\t\treturn Math.min( Math.max( ( Date.now() - autoSlideStartTime ) / autoSlide, 0 ), 1 );\r\n\t\t\t} );\r\n\r\n\t\t\tautoSlidePlayer.on( 'click', onAutoSlidePlayerClick );\r\n\t\t\tautoSlidePaused = false;\r\n\t\t}\r\n\r\n\t\t// When fragments are turned off they should be visible\r\n\t\tif( config.fragments === false ) {\r\n\t\t\ttoArray( dom.slides.querySelectorAll( '.fragment' ) ).forEach( function( element ) {\r\n\t\t\t\telement.classList.add( 'visible' );\r\n\t\t\t\telement.classList.remove( 'current-fragment' );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// Slide numbers\r\n\t\tvar slideNumberDisplay = 'none';\r\n\t\tif( config.slideNumber && !isPrintingPDF() ) {\r\n\t\t\tif( config.showSlideNumber === 'all' ) {\r\n\t\t\t\tslideNumberDisplay = 'block';\r\n\t\t\t}\r\n\t\t\telse if( config.showSlideNumber === 'speaker' && isSpeakerNotes() ) {\r\n\t\t\t\tslideNumberDisplay = 'block';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdom.slideNumber.style.display = slideNumberDisplay;\r\n\r\n\t\t// Add the navigation mode to the DOM so we can adjust styling\r\n\t\tif( config.navigationMode !== 'default' ) {\r\n\t\t\tdom.wrapper.setAttribute( 'data-navigation-mode', config.navigationMode );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.wrapper.removeAttribute( 'data-navigation-mode' );\r\n\t\t}\r\n\r\n\t\t// Define our contextual list of keyboard shortcuts\r\n\t\tif( config.navigationMode === 'linear' ) {\r\n\t\t\tkeyboardShortcuts['&#8594;  ,  &#8595;  ,  SPACE  ,  N  ,  L  ,  J'] = 'Next slide';\r\n\t\t\tkeyboardShortcuts['&#8592;  ,  &#8593;  ,  P  ,  H  ,  K']           = 'Previous slide';\r\n\t\t}\r\n\t\telse {\r\n\t\t\tkeyboardShortcuts['N  ,  SPACE']   = 'Next slide';\r\n\t\t\tkeyboardShortcuts['P']             = 'Previous slide';\r\n\t\t\tkeyboardShortcuts['&#8592;  ,  H'] = 'Navigate left';\r\n\t\t\tkeyboardShortcuts['&#8594;  ,  L'] = 'Navigate right';\r\n\t\t\tkeyboardShortcuts['&#8593;  ,  K'] = 'Navigate up';\r\n\t\t\tkeyboardShortcuts['&#8595;  ,  J'] = 'Navigate down';\r\n\t\t}\r\n\r\n\t\tkeyboardShortcuts['Home  ,  Shift &#8592;']        = 'First slide';\r\n\t\tkeyboardShortcuts['End  ,  Shift &#8594;']         = 'Last slide';\r\n\t\tkeyboardShortcuts['B  ,  .']                       = 'Pause';\r\n\t\tkeyboardShortcuts['F']                             = 'Fullscreen';\r\n\t\tkeyboardShortcuts['ESC, O']                        = 'Slide overview';\r\n\r\n\t\tsync();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Binds all event listeners.\r\n\t */\r\n\tfunction addEventListeners() {\r\n\r\n\t\teventsAreBound = true;\r\n\r\n\t\twindow.addEventListener( 'hashchange', onWindowHashChange, false );\r\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\r\n\r\n\t\tif( config.touch ) {\r\n\t\t\tif( 'onpointerdown' in window ) {\r\n\t\t\t\t// Use W3C pointer events\r\n\t\t\t\tdom.wrapper.addEventListener( 'pointerdown', onPointerDown, false );\r\n\t\t\t\tdom.wrapper.addEventListener( 'pointermove', onPointerMove, false );\r\n\t\t\t\tdom.wrapper.addEventListener( 'pointerup', onPointerUp, false );\r\n\t\t\t}\r\n\t\t\telse if( window.navigator.msPointerEnabled ) {\r\n\t\t\t\t// IE 10 uses prefixed version of pointer events\r\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerDown', onPointerDown, false );\r\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerMove', onPointerMove, false );\r\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerUp', onPointerUp, false );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Fall back to touch events\r\n\t\t\t\tdom.wrapper.addEventListener( 'touchstart', onTouchStart, false );\r\n\t\t\t\tdom.wrapper.addEventListener( 'touchmove', onTouchMove, false );\r\n\t\t\t\tdom.wrapper.addEventListener( 'touchend', onTouchEnd, false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( config.keyboard ) {\r\n\t\t\tdocument.addEventListener( 'keydown', onDocumentKeyDown, false );\r\n\t\t\tdocument.addEventListener( 'keypress', onDocumentKeyPress, false );\r\n\t\t}\r\n\r\n\t\tif( config.progress && dom.progress ) {\r\n\t\t\tdom.progress.addEventListener( 'click', onProgressClicked, false );\r\n\t\t}\r\n\r\n\t\tdom.pauseOverlay.addEventListener( 'click', resume, false );\r\n\r\n\t\tif( config.focusBodyOnPageVisibilityChange ) {\r\n\t\t\tvar visibilityChange;\r\n\r\n\t\t\tif( 'hidden' in document ) {\r\n\t\t\t\tvisibilityChange = 'visibilitychange';\r\n\t\t\t}\r\n\t\t\telse if( 'msHidden' in document ) {\r\n\t\t\t\tvisibilityChange = 'msvisibilitychange';\r\n\t\t\t}\r\n\t\t\telse if( 'webkitHidden' in document ) {\r\n\t\t\t\tvisibilityChange = 'webkitvisibilitychange';\r\n\t\t\t}\r\n\r\n\t\t\tif( visibilityChange ) {\r\n\t\t\t\tdocument.addEventListener( visibilityChange, onPageVisibilityChange, false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Listen to both touch and click events, in case the device\r\n\t\t// supports both\r\n\t\tvar pointerEvents = [ 'touchstart', 'click' ];\r\n\r\n\t\t// Only support touch for Android, fixes double navigations in\r\n\t\t// stock browser\r\n\t\tif( UA.match( /android/gi ) ) {\r\n\t\t\tpointerEvents = [ 'touchstart' ];\r\n\t\t}\r\n\r\n\t\tpointerEvents.forEach( function( eventName ) {\r\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.addEventListener( eventName, onNavigateLeftClicked, false ); } );\r\n\t\t\tdom.controlsRight.forEach( function( el ) { el.addEventListener( eventName, onNavigateRightClicked, false ); } );\r\n\t\t\tdom.controlsUp.forEach( function( el ) { el.addEventListener( eventName, onNavigateUpClicked, false ); } );\r\n\t\t\tdom.controlsDown.forEach( function( el ) { el.addEventListener( eventName, onNavigateDownClicked, false ); } );\r\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.addEventListener( eventName, onNavigatePrevClicked, false ); } );\r\n\t\t\tdom.controlsNext.forEach( function( el ) { el.addEventListener( eventName, onNavigateNextClicked, false ); } );\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unbinds all event listeners.\r\n\t */\r\n\tfunction removeEventListeners() {\r\n\r\n\t\teventsAreBound = false;\r\n\r\n\t\tdocument.removeEventListener( 'keydown', onDocumentKeyDown, false );\r\n\t\tdocument.removeEventListener( 'keypress', onDocumentKeyPress, false );\r\n\t\twindow.removeEventListener( 'hashchange', onWindowHashChange, false );\r\n\t\twindow.removeEventListener( 'resize', onWindowResize, false );\r\n\r\n\t\tdom.wrapper.removeEventListener( 'pointerdown', onPointerDown, false );\r\n\t\tdom.wrapper.removeEventListener( 'pointermove', onPointerMove, false );\r\n\t\tdom.wrapper.removeEventListener( 'pointerup', onPointerUp, false );\r\n\r\n\t\tdom.wrapper.removeEventListener( 'MSPointerDown', onPointerDown, false );\r\n\t\tdom.wrapper.removeEventListener( 'MSPointerMove', onPointerMove, false );\r\n\t\tdom.wrapper.removeEventListener( 'MSPointerUp', onPointerUp, false );\r\n\r\n\t\tdom.wrapper.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tdom.wrapper.removeEventListener( 'touchmove', onTouchMove, false );\r\n\t\tdom.wrapper.removeEventListener( 'touchend', onTouchEnd, false );\r\n\r\n\t\tdom.pauseOverlay.removeEventListener( 'click', resume, false );\r\n\r\n\t\tif ( config.progress && dom.progress ) {\r\n\t\t\tdom.progress.removeEventListener( 'click', onProgressClicked, false );\r\n\t\t}\r\n\r\n\t\t[ 'touchstart', 'click' ].forEach( function( eventName ) {\r\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.removeEventListener( eventName, onNavigateLeftClicked, false ); } );\r\n\t\t\tdom.controlsRight.forEach( function( el ) { el.removeEventListener( eventName, onNavigateRightClicked, false ); } );\r\n\t\t\tdom.controlsUp.forEach( function( el ) { el.removeEventListener( eventName, onNavigateUpClicked, false ); } );\r\n\t\t\tdom.controlsDown.forEach( function( el ) { el.removeEventListener( eventName, onNavigateDownClicked, false ); } );\r\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.removeEventListener( eventName, onNavigatePrevClicked, false ); } );\r\n\t\t\tdom.controlsNext.forEach( function( el ) { el.removeEventListener( eventName, onNavigateNextClicked, false ); } );\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Registers a new plugin with this reveal.js instance.\r\n\t *\r\n\t * reveal.js waits for all regisered plugins to initialize\r\n\t * before considering itself ready, as long as the plugin\r\n\t * is registered before calling `Reveal.initialize()`.\r\n\t */\r\n\tfunction registerPlugin( id, plugin ) {\r\n\r\n\t\tif( plugins[id] === undefined ) {\r\n\t\t\tplugins[id] = plugin;\r\n\r\n\t\t\t// If a plugin is registered after reveal.js is loaded,\r\n\t\t\t// initialize it right away\r\n\t\t\tif( loaded && typeof plugin.init === 'function' ) {\r\n\t\t\t\tplugin.init();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.warn( 'reveal.js: \"'+ id +'\" plugin has already been registered' );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if a specific plugin has been registered.\r\n\t *\r\n\t * @param {String} id Unique plugin identifier\r\n\t */\r\n\tfunction hasPlugin( id ) {\r\n\r\n\t\treturn !!plugins[id];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the specific plugin instance, if a plugin\r\n\t * with the given ID has been registered.\r\n\t *\r\n\t * @param {String} id Unique plugin identifier\r\n\t */\r\n\tfunction getPlugin( id ) {\r\n\r\n\t\treturn plugins[id];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Add a custom key binding with optional description to\r\n\t * be added to the help screen.\r\n\t */\r\n\tfunction addKeyBinding( binding, callback ) {\r\n\r\n\t\tif( typeof binding === 'object' && binding.keyCode ) {\r\n\t\t\tregisteredKeyBindings[binding.keyCode] = {\r\n\t\t\t\tcallback: callback,\r\n\t\t\t\tkey: binding.key,\r\n\t\t\t\tdescription: binding.description\r\n\t\t\t};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tregisteredKeyBindings[binding] = {\r\n\t\t\t\tcallback: callback,\r\n\t\t\t\tkey: null,\r\n\t\t\t\tdescription: null\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the specified custom key binding.\r\n\t */\r\n\tfunction removeKeyBinding( keyCode ) {\r\n\r\n\t\tdelete registeredKeyBindings[keyCode];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Extend object a with the properties of object b.\r\n\t * If there's a conflict, object b takes precedence.\r\n\t *\r\n\t * @param {object} a\r\n\t * @param {object} b\r\n\t */\r\n\tfunction extend( a, b ) {\r\n\r\n\t\tfor( var i in b ) {\r\n\t\t\ta[ i ] = b[ i ];\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the target object to an array.\r\n\t *\r\n\t * @param {object} o\r\n\t * @return {object[]}\r\n\t */\r\n\tfunction toArray( o ) {\r\n\r\n\t\treturn Array.prototype.slice.call( o );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Utility for deserializing a value.\r\n\t *\r\n\t * @param {*} value\r\n\t * @return {*}\r\n\t */\r\n\tfunction deserialize( value ) {\r\n\r\n\t\tif( typeof value === 'string' ) {\r\n\t\t\tif( value === 'null' ) return null;\r\n\t\t\telse if( value === 'true' ) return true;\r\n\t\t\telse if( value === 'false' ) return false;\r\n\t\t\telse if( value.match( /^-?[\\d\\.]+$/ ) ) return parseFloat( value );\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the distance in pixels between point a\r\n\t * and point b.\r\n\t *\r\n\t * @param {object} a point with x/y properties\r\n\t * @param {object} b point with x/y properties\r\n\t *\r\n\t * @return {number}\r\n\t */\r\n\tfunction distanceBetween( a, b ) {\r\n\r\n\t\tvar dx = a.x - b.x,\r\n\t\t\tdy = a.y - b.y;\r\n\r\n\t\treturn Math.sqrt( dx*dx + dy*dy );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a CSS transform to the target element.\r\n\t *\r\n\t * @param {HTMLElement} element\r\n\t * @param {string} transform\r\n\t */\r\n\tfunction transformElement( element, transform ) {\r\n\r\n\t\telement.style.WebkitTransform = transform;\r\n\t\telement.style.MozTransform = transform;\r\n\t\telement.style.msTransform = transform;\r\n\t\telement.style.transform = transform;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies CSS transforms to the slides container. The container\r\n\t * is transformed from two separate sources: layout and the overview\r\n\t * mode.\r\n\t *\r\n\t * @param {object} transforms\r\n\t */\r\n\tfunction transformSlides( transforms ) {\r\n\r\n\t\t// Pick up new transforms from arguments\r\n\t\tif( typeof transforms.layout === 'string' ) slidesTransform.layout = transforms.layout;\r\n\t\tif( typeof transforms.overview === 'string' ) slidesTransform.overview = transforms.overview;\r\n\r\n\t\t// Apply the transforms to the slides container\r\n\t\tif( slidesTransform.layout ) {\r\n\t\t\ttransformElement( dom.slides, slidesTransform.layout + ' ' + slidesTransform.overview );\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttransformElement( dom.slides, slidesTransform.overview );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Injects the given CSS styles into the DOM.\r\n\t *\r\n\t * @param {string} value\r\n\t */\r\n\tfunction injectStyleSheet( value ) {\r\n\r\n\t\tvar tag = document.createElement( 'style' );\r\n\t\ttag.type = 'text/css';\r\n\t\tif( tag.styleSheet ) {\r\n\t\t\ttag.styleSheet.cssText = value;\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttag.appendChild( document.createTextNode( value ) );\r\n\t\t}\r\n\t\tdocument.getElementsByTagName( 'head' )[0].appendChild( tag );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Find the closest parent that matches the given\r\n\t * selector.\r\n\t *\r\n\t * @param {HTMLElement} target The child element\r\n\t * @param {String} selector The CSS selector to match\r\n\t * the parents against\r\n\t *\r\n\t * @return {HTMLElement} The matched parent or null\r\n\t * if no matching parent was found\r\n\t */\r\n\tfunction closestParent( target, selector ) {\r\n\r\n\t\tvar parent = target.parentNode;\r\n\r\n\t\twhile( parent ) {\r\n\r\n\t\t\t// There's some overhead doing this each time, we don't\r\n\t\t\t// want to rewrite the element prototype but should still\r\n\t\t\t// be enough to feature detect once at startup...\r\n\t\t\tvar matchesMethod = parent.matches || parent.matchesSelector || parent.msMatchesSelector;\r\n\r\n\t\t\t// If we find a match, we're all set\r\n\t\t\tif( matchesMethod && matchesMethod.call( parent, selector ) ) {\r\n\t\t\t\treturn parent;\r\n\t\t\t}\r\n\r\n\t\t\t// Keep searching\r\n\t\t\tparent = parent.parentNode;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts various color input formats to an {r:0,g:0,b:0} object.\r\n\t *\r\n\t * @param {string} color The string representation of a color\r\n\t * @example\r\n\t * colorToRgb('#000');\r\n\t * @example\r\n\t * colorToRgb('#000000');\r\n\t * @example\r\n\t * colorToRgb('rgb(0,0,0)');\r\n\t * @example\r\n\t * colorToRgb('rgba(0,0,0)');\r\n\t *\r\n\t * @return {{r: number, g: number, b: number, [a]: number}|null}\r\n\t */\r\n\tfunction colorToRgb( color ) {\r\n\r\n\t\tvar hex3 = color.match( /^#([0-9a-f]{3})$/i );\r\n\t\tif( hex3 && hex3[1] ) {\r\n\t\t\thex3 = hex3[1];\r\n\t\t\treturn {\r\n\t\t\t\tr: parseInt( hex3.charAt( 0 ), 16 ) * 0x11,\r\n\t\t\t\tg: parseInt( hex3.charAt( 1 ), 16 ) * 0x11,\r\n\t\t\t\tb: parseInt( hex3.charAt( 2 ), 16 ) * 0x11\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar hex6 = color.match( /^#([0-9a-f]{6})$/i );\r\n\t\tif( hex6 && hex6[1] ) {\r\n\t\t\thex6 = hex6[1];\r\n\t\t\treturn {\r\n\t\t\t\tr: parseInt( hex6.substr( 0, 2 ), 16 ),\r\n\t\t\t\tg: parseInt( hex6.substr( 2, 2 ), 16 ),\r\n\t\t\t\tb: parseInt( hex6.substr( 4, 2 ), 16 )\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar rgb = color.match( /^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i );\r\n\t\tif( rgb ) {\r\n\t\t\treturn {\r\n\t\t\t\tr: parseInt( rgb[1], 10 ),\r\n\t\t\t\tg: parseInt( rgb[2], 10 ),\r\n\t\t\t\tb: parseInt( rgb[3], 10 )\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar rgba = color.match( /^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\,\\s*([\\d]+|[\\d]*.[\\d]+)\\s*\\)$/i );\r\n\t\tif( rgba ) {\r\n\t\t\treturn {\r\n\t\t\t\tr: parseInt( rgba[1], 10 ),\r\n\t\t\t\tg: parseInt( rgba[2], 10 ),\r\n\t\t\t\tb: parseInt( rgba[3], 10 ),\r\n\t\t\t\ta: parseFloat( rgba[4] )\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates brightness on a scale of 0-255.\r\n\t *\r\n\t * @param {string} color See colorToRgb for supported formats.\r\n\t * @see {@link colorToRgb}\r\n\t */\r\n\tfunction colorBrightness( color ) {\r\n\r\n\t\tif( typeof color === 'string' ) color = colorToRgb( color );\r\n\r\n\t\tif( color ) {\r\n\t\t\treturn ( color.r * 299 + color.g * 587 + color.b * 114 ) / 1000;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the remaining height within the parent of the\r\n\t * target element.\r\n\t *\r\n\t * remaining height = [ configured parent height ] - [ current parent height ]\r\n\t *\r\n\t * @param {HTMLElement} element\r\n\t * @param {number} [height]\r\n\t */\r\n\tfunction getRemainingHeight( element, height ) {\r\n\r\n\t\theight = height || 0;\r\n\r\n\t\tif( element ) {\r\n\t\t\tvar newHeight, oldHeight = element.style.height;\r\n\r\n\t\t\t// Change the .stretch element height to 0 in order find the height of all\r\n\t\t\t// the other elements\r\n\t\t\telement.style.height = '0px';\r\n\r\n\t\t\t// In Overview mode, the parent (.slide) height is set of 700px.\r\n\t\t\t// Restore it temporarily to its natural height.\r\n\t\t\telement.parentNode.style.height = 'auto';\r\n\r\n\t\t\tnewHeight = height - element.parentNode.offsetHeight;\r\n\r\n\t\t\t// Restore the old height, just in case\r\n\t\t\telement.style.height = oldHeight + 'px';\r\n\r\n\t\t\t// Clear the parent (.slide) height. .removeProperty works in IE9+\r\n\t\t\telement.parentNode.style.removeProperty('height');\r\n\r\n\t\t\treturn newHeight;\r\n\t\t}\r\n\r\n\t\treturn height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if this instance is being used to print a PDF.\r\n\t */\r\n\tfunction isPrintingPDF() {\r\n\r\n\t\treturn ( /print-pdf/gi ).test( window.location.search );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Hides the address bar if we're on a mobile device.\r\n\t */\r\n\tfunction hideAddressBar() {\r\n\r\n\t\tif( config.hideAddressBar && isMobileDevice ) {\r\n\t\t\t// Events that should trigger the address bar to hide\r\n\t\t\twindow.addEventListener( 'load', removeAddressBar, false );\r\n\t\t\twindow.addEventListener( 'orientationchange', removeAddressBar, false );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Causes the address bar to hide on mobile devices,\r\n\t * more vertical space ftw.\r\n\t */\r\n\tfunction removeAddressBar() {\r\n\r\n\t\tsetTimeout( function() {\r\n\t\t\twindow.scrollTo( 0, 1 );\r\n\t\t}, 10 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches an event of the specified type from the\r\n\t * reveal DOM element.\r\n\t */\r\n\tfunction dispatchEvent( type, args ) {\r\n\r\n\t\tvar event = document.createEvent( 'HTMLEvents', 1, 2 );\r\n\t\tevent.initEvent( type, true, true );\r\n\t\textend( event, args );\r\n\t\tdom.wrapper.dispatchEvent( event );\r\n\r\n\t\t// If we're in an iframe, post each reveal.js event to the\r\n\t\t// parent window. Used by the notes plugin\r\n\t\tdispatchPostMessage( type );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatched a postMessage of the given type from our window.\r\n\t */\r\n\tfunction dispatchPostMessage( type, data ) {\r\n\r\n\t\tif( config.postMessageEvents && window.parent !== window.self ) {\r\n\t\t\tvar message = {\r\n\t\t\t\tnamespace: 'reveal',\r\n\t\t\t\teventName: type,\r\n\t\t\t\tstate: getState()\r\n\t\t\t};\r\n\r\n\t\t\textend( message, data );\r\n\r\n\t\t\twindow.parent.postMessage( JSON.stringify( message ), '*' );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Wrap all links in 3D goodness.\r\n\t */\r\n\tfunction enableRollingLinks() {\r\n\r\n\t\tif( features.transforms3d && !( 'msPerspective' in document.body.style ) ) {\r\n\t\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a' );\r\n\r\n\t\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\r\n\t\t\t\tvar anchor = anchors[i];\r\n\r\n\t\t\t\tif( anchor.textContent && !anchor.querySelector( '*' ) && ( !anchor.className || !anchor.classList.contains( anchor, 'roll' ) ) ) {\r\n\t\t\t\t\tvar span = document.createElement('span');\r\n\t\t\t\t\tspan.setAttribute('data-title', anchor.text);\r\n\t\t\t\t\tspan.innerHTML = anchor.innerHTML;\r\n\r\n\t\t\t\t\tanchor.classList.add( 'roll' );\r\n\t\t\t\t\tanchor.innerHTML = '';\r\n\t\t\t\t\tanchor.appendChild(span);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unwrap all 3D links.\r\n\t */\r\n\tfunction disableRollingLinks() {\r\n\r\n\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a.roll' );\r\n\r\n\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\r\n\t\t\tvar anchor = anchors[i];\r\n\t\t\tvar span = anchor.querySelector( 'span' );\r\n\r\n\t\t\tif( span ) {\r\n\t\t\t\tanchor.classList.remove( 'roll' );\r\n\t\t\t\tanchor.innerHTML = span.innerHTML;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Bind preview frame links.\r\n\t *\r\n\t * @param {string} [selector=a] - selector for anchors\r\n\t */\r\n\tfunction enablePreviewLinks( selector ) {\r\n\r\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\r\n\r\n\t\tanchors.forEach( function( element ) {\r\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\r\n\t\t\t\telement.addEventListener( 'click', onPreviewLinkClicked, false );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unbind preview frame links.\r\n\t */\r\n\tfunction disablePreviewLinks( selector ) {\r\n\r\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\r\n\r\n\t\tanchors.forEach( function( element ) {\r\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\r\n\t\t\t\telement.removeEventListener( 'click', onPreviewLinkClicked, false );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Opens a preview window for the target URL.\r\n\t *\r\n\t * @param {string} url - url for preview iframe src\r\n\t */\r\n\tfunction showPreview( url ) {\r\n\r\n\t\tcloseOverlay();\r\n\r\n\t\tdom.overlay = document.createElement( 'div' );\r\n\t\tdom.overlay.classList.add( 'overlay' );\r\n\t\tdom.overlay.classList.add( 'overlay-preview' );\r\n\t\tdom.wrapper.appendChild( dom.overlay );\r\n\r\n\t\tdom.overlay.innerHTML = [\r\n\t\t\t'<header>',\r\n\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\r\n\t\t\t\t'<a class=\"external\" href=\"'+ url +'\" target=\"_blank\"><span class=\"icon\"></span></a>',\r\n\t\t\t'</header>',\r\n\t\t\t'<div class=\"spinner\"></div>',\r\n\t\t\t'<div class=\"viewport\">',\r\n\t\t\t\t'<iframe src=\"'+ url +'\"></iframe>',\r\n\t\t\t\t'<small class=\"viewport-inner\">',\r\n\t\t\t\t\t'<span class=\"x-frame-error\">Unable to load iframe. This is likely due to the site\\'s policy (x-frame-options).</span>',\r\n\t\t\t\t'</small>',\r\n\t\t\t'</div>'\r\n\t\t].join('');\r\n\r\n\t\tdom.overlay.querySelector( 'iframe' ).addEventListener( 'load', function( event ) {\r\n\t\t\tdom.overlay.classList.add( 'loaded' );\r\n\t\t}, false );\r\n\r\n\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\r\n\t\t\tcloseOverlay();\r\n\t\t\tevent.preventDefault();\r\n\t\t}, false );\r\n\r\n\t\tdom.overlay.querySelector( '.external' ).addEventListener( 'click', function( event ) {\r\n\t\t\tcloseOverlay();\r\n\t\t}, false );\r\n\r\n\t\tsetTimeout( function() {\r\n\t\t\tdom.overlay.classList.add( 'visible' );\r\n\t\t}, 1 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Open or close help overlay window.\r\n\t *\r\n\t * @param {Boolean} [override] Flag which overrides the\r\n\t * toggle logic and forcibly sets the desired state. True means\r\n\t * help is open, false means it's closed.\r\n\t */\r\n\tfunction toggleHelp( override ){\r\n\r\n\t\tif( typeof override === 'boolean' ) {\r\n\t\t\toverride ? showHelp() : closeOverlay();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif( dom.overlay ) {\r\n\t\t\t\tcloseOverlay();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tshowHelp();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Opens an overlay window with help material.\r\n\t */\r\n\tfunction showHelp() {\r\n\r\n\t\tif( config.help ) {\r\n\r\n\t\t\tcloseOverlay();\r\n\r\n\t\t\tdom.overlay = document.createElement( 'div' );\r\n\t\t\tdom.overlay.classList.add( 'overlay' );\r\n\t\t\tdom.overlay.classList.add( 'overlay-help' );\r\n\t\t\tdom.wrapper.appendChild( dom.overlay );\r\n\r\n\t\t\tvar html = '<p class=\"title\">Keyboard Shortcuts</p><br/>';\r\n\r\n\t\t\thtml += '<table><th>KEY</th><th>ACTION</th>';\r\n\t\t\tfor( var key in keyboardShortcuts ) {\r\n\t\t\t\thtml += '<tr><td>' + key + '</td><td>' + keyboardShortcuts[ key ] + '</td></tr>';\r\n\t\t\t}\r\n\r\n\t\t\t// Add custom key bindings that have associated descriptions\r\n\t\t\tfor( var binding in registeredKeyBindings ) {\r\n\t\t\t\tif( registeredKeyBindings[binding].key && registeredKeyBindings[binding].description ) {\r\n\t\t\t\t\thtml += '<tr><td>' + registeredKeyBindings[binding].key + '</td><td>' + registeredKeyBindings[binding].description + '</td></tr>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\thtml += '</table>';\r\n\r\n\t\t\tdom.overlay.innerHTML = [\r\n\t\t\t\t'<header>',\r\n\t\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\r\n\t\t\t\t'</header>',\r\n\t\t\t\t'<div class=\"viewport\">',\r\n\t\t\t\t\t'<div class=\"viewport-inner\">'+ html +'</div>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('');\r\n\r\n\t\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\r\n\t\t\t\tcloseOverlay();\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}, false );\r\n\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tdom.overlay.classList.add( 'visible' );\r\n\t\t\t}, 1 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Closes any currently open overlay.\r\n\t */\r\n\tfunction closeOverlay() {\r\n\r\n\t\tif( dom.overlay ) {\r\n\t\t\tdom.overlay.parentNode.removeChild( dom.overlay );\r\n\t\t\tdom.overlay = null;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies JavaScript-controlled layout rules to the\r\n\t * presentation.\r\n\t */\r\n\tfunction layout() {\r\n\r\n\t\tif( dom.wrapper && !isPrintingPDF() ) {\r\n\r\n\t\t\tif( !config.disableLayout ) {\r\n\r\n\t\t\t\t// On some mobile devices '100vh' is taller than the visible\r\n\t\t\t\t// viewport which leads to part of the presentation being\r\n\t\t\t\t// cut off. To work around this we define our own '--vh' custom\r\n\t\t\t\t// property where 100x adds up to the correct height.\r\n\t\t\t\t//\r\n\t\t\t\t// https://css-tricks.com/the-trick-to-viewport-units-on-mobile/\r\n\t\t\t\tif( isMobileDevice ) {\r\n\t\t\t\t\tdocument.documentElement.style.setProperty( '--vh', ( window.innerHeight * 0.01 ) + 'px' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar size = getComputedSlideSize();\r\n\r\n\t\t\t\tvar oldScale = scale;\r\n\r\n\t\t\t\t// Layout the contents of the slides\r\n\t\t\t\tlayoutSlideContents( config.width, config.height );\r\n\r\n\t\t\t\tdom.slides.style.width = size.width + 'px';\r\n\t\t\t\tdom.slides.style.height = size.height + 'px';\r\n\r\n\t\t\t\t// Determine scale of content to fit within available space\r\n\t\t\t\tscale = Math.min( size.presentationWidth / size.width, size.presentationHeight / size.height );\r\n\r\n\t\t\t\t// Respect max/min scale settings\r\n\t\t\t\tscale = Math.max( scale, config.minScale );\r\n\t\t\t\tscale = Math.min( scale, config.maxScale );\r\n\r\n\t\t\t\t// Don't apply any scaling styles if scale is 1\r\n\t\t\t\tif( scale === 1 ) {\r\n\t\t\t\t\tdom.slides.style.zoom = '';\r\n\t\t\t\t\tdom.slides.style.left = '';\r\n\t\t\t\t\tdom.slides.style.top = '';\r\n\t\t\t\t\tdom.slides.style.bottom = '';\r\n\t\t\t\t\tdom.slides.style.right = '';\r\n\t\t\t\t\ttransformSlides( { layout: '' } );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Zoom Scaling\r\n\t\t\t\t\t// Content remains crisp no matter how much we scale. Side\r\n\t\t\t\t\t// effects are minor differences in text layout and iframe\r\n\t\t\t\t\t// viewports changing size. A 200x200 iframe viewport in a\r\n\t\t\t\t\t// 2x zoomed presentation ends up having a 400x400 viewport.\r\n\t\t\t\t\tif( scale > 1 && features.zoom && window.devicePixelRatio < 2 ) {\r\n\t\t\t\t\t\tdom.slides.style.zoom = scale;\r\n\t\t\t\t\t\tdom.slides.style.left = '';\r\n\t\t\t\t\t\tdom.slides.style.top = '';\r\n\t\t\t\t\t\tdom.slides.style.bottom = '';\r\n\t\t\t\t\t\tdom.slides.style.right = '';\r\n\t\t\t\t\t\ttransformSlides( { layout: '' } );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Transform Scaling\r\n\t\t\t\t\t// Content layout remains the exact same when scaled up.\r\n\t\t\t\t\t// Side effect is content becoming blurred, especially with\r\n\t\t\t\t\t// high scale values on ldpi screens.\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tdom.slides.style.zoom = '';\r\n\t\t\t\t\t\tdom.slides.style.left = '50%';\r\n\t\t\t\t\t\tdom.slides.style.top = '50%';\r\n\t\t\t\t\t\tdom.slides.style.bottom = 'auto';\r\n\t\t\t\t\t\tdom.slides.style.right = 'auto';\r\n\t\t\t\t\t\ttransformSlides( { layout: 'translate(-50%, -50%) scale('+ scale +')' } );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Select all slides, vertical and horizontal\r\n\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) );\r\n\r\n\t\t\t\tfor( var i = 0, len = slides.length; i < len; i++ ) {\r\n\t\t\t\t\tvar slide = slides[ i ];\r\n\r\n\t\t\t\t\t// Don't bother updating invisible slides\r\n\t\t\t\t\tif( slide.style.display === 'none' ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( config.center || slide.classList.contains( 'center' ) ) {\r\n\t\t\t\t\t\t// Vertical stacks are not centred since their section\r\n\t\t\t\t\t\t// children will be\r\n\t\t\t\t\t\tif( slide.classList.contains( 'stack' ) ) {\r\n\t\t\t\t\t\t\tslide.style.top = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tslide.style.top = Math.max( ( size.height - slide.scrollHeight ) / 2, 0 ) + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tslide.style.top = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( oldScale !== scale ) {\r\n\t\t\t\t\tdispatchEvent( 'resize', {\r\n\t\t\t\t\t\t'oldScale': oldScale,\r\n\t\t\t\t\t\t'scale': scale,\r\n\t\t\t\t\t\t'size': size\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tupdateProgress();\r\n\t\t\tupdateParallax();\r\n\r\n\t\t\tif( isOverview() ) {\r\n\t\t\t\tupdateOverview();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies layout logic to the contents of all slides in\r\n\t * the presentation.\r\n\t *\r\n\t * @param {string|number} width\r\n\t * @param {string|number} height\r\n\t */\r\n\tfunction layoutSlideContents( width, height ) {\r\n\r\n\t\t// Handle sizing of elements with the 'stretch' class\r\n\t\ttoArray( dom.slides.querySelectorAll( 'section > .stretch' ) ).forEach( function( element ) {\r\n\r\n\t\t\t// Determine how much vertical space we can use\r\n\t\t\tvar remainingHeight = getRemainingHeight( element, height );\r\n\r\n\t\t\t// Consider the aspect ratio of media elements\r\n\t\t\tif( /(img|video)/gi.test( element.nodeName ) ) {\r\n\t\t\t\tvar nw = element.naturalWidth || element.videoWidth,\r\n\t\t\t\t\tnh = element.naturalHeight || element.videoHeight;\r\n\r\n\t\t\t\tvar es = Math.min( width / nw, remainingHeight / nh );\r\n\r\n\t\t\t\telement.style.width = ( nw * es ) + 'px';\r\n\t\t\t\telement.style.height = ( nh * es ) + 'px';\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\telement.style.width = width + 'px';\r\n\t\t\t\telement.style.height = remainingHeight + 'px';\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates the computed pixel size of our slides. These\r\n\t * values are based on the width and height configuration\r\n\t * options.\r\n\t *\r\n\t * @param {number} [presentationWidth=dom.wrapper.offsetWidth]\r\n\t * @param {number} [presentationHeight=dom.wrapper.offsetHeight]\r\n\t */\r\n\tfunction getComputedSlideSize( presentationWidth, presentationHeight ) {\r\n\r\n\t\tvar size = {\r\n\t\t\t// Slide size\r\n\t\t\twidth: config.width,\r\n\t\t\theight: config.height,\r\n\r\n\t\t\t// Presentation size\r\n\t\t\tpresentationWidth: presentationWidth || dom.wrapper.offsetWidth,\r\n\t\t\tpresentationHeight: presentationHeight || dom.wrapper.offsetHeight\r\n\t\t};\r\n\r\n\t\t// Reduce available space by margin\r\n\t\tsize.presentationWidth -= ( size.presentationWidth * config.margin );\r\n\t\tsize.presentationHeight -= ( size.presentationHeight * config.margin );\r\n\r\n\t\t// Slide width may be a percentage of available width\r\n\t\tif( typeof size.width === 'string' && /%$/.test( size.width ) ) {\r\n\t\t\tsize.width = parseInt( size.width, 10 ) / 100 * size.presentationWidth;\r\n\t\t}\r\n\r\n\t\t// Slide height may be a percentage of available height\r\n\t\tif( typeof size.height === 'string' && /%$/.test( size.height ) ) {\r\n\t\t\tsize.height = parseInt( size.height, 10 ) / 100 * size.presentationHeight;\r\n\t\t}\r\n\r\n\t\treturn size;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Stores the vertical index of a stack so that the same\r\n\t * vertical slide can be selected when navigating to and\r\n\t * from the stack.\r\n\t *\r\n\t * @param {HTMLElement} stack The vertical stack element\r\n\t * @param {string|number} [v=0] Index to memorize\r\n\t */\r\n\tfunction setPreviousVerticalIndex( stack, v ) {\r\n\r\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' ) {\r\n\t\t\tstack.setAttribute( 'data-previous-indexv', v || 0 );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves the vertical index which was stored using\r\n\t * #setPreviousVerticalIndex() or 0 if no previous index\r\n\t * exists.\r\n\t *\r\n\t * @param {HTMLElement} stack The vertical stack element\r\n\t */\r\n\tfunction getPreviousVerticalIndex( stack ) {\r\n\r\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' && stack.classList.contains( 'stack' ) ) {\r\n\t\t\t// Prefer manually defined start-indexv\r\n\t\t\tvar attributeName = stack.hasAttribute( 'data-start-indexv' ) ? 'data-start-indexv' : 'data-previous-indexv';\r\n\r\n\t\t\treturn parseInt( stack.getAttribute( attributeName ) || 0, 10 );\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Displays the overview of slides (quick nav) by scaling\r\n\t * down and arranging all slide elements.\r\n\t */\r\n\tfunction activateOverview() {\r\n\r\n\t\t// Only proceed if enabled in config\r\n\t\tif( config.overview && !isOverview() ) {\r\n\r\n\t\t\toverview = true;\r\n\r\n\t\t\tdom.wrapper.classList.add( 'overview' );\r\n\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\r\n\r\n\t\t\tif( features.overviewTransitions ) {\r\n\t\t\t\tsetTimeout( function() {\r\n\t\t\t\t\tdom.wrapper.classList.add( 'overview-animated' );\r\n\t\t\t\t}, 1 );\r\n\t\t\t}\r\n\r\n\t\t\t// Don't auto-slide while in overview mode\r\n\t\t\tcancelAutoSlide();\r\n\r\n\t\t\t// Move the backgrounds element into the slide container to\r\n\t\t\t// that the same scaling is applied\r\n\t\t\tdom.slides.appendChild( dom.background );\r\n\r\n\t\t\t// Clicking on an overview slide navigates to it\r\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\r\n\t\t\t\tif( !slide.classList.contains( 'stack' ) ) {\r\n\t\t\t\t\tslide.addEventListener( 'click', onOverviewSlideClicked, true );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Calculate slide sizes\r\n\t\t\tvar margin = 70;\r\n\t\t\tvar slideSize = getComputedSlideSize();\r\n\t\t\toverviewSlideWidth = slideSize.width + margin;\r\n\t\t\toverviewSlideHeight = slideSize.height + margin;\r\n\r\n\t\t\t// Reverse in RTL mode\r\n\t\t\tif( config.rtl ) {\r\n\t\t\t\toverviewSlideWidth = -overviewSlideWidth;\r\n\t\t\t}\r\n\r\n\t\t\tupdateSlidesVisibility();\r\n\t\t\tlayoutOverview();\r\n\t\t\tupdateOverview();\r\n\r\n\t\t\tlayout();\r\n\r\n\t\t\t// Notify observers of the overview showing\r\n\t\t\tdispatchEvent( 'overviewshown', {\r\n\t\t\t\t'indexh': indexh,\r\n\t\t\t\t'indexv': indexv,\r\n\t\t\t\t'currentSlide': currentSlide\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Uses CSS transforms to position all slides in a grid for\r\n\t * display inside of the overview mode.\r\n\t */\r\n\tfunction layoutOverview() {\r\n\r\n\t\t// Layout slides\r\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( hslide, h ) {\r\n\t\t\thslide.setAttribute( 'data-index-h', h );\r\n\t\t\ttransformElement( hslide, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\r\n\r\n\t\t\tif( hslide.classList.contains( 'stack' ) ) {\r\n\r\n\t\t\t\ttoArray( hslide.querySelectorAll( 'section' ) ).forEach( function( vslide, v ) {\r\n\t\t\t\t\tvslide.setAttribute( 'data-index-h', h );\r\n\t\t\t\t\tvslide.setAttribute( 'data-index-v', v );\r\n\r\n\t\t\t\t\ttransformElement( vslide, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Layout slide backgrounds\r\n\t\ttoArray( dom.background.childNodes ).forEach( function( hbackground, h ) {\r\n\t\t\ttransformElement( hbackground, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\r\n\r\n\t\t\ttoArray( hbackground.querySelectorAll( '.slide-background' ) ).forEach( function( vbackground, v ) {\r\n\t\t\t\ttransformElement( vbackground, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the overview viewport to the current slides.\r\n\t * Called each time the current slide changes.\r\n\t */\r\n\tfunction updateOverview() {\r\n\r\n\t\tvar vmin = Math.min( window.innerWidth, window.innerHeight );\r\n\t\tvar scale = Math.max( vmin / 5, 150 ) / vmin;\r\n\r\n\t\ttransformSlides( {\r\n\t\t\toverview: [\r\n\t\t\t\t'scale('+ scale +')',\r\n\t\t\t\t'translateX('+ ( -indexh * overviewSlideWidth ) +'px)',\r\n\t\t\t\t'translateY('+ ( -indexv * overviewSlideHeight ) +'px)'\r\n\t\t\t].join( ' ' )\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Exits the slide overview and enters the currently\r\n\t * active slide.\r\n\t */\r\n\tfunction deactivateOverview() {\r\n\r\n\t\t// Only proceed if enabled in config\r\n\t\tif( config.overview ) {\r\n\r\n\t\t\toverview = false;\r\n\r\n\t\t\tdom.wrapper.classList.remove( 'overview' );\r\n\t\t\tdom.wrapper.classList.remove( 'overview-animated' );\r\n\r\n\t\t\t// Temporarily add a class so that transitions can do different things\r\n\t\t\t// depending on whether they are exiting/entering overview, or just\r\n\t\t\t// moving from slide to slide\r\n\t\t\tdom.wrapper.classList.add( 'overview-deactivating' );\r\n\r\n\t\t\tsetTimeout( function () {\r\n\t\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\r\n\t\t\t}, 1 );\r\n\r\n\t\t\t// Move the background element back out\r\n\t\t\tdom.wrapper.appendChild( dom.background );\r\n\r\n\t\t\t// Clean up changes made to slides\r\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\r\n\t\t\t\ttransformElement( slide, '' );\r\n\r\n\t\t\t\tslide.removeEventListener( 'click', onOverviewSlideClicked, true );\r\n\t\t\t} );\r\n\r\n\t\t\t// Clean up changes made to backgrounds\r\n\t\t\ttoArray( dom.background.querySelectorAll( '.slide-background' ) ).forEach( function( background ) {\r\n\t\t\t\ttransformElement( background, '' );\r\n\t\t\t} );\r\n\r\n\t\t\ttransformSlides( { overview: '' } );\r\n\r\n\t\t\tslide( indexh, indexv );\r\n\r\n\t\t\tlayout();\r\n\r\n\t\t\tcueAutoSlide();\r\n\r\n\t\t\t// Notify observers of the overview hiding\r\n\t\t\tdispatchEvent( 'overviewhidden', {\r\n\t\t\t\t'indexh': indexh,\r\n\t\t\t\t'indexv': indexv,\r\n\t\t\t\t'currentSlide': currentSlide\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles the slide overview mode on and off.\r\n\t *\r\n\t * @param {Boolean} [override] Flag which overrides the\r\n\t * toggle logic and forcibly sets the desired state. True means\r\n\t * overview is open, false means it's closed.\r\n\t */\r\n\tfunction toggleOverview( override ) {\r\n\r\n\t\tif( typeof override === 'boolean' ) {\r\n\t\t\toverride ? activateOverview() : deactivateOverview();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tisOverview() ? deactivateOverview() : activateOverview();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the overview is currently active.\r\n\t *\r\n\t * @return {Boolean} true if the overview is active,\r\n\t * false otherwise\r\n\t */\r\n\tfunction isOverview() {\r\n\r\n\t\treturn overview;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Return a hash URL that will resolve to the given slide location.\r\n\t *\r\n\t * @param {HTMLElement} [slide=currentSlide] The slide to link to\r\n\t */\r\n\tfunction locationHash( slide ) {\r\n\r\n\t\tvar url = '/';\r\n\r\n\t\t// Attempt to create a named link based on the slide's ID\r\n\t\tvar s = slide || currentSlide;\r\n\t\tvar id = s ? s.getAttribute( 'id' ) : null;\r\n\t\tif( id ) {\r\n\t\t\tid = encodeURIComponent( id );\r\n\t\t}\r\n\r\n\t\tvar index = getIndices( slide );\r\n\t\tif( !config.fragmentInURL ) {\r\n\t\t\tindex.f = undefined;\r\n\t\t}\r\n\r\n\t\t// If the current slide has an ID, use that as a named link,\r\n\t\t// but we don't support named links with a fragment index\r\n\t\tif( typeof id === 'string' && id.length && index.f === undefined ) {\r\n\t\t\turl = '/' + id;\r\n\t\t}\r\n\t\t// Otherwise use the /h/v index\r\n\t\telse {\r\n\t\t\tvar hashIndexBase = config.hashOneBasedIndex ? 1 : 0;\r\n\t\t\tif( index.h > 0 || index.v > 0 || index.f !== undefined ) url += index.h + hashIndexBase;\r\n\t\t\tif( index.v > 0 || index.f !== undefined ) url += '/' + (index.v + hashIndexBase );\r\n\t\t\tif( index.f !== undefined ) url += '/' + index.f;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the current or specified slide is vertical\r\n\t * (nested within another slide).\r\n\t *\r\n\t * @param {HTMLElement} [slide=currentSlide] The slide to check\r\n\t * orientation of\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isVerticalSlide( slide ) {\r\n\r\n\t\t// Prefer slide argument, otherwise use current slide\r\n\t\tslide = slide ? slide : currentSlide;\r\n\r\n\t\treturn slide && slide.parentNode && !!slide.parentNode.nodeName.match( /section/i );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handling the fullscreen functionality via the fullscreen API\r\n\t *\r\n\t * @see http://fullscreen.spec.whatwg.org/\r\n\t * @see https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode\r\n\t */\r\n\tfunction enterFullscreen() {\r\n\r\n\t\tvar element = document.documentElement;\r\n\r\n\t\t// Check which implementation is available\r\n\t\tvar requestMethod = element.requestFullscreen ||\r\n\t\t\t\t\t\t\telement.webkitRequestFullscreen ||\r\n\t\t\t\t\t\t\telement.webkitRequestFullScreen ||\r\n\t\t\t\t\t\t\telement.mozRequestFullScreen ||\r\n\t\t\t\t\t\t\telement.msRequestFullscreen;\r\n\r\n\t\tif( requestMethod ) {\r\n\t\t\trequestMethod.apply( element );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Shows the mouse pointer after it has been hidden with\r\n\t * #hideCursor.\r\n\t */\r\n\tfunction showCursor() {\r\n\r\n\t\tif( cursorHidden ) {\r\n\t\t\tcursorHidden = false;\r\n\t\t\tdom.wrapper.style.cursor = '';\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Hides the mouse pointer when it's on top of the .reveal\r\n\t * container.\r\n\t */\r\n\tfunction hideCursor() {\r\n\r\n\t\tif( cursorHidden === false ) {\r\n\t\t\tcursorHidden = true;\r\n\t\t\tdom.wrapper.style.cursor = 'none';\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enters the paused mode which fades everything on screen to\r\n\t * black.\r\n\t */\r\n\tfunction pause() {\r\n\r\n\t\tif( config.pause ) {\r\n\t\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\r\n\r\n\t\t\tcancelAutoSlide();\r\n\t\t\tdom.wrapper.classList.add( 'paused' );\r\n\r\n\t\t\tif( wasPaused === false ) {\r\n\t\t\t\tdispatchEvent( 'paused' );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Exits from the paused mode.\r\n\t */\r\n\tfunction resume() {\r\n\r\n\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\r\n\t\tdom.wrapper.classList.remove( 'paused' );\r\n\r\n\t\tcueAutoSlide();\r\n\r\n\t\tif( wasPaused ) {\r\n\t\t\tdispatchEvent( 'resumed' );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles the paused mode on and off.\r\n\t */\r\n\tfunction togglePause( override ) {\r\n\r\n\t\tif( typeof override === 'boolean' ) {\r\n\t\t\toverride ? pause() : resume();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tisPaused() ? resume() : pause();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if we are currently in the paused mode.\r\n\t *\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isPaused() {\r\n\r\n\t\treturn dom.wrapper.classList.contains( 'paused' );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles the auto slide mode on and off.\r\n\t *\r\n\t * @param {Boolean} [override] Flag which sets the desired state.\r\n\t * True means autoplay starts, false means it stops.\r\n\t */\r\n\r\n\tfunction toggleAutoSlide( override ) {\r\n\r\n\t\tif( typeof override === 'boolean' ) {\r\n\t\t\toverride ? resumeAutoSlide() : pauseAutoSlide();\r\n\t\t}\r\n\r\n\t\telse {\r\n\t\t\tautoSlidePaused ? resumeAutoSlide() : pauseAutoSlide();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the auto slide mode is currently on.\r\n\t *\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isAutoSliding() {\r\n\r\n\t\treturn !!( autoSlide && !autoSlidePaused );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Steps from the current point in the presentation to the\r\n\t * slide which matches the specified horizontal and vertical\r\n\t * indices.\r\n\t *\r\n\t * @param {number} [h=indexh] Horizontal index of the target slide\r\n\t * @param {number} [v=indexv] Vertical index of the target slide\r\n\t * @param {number} [f] Index of a fragment within the\r\n\t * target slide to activate\r\n\t * @param {number} [o] Origin for use in multimaster environments\r\n\t */\r\n\tfunction slide( h, v, f, o ) {\r\n\r\n\t\t// Remember where we were at before\r\n\t\tpreviousSlide = currentSlide;\r\n\r\n\t\t// Query all horizontal slides in the deck\r\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR );\r\n\r\n\t\t// Abort if there are no slides\r\n\t\tif( horizontalSlides.length === 0 ) return;\r\n\r\n\t\t// If no vertical index is specified and the upcoming slide is a\r\n\t\t// stack, resume at its previous vertical index\r\n\t\tif( v === undefined && !isOverview() ) {\r\n\t\t\tv = getPreviousVerticalIndex( horizontalSlides[ h ] );\r\n\t\t}\r\n\r\n\t\t// If we were on a vertical stack, remember what vertical index\r\n\t\t// it was on so we can resume at the same position when returning\r\n\t\tif( previousSlide && previousSlide.parentNode && previousSlide.parentNode.classList.contains( 'stack' ) ) {\r\n\t\t\tsetPreviousVerticalIndex( previousSlide.parentNode, indexv );\r\n\t\t}\r\n\r\n\t\t// Remember the state before this slide\r\n\t\tvar stateBefore = state.concat();\r\n\r\n\t\t// Reset the state array\r\n\t\tstate.length = 0;\r\n\r\n\t\tvar indexhBefore = indexh || 0,\r\n\t\t\tindexvBefore = indexv || 0;\r\n\r\n\t\t// Activate and transition to the new slide\r\n\t\tindexh = updateSlides( HORIZONTAL_SLIDES_SELECTOR, h === undefined ? indexh : h );\r\n\t\tindexv = updateSlides( VERTICAL_SLIDES_SELECTOR, v === undefined ? indexv : v );\r\n\r\n\t\t// Update the visibility of slides now that the indices have changed\r\n\t\tupdateSlidesVisibility();\r\n\r\n\t\tlayout();\r\n\r\n\t\t// Update the overview if it's currently active\r\n\t\tif( isOverview() ) {\r\n\t\t\tupdateOverview();\r\n\t\t}\r\n\r\n\t\t// Find the current horizontal slide and any possible vertical slides\r\n\t\t// within it\r\n\t\tvar currentHorizontalSlide = horizontalSlides[ indexh ],\r\n\t\t\tcurrentVerticalSlides = currentHorizontalSlide.querySelectorAll( 'section' );\r\n\r\n\t\t// Store references to the previous and current slides\r\n\t\tcurrentSlide = currentVerticalSlides[ indexv ] || currentHorizontalSlide;\r\n\r\n\t\t// Show fragment, if specified\r\n\t\tif( typeof f !== 'undefined' ) {\r\n\t\t\tnavigateFragment( f );\r\n\t\t}\r\n\r\n\t\t// Dispatch an event if the slide changed\r\n\t\tvar slideChanged = ( indexh !== indexhBefore || indexv !== indexvBefore );\r\n\t\tif (!slideChanged) {\r\n\t\t\t// Ensure that the previous slide is never the same as the current\r\n\t\t\tpreviousSlide = null;\r\n\t\t}\r\n\r\n\t\t// Solves an edge case where the previous slide maintains the\r\n\t\t// 'present' class when navigating between adjacent vertical\r\n\t\t// stacks\r\n\t\tif( previousSlide && previousSlide !== currentSlide ) {\r\n\t\t\tpreviousSlide.classList.remove( 'present' );\r\n\t\t\tpreviousSlide.setAttribute( 'aria-hidden', 'true' );\r\n\r\n\t\t\t// Reset all slides upon navigate to home\r\n\t\t\t// Issue: #285\r\n\t\t\tif ( dom.wrapper.querySelector( HOME_SLIDE_SELECTOR ).classList.contains( 'present' ) ) {\r\n\t\t\t\t// Launch async task\r\n\t\t\t\tsetTimeout( function () {\r\n\t\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.stack') ), i;\r\n\t\t\t\t\tfor( i in slides ) {\r\n\t\t\t\t\t\tif( slides[i] ) {\r\n\t\t\t\t\t\t\t// Reset stack\r\n\t\t\t\t\t\t\tsetPreviousVerticalIndex( slides[i], 0 );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 0 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Apply the new state\r\n\t\tstateLoop: for( var i = 0, len = state.length; i < len; i++ ) {\r\n\t\t\t// Check if this state existed on the previous slide. If it\r\n\t\t\t// did, we will avoid adding it repeatedly\r\n\t\t\tfor( var j = 0; j < stateBefore.length; j++ ) {\r\n\t\t\t\tif( stateBefore[j] === state[i] ) {\r\n\t\t\t\t\tstateBefore.splice( j, 1 );\r\n\t\t\t\t\tcontinue stateLoop;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdocument.documentElement.classList.add( state[i] );\r\n\r\n\t\t\t// Dispatch custom event matching the state's name\r\n\t\t\tdispatchEvent( state[i] );\r\n\t\t}\r\n\r\n\t\t// Clean up the remains of the previous state\r\n\t\twhile( stateBefore.length ) {\r\n\t\t\tdocument.documentElement.classList.remove( stateBefore.pop() );\r\n\t\t}\r\n\r\n\t\tif( slideChanged ) {\r\n\t\t\tdispatchEvent( 'slidechanged', {\r\n\t\t\t\t'indexh': indexh,\r\n\t\t\t\t'indexv': indexv,\r\n\t\t\t\t'previousSlide': previousSlide,\r\n\t\t\t\t'currentSlide': currentSlide,\r\n\t\t\t\t'origin': o\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// Handle embedded content\r\n\t\tif( slideChanged || !previousSlide ) {\r\n\t\t\tstopEmbeddedContent( previousSlide );\r\n\t\t\tstartEmbeddedContent( currentSlide );\r\n\t\t}\r\n\r\n\t\t// Announce the current slide contents, for screen readers\r\n\t\tdom.statusDiv.textContent = getStatusText( currentSlide );\r\n\r\n\t\tupdateControls();\r\n\t\tupdateProgress();\r\n\t\tupdateBackground();\r\n\t\tupdateParallax();\r\n\t\tupdateSlideNumber();\r\n\t\tupdateNotes();\r\n\t\tupdateFragments();\r\n\r\n\t\t// Update the URL hash\r\n\t\twriteURL();\r\n\r\n\t\tcueAutoSlide();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Syncs the presentation with the current DOM. Useful\r\n\t * when new slides or control elements are added or when\r\n\t * the configuration has changed.\r\n\t */\r\n\tfunction sync() {\r\n\r\n\t\t// Subscribe to input\r\n\t\tremoveEventListeners();\r\n\t\taddEventListeners();\r\n\r\n\t\t// Force a layout to make sure the current config is accounted for\r\n\t\tlayout();\r\n\r\n\t\t// Reflect the current autoSlide value\r\n\t\tautoSlide = config.autoSlide;\r\n\r\n\t\t// Start auto-sliding if it's enabled\r\n\t\tcueAutoSlide();\r\n\r\n\t\t// Re-create the slide backgrounds\r\n\t\tcreateBackgrounds();\r\n\r\n\t\t// Write the current hash to the URL\r\n\t\twriteURL();\r\n\r\n\t\tsortAllFragments();\r\n\r\n\t\tupdateControls();\r\n\t\tupdateProgress();\r\n\t\tupdateSlideNumber();\r\n\t\tupdateSlidesVisibility();\r\n\t\tupdateBackground( true );\r\n\t\tupdateNotesVisibility();\r\n\t\tupdateNotes();\r\n\r\n\t\tformatEmbeddedContent();\r\n\r\n\t\t// Start or stop embedded content depending on global config\r\n\t\tif( config.autoPlayMedia === false ) {\r\n\t\t\tstopEmbeddedContent( currentSlide, { unloadIframes: false } );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tstartEmbeddedContent( currentSlide );\r\n\t\t}\r\n\r\n\t\tif( isOverview() ) {\r\n\t\t\tlayoutOverview();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates reveal.js to keep in sync with new slide attributes. For\r\n\t * example, if you add a new `data-background-image` you can call\r\n\t * this to have reveal.js render the new background image.\r\n\t *\r\n\t * Similar to #sync() but more efficient when you only need to\r\n\t * refresh a specific slide.\r\n\t *\r\n\t * @param {HTMLElement} slide\r\n\t */\r\n\tfunction syncSlide( slide ) {\r\n\r\n\t\t// Default to the current slide\r\n\t\tslide = slide || currentSlide;\r\n\r\n\t\tsyncBackground( slide );\r\n\t\tsyncFragments( slide );\r\n\r\n\t\tloadSlide( slide );\r\n\r\n\t\tupdateBackground();\r\n\t\tupdateNotes();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the fragments on the given slide so that they have\r\n\t * valid indices. Call this if fragments are changed in the DOM\r\n\t * after reveal.js has already initialized.\r\n\t *\r\n\t * @param {HTMLElement} slide\r\n\t * @return {Array} a list of the HTML fragments that were synced\r\n\t */\r\n\tfunction syncFragments( slide ) {\r\n\r\n\t\t// Default to the current slide\r\n\t\tslide = slide || currentSlide;\r\n\r\n\t\treturn sortFragments( slide.querySelectorAll( '.fragment' ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Resets all vertical slides so that only the first\r\n\t * is visible.\r\n\t */\r\n\tfunction resetVerticalSlides() {\r\n\r\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\r\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\r\n\r\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\r\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\r\n\r\n\t\t\t\tif( y > 0 ) {\r\n\t\t\t\t\tverticalSlide.classList.remove( 'present' );\r\n\t\t\t\t\tverticalSlide.classList.remove( 'past' );\r\n\t\t\t\t\tverticalSlide.classList.add( 'future' );\r\n\t\t\t\t\tverticalSlide.setAttribute( 'aria-hidden', 'true' );\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sorts and formats all of fragments in the\r\n\t * presentation.\r\n\t */\r\n\tfunction sortAllFragments() {\r\n\r\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\r\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\r\n\r\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\r\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\r\n\r\n\t\t\t\tsortFragments( verticalSlide.querySelectorAll( '.fragment' ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif( verticalSlides.length === 0 ) sortFragments( horizontalSlide.querySelectorAll( '.fragment' ) );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Randomly shuffles all slides in the deck.\r\n\t */\r\n\tfunction shuffle() {\r\n\r\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\r\n\r\n\t\tslides.forEach( function( slide ) {\r\n\r\n\t\t\t// Insert this slide next to another random slide. This may\r\n\t\t\t// cause the slide to insert before itself but that's fine.\r\n\t\t\tdom.slides.insertBefore( slide, slides[ Math.floor( Math.random() * slides.length ) ] );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates one dimension of slides by showing the slide\r\n\t * with the specified index.\r\n\t *\r\n\t * @param {string} selector A CSS selector that will fetch\r\n\t * the group of slides we are working with\r\n\t * @param {number} index The index of the slide that should be\r\n\t * shown\r\n\t *\r\n\t * @return {number} The index of the slide that is now shown,\r\n\t * might differ from the passed in index if it was out of\r\n\t * bounds.\r\n\t */\r\n\tfunction updateSlides( selector, index ) {\r\n\r\n\t\t// Select all slides and convert the NodeList result to\r\n\t\t// an array\r\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( selector ) ),\r\n\t\t\tslidesLength = slides.length;\r\n\r\n\t\tvar printMode = isPrintingPDF();\r\n\r\n\t\tif( slidesLength ) {\r\n\r\n\t\t\t// Should the index loop?\r\n\t\t\tif( config.loop ) {\r\n\t\t\t\tindex %= slidesLength;\r\n\r\n\t\t\t\tif( index < 0 ) {\r\n\t\t\t\t\tindex = slidesLength + index;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Enforce max and minimum index bounds\r\n\t\t\tindex = Math.max( Math.min( index, slidesLength - 1 ), 0 );\r\n\r\n\t\t\tfor( var i = 0; i < slidesLength; i++ ) {\r\n\t\t\t\tvar element = slides[i];\r\n\r\n\t\t\t\tvar reverse = config.rtl && !isVerticalSlide( element );\r\n\r\n\t\t\t\telement.classList.remove( 'past' );\r\n\t\t\t\telement.classList.remove( 'present' );\r\n\t\t\t\telement.classList.remove( 'future' );\r\n\r\n\t\t\t\t// http://www.w3.org/html/wg/drafts/html/master/editing.html#the-hidden-attribute\r\n\t\t\t\telement.setAttribute( 'hidden', '' );\r\n\t\t\t\telement.setAttribute( 'aria-hidden', 'true' );\r\n\r\n\t\t\t\t// If this element contains vertical slides\r\n\t\t\t\tif( element.querySelector( 'section' ) ) {\r\n\t\t\t\t\telement.classList.add( 'stack' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If we're printing static slides, all slides are \"present\"\r\n\t\t\t\tif( printMode ) {\r\n\t\t\t\t\telement.classList.add( 'present' );\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( i < index ) {\r\n\t\t\t\t\t// Any element previous to index is given the 'past' class\r\n\t\t\t\t\telement.classList.add( reverse ? 'future' : 'past' );\r\n\r\n\t\t\t\t\tif( config.fragments ) {\r\n\t\t\t\t\t\t// Show all fragments in prior slides\r\n\t\t\t\t\t\ttoArray( element.querySelectorAll( '.fragment' ) ).forEach( function( fragment ) {\r\n\t\t\t\t\t\t\tfragment.classList.add( 'visible' );\r\n\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if( i > index ) {\r\n\t\t\t\t\t// Any element subsequent to index is given the 'future' class\r\n\t\t\t\t\telement.classList.add( reverse ? 'past' : 'future' );\r\n\r\n\t\t\t\t\tif( config.fragments ) {\r\n\t\t\t\t\t\t// Hide all fragments in future slides\r\n\t\t\t\t\t\ttoArray( element.querySelectorAll( '.fragment.visible' ) ).forEach( function( fragment ) {\r\n\t\t\t\t\t\t\tfragment.classList.remove( 'visible' );\r\n\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Mark the current slide as present\r\n\t\t\tslides[index].classList.add( 'present' );\r\n\t\t\tslides[index].removeAttribute( 'hidden' );\r\n\t\t\tslides[index].removeAttribute( 'aria-hidden' );\r\n\r\n\t\t\t// If this slide has a state associated with it, add it\r\n\t\t\t// onto the current state of the deck\r\n\t\t\tvar slideState = slides[index].getAttribute( 'data-state' );\r\n\t\t\tif( slideState ) {\r\n\t\t\t\tstate = state.concat( slideState.split( ' ' ) );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Since there are no slides we can't be anywhere beyond the\r\n\t\t\t// zeroth index\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Optimization method; hide all slides that are far away\r\n\t * from the present slide.\r\n\t */\r\n\tfunction updateSlidesVisibility() {\r\n\r\n\t\t// Select all slides and convert the NodeList result to\r\n\t\t// an array\r\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ),\r\n\t\t\thorizontalSlidesLength = horizontalSlides.length,\r\n\t\t\tdistanceX,\r\n\t\t\tdistanceY;\r\n\r\n\t\tif( horizontalSlidesLength && typeof indexh !== 'undefined' ) {\r\n\r\n\t\t\t// The number of steps away from the present slide that will\r\n\t\t\t// be visible\r\n\t\t\tvar viewDistance = isOverview() ? 10 : config.viewDistance;\r\n\r\n\t\t\t// Shorten the view distance on devices that typically have\r\n\t\t\t// less resources\r\n\t\t\tif( isMobileDevice ) {\r\n\t\t\t\tviewDistance = isOverview() ? 6 : config.mobileViewDistance;\r\n\t\t\t}\r\n\r\n\t\t\t// All slides need to be visible when exporting to PDF\r\n\t\t\tif( isPrintingPDF() ) {\r\n\t\t\t\tviewDistance = Number.MAX_VALUE;\r\n\t\t\t}\r\n\r\n\t\t\tfor( var x = 0; x < horizontalSlidesLength; x++ ) {\r\n\t\t\t\tvar horizontalSlide = horizontalSlides[x];\r\n\r\n\t\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) ),\r\n\t\t\t\t\tverticalSlidesLength = verticalSlides.length;\r\n\r\n\t\t\t\t// Determine how far away this slide is from the present\r\n\t\t\t\tdistanceX = Math.abs( ( indexh || 0 ) - x ) || 0;\r\n\r\n\t\t\t\t// If the presentation is looped, distance should measure\r\n\t\t\t\t// 1 between the first and last slides\r\n\t\t\t\tif( config.loop ) {\r\n\t\t\t\t\tdistanceX = Math.abs( ( ( indexh || 0 ) - x ) % ( horizontalSlidesLength - viewDistance ) ) || 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Show the horizontal slide if it's within the view distance\r\n\t\t\t\tif( distanceX < viewDistance ) {\r\n\t\t\t\t\tloadSlide( horizontalSlide );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tunloadSlide( horizontalSlide );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( verticalSlidesLength ) {\r\n\r\n\t\t\t\t\tvar oy = getPreviousVerticalIndex( horizontalSlide );\r\n\r\n\t\t\t\t\tfor( var y = 0; y < verticalSlidesLength; y++ ) {\r\n\t\t\t\t\t\tvar verticalSlide = verticalSlides[y];\r\n\r\n\t\t\t\t\t\tdistanceY = x === ( indexh || 0 ) ? Math.abs( ( indexv || 0 ) - y ) : Math.abs( y - oy );\r\n\r\n\t\t\t\t\t\tif( distanceX + distanceY < viewDistance ) {\r\n\t\t\t\t\t\t\tloadSlide( verticalSlide );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tunloadSlide( verticalSlide );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Flag if there are ANY vertical slides, anywhere in the deck\r\n\t\t\tif( hasVerticalSlides() ) {\r\n\t\t\t\tdom.wrapper.classList.add( 'has-vertical-slides' );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdom.wrapper.classList.remove( 'has-vertical-slides' );\r\n\t\t\t}\r\n\r\n\t\t\t// Flag if there are ANY horizontal slides, anywhere in the deck\r\n\t\t\tif( hasHorizontalSlides() ) {\r\n\t\t\t\tdom.wrapper.classList.add( 'has-horizontal-slides' );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdom.wrapper.classList.remove( 'has-horizontal-slides' );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Pick up notes from the current slide and display them\r\n\t * to the viewer.\r\n\t *\r\n\t * @see {@link config.showNotes}\r\n\t */\r\n\tfunction updateNotes() {\r\n\r\n\t\tif( config.showNotes && dom.speakerNotes && currentSlide && !isPrintingPDF() ) {\r\n\r\n\t\t\tdom.speakerNotes.innerHTML = getSlideNotes() || '<span class=\"notes-placeholder\">No notes on this slide.</span>';\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the visibility of the speaker notes sidebar that\r\n\t * is used to share annotated slides. The notes sidebar is\r\n\t * only visible if showNotes is true and there are notes on\r\n\t * one or more slides in the deck.\r\n\t */\r\n\tfunction updateNotesVisibility() {\r\n\r\n\t\tif( config.showNotes && hasNotes() ) {\r\n\t\t\tdom.wrapper.classList.add( 'show-notes' );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.wrapper.classList.remove( 'show-notes' );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if there are speaker notes for ANY slide in the\r\n\t * presentation.\r\n\t */\r\n\tfunction hasNotes() {\r\n\r\n\t\treturn dom.slides.querySelectorAll( '[data-notes], aside.notes' ).length > 0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the progress bar to reflect the current slide.\r\n\t */\r\n\tfunction updateProgress() {\r\n\r\n\t\t// Update progress if enabled\r\n\t\tif( config.progress && dom.progressbar ) {\r\n\r\n\t\t\tdom.progressbar.style.width = getProgress() * dom.wrapper.offsetWidth + 'px';\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Updates the slide number to match the current slide.\r\n\t */\r\n\tfunction updateSlideNumber() {\r\n\r\n\t\t// Update slide number if enabled\r\n\t\tif( config.slideNumber && dom.slideNumber ) {\r\n\t\t\tdom.slideNumber.innerHTML = getSlideNumber();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the HTML string corresponding to the current slide number,\r\n\t * including formatting.\r\n\t */\r\n\tfunction getSlideNumber( slide ) {\r\n\r\n\t\tvar value;\r\n\t\tvar format = 'h.v';\r\n\t\tif( slide === undefined ) {\r\n\t\t\tslide = currentSlide;\r\n\t\t}\r\n\r\n\t\tif ( typeof config.slideNumber === 'function' ) {\r\n\t\t\tvalue = config.slideNumber( slide );\r\n\t\t} else {\r\n\t\t\t// Check if a custom number format is available\r\n\t\t\tif( typeof config.slideNumber === 'string' ) {\r\n\t\t\t\tformat = config.slideNumber;\r\n\t\t\t}\r\n\r\n\t\t\t// If there are ONLY vertical slides in this deck, always use\r\n\t\t\t// a flattened slide number\r\n\t\t\tif( !/c/.test( format ) && dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ).length === 1 ) {\r\n\t\t\t\tformat = 'c';\r\n\t\t\t}\r\n\r\n\t\t\tvalue = [];\r\n\t\t\tswitch( format ) {\r\n\t\t\t\tcase 'c':\r\n\t\t\t\t\tvalue.push( getSlidePastCount( slide ) + 1 );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'c/t':\r\n\t\t\t\t\tvalue.push( getSlidePastCount( slide ) + 1, '/', getTotalSlides() );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvar indices = getIndices( slide );\r\n\t\t\t\t\tvalue.push( indices.h + 1 );\r\n\t\t\t\t\tvar sep = format === 'h/v' ? '/' : '.';\r\n\t\t\t\t\tif( isVerticalSlide( slide ) ) value.push( sep, indices.v + 1 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar url = '#' + locationHash( slide );\r\n\t\treturn formatSlideNumber( value[0], value[1], value[2], url );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies HTML formatting to a slide number before it's\r\n\t * written to the DOM.\r\n\t *\r\n\t * @param {number} a Current slide\r\n\t * @param {string} delimiter Character to separate slide numbers\r\n\t * @param {(number|*)} b Total slides\r\n\t * @param {HTMLElement} [url='#'+locationHash()] The url to link to\r\n\t * @return {string} HTML string fragment\r\n\t */\r\n\tfunction formatSlideNumber( a, delimiter, b, url ) {\r\n\r\n\t\tif( url === undefined ) {\r\n\t\t\turl = '#' + locationHash();\r\n\t\t}\r\n\t\tif( typeof b === 'number' && !isNaN( b ) ) {\r\n\t\t\treturn  '<a href=\"' + url + '\">' +\r\n\t\t\t\t\t'<span class=\"slide-number-a\">'+ a +'</span>' +\r\n\t\t\t\t\t'<span class=\"slide-number-delimiter\">'+ delimiter +'</span>' +\r\n\t\t\t\t\t'<span class=\"slide-number-b\">'+ b +'</span>' +\r\n\t\t\t\t\t'</a>';\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn '<a href=\"' + url + '\">' +\r\n\t\t\t       '<span class=\"slide-number-a\">'+ a +'</span>' +\r\n\t\t\t       '</a>';\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the state of all control/navigation arrows.\r\n\t */\r\n\tfunction updateControls() {\r\n\r\n\t\tvar routes = availableRoutes();\r\n\t\tvar fragments = availableFragments();\r\n\r\n\t\t// Remove the 'enabled' class from all directions\r\n\t\tdom.controlsLeft.concat( dom.controlsRight )\r\n\t\t\t\t\t\t.concat( dom.controlsUp )\r\n\t\t\t\t\t\t.concat( dom.controlsDown )\r\n\t\t\t\t\t\t.concat( dom.controlsPrev )\r\n\t\t\t\t\t\t.concat( dom.controlsNext ).forEach( function( node ) {\r\n\t\t\tnode.classList.remove( 'enabled' );\r\n\t\t\tnode.classList.remove( 'fragmented' );\r\n\r\n\t\t\t// Set 'disabled' attribute on all directions\r\n\t\t\tnode.setAttribute( 'disabled', 'disabled' );\r\n\t\t} );\r\n\r\n\t\t// Add the 'enabled' class to the available routes; remove 'disabled' attribute to enable buttons\r\n\t\tif( routes.left ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\tif( routes.right ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\tif( routes.up ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\tif( routes.down ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\r\n\t\t// Prev/next buttons\r\n\t\tif( routes.left || routes.up ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\tif( routes.right || routes.down ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\r\n\t\t// Highlight fragment directions\r\n\t\tif( currentSlide ) {\r\n\r\n\t\t\t// Always apply fragment decorator to prev/next buttons\r\n\t\t\tif( fragments.prev ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\t\tif( fragments.next ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\r\n\t\t\t// Apply fragment decorators to directional buttons based on\r\n\t\t\t// what slide axis they are in\r\n\t\t\tif( isVerticalSlide( currentSlide ) ) {\r\n\t\t\t\tif( fragments.prev ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\t\t\tif( fragments.next ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif( fragments.prev ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\t\t\tif( fragments.next ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif( config.controlsTutorial ) {\r\n\r\n\t\t\t// Highlight control arrows with an animation to ensure\r\n\t\t\t// that the viewer knows how to navigate\r\n\t\t\tif( !hasNavigatedDown && routes.down ) {\r\n\t\t\t\tdom.controlsDownArrow.classList.add( 'highlight' );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdom.controlsDownArrow.classList.remove( 'highlight' );\r\n\r\n\t\t\t\tif( !hasNavigatedRight && routes.right && indexv === 0 ) {\r\n\t\t\t\t\tdom.controlsRightArrow.classList.add( 'highlight' );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tdom.controlsRightArrow.classList.remove( 'highlight' );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the background elements to reflect the current\r\n\t * slide.\r\n\t *\r\n\t * @param {boolean} includeAll If true, the backgrounds of\r\n\t * all vertical slides (not just the present) will be updated.\r\n\t */\r\n\tfunction updateBackground( includeAll ) {\r\n\r\n\t\tvar currentBackground = null;\r\n\r\n\t\t// Reverse past/future classes when in RTL mode\r\n\t\tvar horizontalPast = config.rtl ? 'future' : 'past',\r\n\t\t\thorizontalFuture = config.rtl ? 'past' : 'future';\r\n\r\n\t\t// Update the classes of all backgrounds to match the\r\n\t\t// states of their slides (past/present/future)\r\n\t\ttoArray( dom.background.childNodes ).forEach( function( backgroundh, h ) {\r\n\r\n\t\t\tbackgroundh.classList.remove( 'past' );\r\n\t\t\tbackgroundh.classList.remove( 'present' );\r\n\t\t\tbackgroundh.classList.remove( 'future' );\r\n\r\n\t\t\tif( h < indexh ) {\r\n\t\t\t\tbackgroundh.classList.add( horizontalPast );\r\n\t\t\t}\r\n\t\t\telse if ( h > indexh ) {\r\n\t\t\t\tbackgroundh.classList.add( horizontalFuture );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbackgroundh.classList.add( 'present' );\r\n\r\n\t\t\t\t// Store a reference to the current background element\r\n\t\t\t\tcurrentBackground = backgroundh;\r\n\t\t\t}\r\n\r\n\t\t\tif( includeAll || h === indexh ) {\r\n\t\t\t\ttoArray( backgroundh.querySelectorAll( '.slide-background' ) ).forEach( function( backgroundv, v ) {\r\n\r\n\t\t\t\t\tbackgroundv.classList.remove( 'past' );\r\n\t\t\t\t\tbackgroundv.classList.remove( 'present' );\r\n\t\t\t\t\tbackgroundv.classList.remove( 'future' );\r\n\r\n\t\t\t\t\tif( v < indexv ) {\r\n\t\t\t\t\t\tbackgroundv.classList.add( 'past' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ( v > indexv ) {\r\n\t\t\t\t\t\tbackgroundv.classList.add( 'future' );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tbackgroundv.classList.add( 'present' );\r\n\r\n\t\t\t\t\t\t// Only if this is the present horizontal and vertical slide\r\n\t\t\t\t\t\tif( h === indexh ) currentBackground = backgroundv;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\t// Stop content inside of previous backgrounds\r\n\t\tif( previousBackground ) {\r\n\r\n\t\t\tstopEmbeddedContent( previousBackground, { unloadIframes: !shouldPreload( previousBackground ) } );\r\n\r\n\t\t}\r\n\r\n\t\t// Start content in the current background\r\n\t\tif( currentBackground ) {\r\n\r\n\t\t\tstartEmbeddedContent( currentBackground );\r\n\r\n\t\t\tvar currentBackgroundContent = currentBackground.querySelector( '.slide-background-content' );\r\n\t\t\tif( currentBackgroundContent ) {\r\n\r\n\t\t\t\tvar backgroundImageURL = currentBackgroundContent.style.backgroundImage || '';\r\n\r\n\t\t\t\t// Restart GIFs (doesn't work in Firefox)\r\n\t\t\t\tif( /\\.gif/i.test( backgroundImageURL ) ) {\r\n\t\t\t\t\tcurrentBackgroundContent.style.backgroundImage = '';\r\n\t\t\t\t\twindow.getComputedStyle( currentBackgroundContent ).opacity;\r\n\t\t\t\t\tcurrentBackgroundContent.style.backgroundImage = backgroundImageURL;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Don't transition between identical backgrounds. This\r\n\t\t\t// prevents unwanted flicker.\r\n\t\t\tvar previousBackgroundHash = previousBackground ? previousBackground.getAttribute( 'data-background-hash' ) : null;\r\n\t\t\tvar currentBackgroundHash = currentBackground.getAttribute( 'data-background-hash' );\r\n\t\t\tif( currentBackgroundHash && currentBackgroundHash === previousBackgroundHash && currentBackground !== previousBackground ) {\r\n\t\t\t\tdom.background.classList.add( 'no-transition' );\r\n\t\t\t}\r\n\r\n\t\t\tpreviousBackground = currentBackground;\r\n\r\n\t\t}\r\n\r\n\t\t// If there's a background brightness flag for this slide,\r\n\t\t// bubble it to the .reveal container\r\n\t\tif( currentSlide ) {\r\n\t\t\t[ 'has-light-background', 'has-dark-background' ].forEach( function( classToBubble ) {\r\n\t\t\t\tif( currentSlide.classList.contains( classToBubble ) ) {\r\n\t\t\t\t\tdom.wrapper.classList.add( classToBubble );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tdom.wrapper.classList.remove( classToBubble );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// Allow the first background to apply without transition\r\n\t\tsetTimeout( function() {\r\n\t\t\tdom.background.classList.remove( 'no-transition' );\r\n\t\t}, 1 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the position of the parallax background based\r\n\t * on the current slide index.\r\n\t */\r\n\tfunction updateParallax() {\r\n\r\n\t\tif( config.parallaxBackgroundImage ) {\r\n\r\n\t\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\r\n\t\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\r\n\r\n\t\t\tvar backgroundSize = dom.background.style.backgroundSize.split( ' ' ),\r\n\t\t\t\tbackgroundWidth, backgroundHeight;\r\n\r\n\t\t\tif( backgroundSize.length === 1 ) {\r\n\t\t\t\tbackgroundWidth = backgroundHeight = parseInt( backgroundSize[0], 10 );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbackgroundWidth = parseInt( backgroundSize[0], 10 );\r\n\t\t\t\tbackgroundHeight = parseInt( backgroundSize[1], 10 );\r\n\t\t\t}\r\n\r\n\t\t\tvar slideWidth = dom.background.offsetWidth,\r\n\t\t\t\thorizontalSlideCount = horizontalSlides.length,\r\n\t\t\t\thorizontalOffsetMultiplier,\r\n\t\t\t\thorizontalOffset;\r\n\r\n\t\t\tif( typeof config.parallaxBackgroundHorizontal === 'number' ) {\r\n\t\t\t\thorizontalOffsetMultiplier = config.parallaxBackgroundHorizontal;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\thorizontalOffsetMultiplier = horizontalSlideCount > 1 ? ( backgroundWidth - slideWidth ) / ( horizontalSlideCount-1 ) : 0;\r\n\t\t\t}\r\n\r\n\t\t\thorizontalOffset = horizontalOffsetMultiplier * indexh * -1;\r\n\r\n\t\t\tvar slideHeight = dom.background.offsetHeight,\r\n\t\t\t\tverticalSlideCount = verticalSlides.length,\r\n\t\t\t\tverticalOffsetMultiplier,\r\n\t\t\t\tverticalOffset;\r\n\r\n\t\t\tif( typeof config.parallaxBackgroundVertical === 'number' ) {\r\n\t\t\t\tverticalOffsetMultiplier = config.parallaxBackgroundVertical;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tverticalOffsetMultiplier = ( backgroundHeight - slideHeight ) / ( verticalSlideCount-1 );\r\n\t\t\t}\r\n\r\n\t\t\tverticalOffset = verticalSlideCount > 0 ?  verticalOffsetMultiplier * indexv : 0;\r\n\r\n\t\t\tdom.background.style.backgroundPosition = horizontalOffset + 'px ' + -verticalOffset + 'px';\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Should the given element be preloaded?\r\n\t * Decides based on local element attributes and global config.\r\n\t *\r\n\t * @param {HTMLElement} element\r\n\t */\r\n\tfunction shouldPreload( element ) {\r\n\r\n\t\t// Prefer an explicit global preload setting\r\n\t\tvar preload = config.preloadIframes;\r\n\r\n\t\t// If no global setting is available, fall back on the element's\r\n\t\t// own preload setting\r\n\t\tif( typeof preload !== 'boolean' ) {\r\n\t\t\tpreload = element.hasAttribute( 'data-preload' );\r\n\t\t}\r\n\r\n\t\treturn preload;\r\n\t}\r\n\r\n\t/**\r\n\t * Called when the given slide is within the configured view\r\n\t * distance. Shows the slide element and loads any content\r\n\t * that is set to load lazily (data-src).\r\n\t *\r\n\t * @param {HTMLElement} slide Slide to show\r\n\t */\r\n\tfunction loadSlide( slide, options ) {\r\n\r\n\t\toptions = options || {};\r\n\r\n\t\t// Show the slide element\r\n\t\tslide.style.display = config.display;\r\n\r\n\t\t// Media elements with data-src attributes\r\n\t\ttoArray( slide.querySelectorAll( 'img[data-src], video[data-src], audio[data-src], iframe[data-src]' ) ).forEach( function( element ) {\r\n\t\t\tif( element.tagName !== 'IFRAME' || shouldPreload( element ) ) {\r\n\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\r\n\t\t\t\telement.setAttribute( 'data-lazy-loaded', '' );\r\n\t\t\t\telement.removeAttribute( 'data-src' );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Media elements with <source> children\r\n\t\ttoArray( slide.querySelectorAll( 'video, audio' ) ).forEach( function( media ) {\r\n\t\t\tvar sources = 0;\r\n\r\n\t\t\ttoArray( media.querySelectorAll( 'source[data-src]' ) ).forEach( function( source ) {\r\n\t\t\t\tsource.setAttribute( 'src', source.getAttribute( 'data-src' ) );\r\n\t\t\t\tsource.removeAttribute( 'data-src' );\r\n\t\t\t\tsource.setAttribute( 'data-lazy-loaded', '' );\r\n\t\t\t\tsources += 1;\r\n\t\t\t} );\r\n\r\n\t\t\t// If we rewrote sources for this video/audio element, we need\r\n\t\t\t// to manually tell it to load from its new origin\r\n\t\t\tif( sources > 0 ) {\r\n\t\t\t\tmedia.load();\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\r\n\t\t// Show the corresponding background element\r\n\t\tvar background = slide.slideBackgroundElement;\r\n\t\tif( background ) {\r\n\t\t\tbackground.style.display = 'block';\r\n\r\n\t\t\tvar backgroundContent = slide.slideBackgroundContentElement;\r\n\t\t\tvar backgroundIframe = slide.getAttribute( 'data-background-iframe' );\r\n\r\n\t\t\t// If the background contains media, load it\r\n\t\t\tif( background.hasAttribute( 'data-loaded' ) === false ) {\r\n\t\t\t\tbackground.setAttribute( 'data-loaded', 'true' );\r\n\r\n\t\t\t\tvar backgroundImage = slide.getAttribute( 'data-background-image' ),\r\n\t\t\t\t\tbackgroundVideo = slide.getAttribute( 'data-background-video' ),\r\n\t\t\t\t\tbackgroundVideoLoop = slide.hasAttribute( 'data-background-video-loop' ),\r\n\t\t\t\t\tbackgroundVideoMuted = slide.hasAttribute( 'data-background-video-muted' );\r\n\r\n\t\t\t\t// Images\r\n\t\t\t\tif( backgroundImage ) {\r\n\t\t\t\t\tbackgroundContent.style.backgroundImage = 'url('+ encodeURI( backgroundImage ) +')';\r\n\t\t\t\t}\r\n\t\t\t\t// Videos\r\n\t\t\t\telse if ( backgroundVideo && !isSpeakerNotes() ) {\r\n\t\t\t\t\tvar video = document.createElement( 'video' );\r\n\r\n\t\t\t\t\tif( backgroundVideoLoop ) {\r\n\t\t\t\t\t\tvideo.setAttribute( 'loop', '' );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( backgroundVideoMuted ) {\r\n\t\t\t\t\t\tvideo.muted = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Inline video playback works (at least in Mobile Safari) as\r\n\t\t\t\t\t// long as the video is muted and the `playsinline` attribute is\r\n\t\t\t\t\t// present\r\n\t\t\t\t\tif( isMobileDevice ) {\r\n\t\t\t\t\t\tvideo.muted = true;\r\n\t\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\t\tvideo.setAttribute( 'playsinline', '' );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Support comma separated lists of video sources\r\n\t\t\t\t\tbackgroundVideo.split( ',' ).forEach( function( source ) {\r\n\t\t\t\t\t\tvideo.innerHTML += '<source src=\"'+ source +'\">';\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tbackgroundContent.appendChild( video );\r\n\t\t\t\t}\r\n\t\t\t\t// Iframes\r\n\t\t\t\telse if( backgroundIframe && options.excludeIframes !== true ) {\r\n\t\t\t\t\tvar iframe = document.createElement( 'iframe' );\r\n\t\t\t\t\tiframe.setAttribute( 'allowfullscreen', '' );\r\n\t\t\t\t\tiframe.setAttribute( 'mozallowfullscreen', '' );\r\n\t\t\t\t\tiframe.setAttribute( 'webkitallowfullscreen', '' );\r\n\t\t\t\t\tiframe.setAttribute( 'allow', 'autoplay' );\r\n\r\n\t\t\t\t\tiframe.setAttribute( 'data-src', backgroundIframe );\r\n\r\n\t\t\t\t\tiframe.style.width  = '100%';\r\n\t\t\t\t\tiframe.style.height = '100%';\r\n\t\t\t\t\tiframe.style.maxHeight = '100%';\r\n\t\t\t\t\tiframe.style.maxWidth = '100%';\r\n\r\n\t\t\t\t\tbackgroundContent.appendChild( iframe );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Start loading preloadable iframes\r\n\t\t\tvar backgroundIframeElement = backgroundContent.querySelector( 'iframe[data-src]' );\r\n\t\t\tif( backgroundIframeElement ) {\r\n\r\n\t\t\t\t// Check if this iframe is eligible to be preloaded\r\n\t\t\t\tif( shouldPreload( background ) && !/autoplay=(1|true|yes)/gi.test( backgroundIframe ) ) {\r\n\t\t\t\t\tif( backgroundIframeElement.getAttribute( 'src' ) !== backgroundIframe ) {\r\n\t\t\t\t\t\tbackgroundIframeElement.setAttribute( 'src', backgroundIframe );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unloads and hides the given slide. This is called when the\r\n\t * slide is moved outside of the configured view distance.\r\n\t *\r\n\t * @param {HTMLElement} slide\r\n\t */\r\n\tfunction unloadSlide( slide ) {\r\n\r\n\t\t// Hide the slide element\r\n\t\tslide.style.display = 'none';\r\n\r\n\t\t// Hide the corresponding background element\r\n\t\tvar background = getSlideBackground( slide );\r\n\t\tif( background ) {\r\n\t\t\tbackground.style.display = 'none';\r\n\r\n\t\t\t// Unload any background iframes\r\n\t\t\ttoArray( background.querySelectorAll( 'iframe[src]' ) ).forEach( function( element ) {\r\n\t\t\t\telement.removeAttribute( 'src' );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// Reset lazy-loaded media elements with src attributes\r\n\t\ttoArray( slide.querySelectorAll( 'video[data-lazy-loaded][src], audio[data-lazy-loaded][src], iframe[data-lazy-loaded][src]' ) ).forEach( function( element ) {\r\n\t\t\telement.setAttribute( 'data-src', element.getAttribute( 'src' ) );\r\n\t\t\telement.removeAttribute( 'src' );\r\n\t\t} );\r\n\r\n\t\t// Reset lazy-loaded media elements with <source> children\r\n\t\ttoArray( slide.querySelectorAll( 'video[data-lazy-loaded] source[src], audio source[src]' ) ).forEach( function( source ) {\r\n\t\t\tsource.setAttribute( 'data-src', source.getAttribute( 'src' ) );\r\n\t\t\tsource.removeAttribute( 'src' );\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Determine what available routes there are for navigation.\r\n\t *\r\n\t * @return {{left: boolean, right: boolean, up: boolean, down: boolean}}\r\n\t */\r\n\tfunction availableRoutes() {\r\n\r\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\r\n\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\r\n\r\n\t\tvar routes = {\r\n\t\t\tleft: indexh > 0,\r\n\t\t\tright: indexh < horizontalSlides.length - 1,\r\n\t\t\tup: indexv > 0,\r\n\t\t\tdown: indexv < verticalSlides.length - 1\r\n\t\t};\r\n\r\n\t\t// Looped presentations can always be navigated as long as\r\n\t\t// there are slides available\r\n\t\tif( config.loop ) {\r\n\t\t\tif( horizontalSlides.length > 1 ) {\r\n\t\t\t\troutes.left = true;\r\n\t\t\t\troutes.right = true;\r\n\t\t\t}\r\n\r\n\t\t\tif( verticalSlides.length > 1 ) {\r\n\t\t\t\troutes.up = true;\r\n\t\t\t\troutes.down = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Reverse horizontal controls for rtl\r\n\t\tif( config.rtl ) {\r\n\t\t\tvar left = routes.left;\r\n\t\t\troutes.left = routes.right;\r\n\t\t\troutes.right = left;\r\n\t\t}\r\n\r\n\t\treturn routes;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object describing the available fragment\r\n\t * directions.\r\n\t *\r\n\t * @return {{prev: boolean, next: boolean}}\r\n\t */\r\n\tfunction availableFragments() {\r\n\r\n\t\tif( currentSlide && config.fragments ) {\r\n\t\t\tvar fragments = currentSlide.querySelectorAll( '.fragment' );\r\n\t\t\tvar hiddenFragments = currentSlide.querySelectorAll( '.fragment:not(.visible)' );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tprev: fragments.length - hiddenFragments.length > 0,\r\n\t\t\t\tnext: !!hiddenFragments.length\r\n\t\t\t};\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn { prev: false, next: false };\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enforces origin-specific format rules for embedded media.\r\n\t */\r\n\tfunction formatEmbeddedContent() {\r\n\r\n\t\tvar _appendParamToIframeSource = function( sourceAttribute, sourceURL, param ) {\r\n\t\t\ttoArray( dom.slides.querySelectorAll( 'iframe['+ sourceAttribute +'*=\"'+ sourceURL +'\"]' ) ).forEach( function( el ) {\r\n\t\t\t\tvar src = el.getAttribute( sourceAttribute );\r\n\t\t\t\tif( src && src.indexOf( param ) === -1 ) {\r\n\t\t\t\t\tel.setAttribute( sourceAttribute, src + ( !/\\?/.test( src ) ? '?' : '&' ) + param );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// YouTube frames must include \"?enablejsapi=1\"\r\n\t\t_appendParamToIframeSource( 'src', 'youtube.com/embed/', 'enablejsapi=1' );\r\n\t\t_appendParamToIframeSource( 'data-src', 'youtube.com/embed/', 'enablejsapi=1' );\r\n\r\n\t\t// Vimeo frames must include \"?api=1\"\r\n\t\t_appendParamToIframeSource( 'src', 'player.vimeo.com/', 'api=1' );\r\n\t\t_appendParamToIframeSource( 'data-src', 'player.vimeo.com/', 'api=1' );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Start playback of any embedded content inside of\r\n\t * the given element.\r\n\t *\r\n\t * @param {HTMLElement} element\r\n\t */\r\n\tfunction startEmbeddedContent( element ) {\r\n\r\n\t\tif( element && !isSpeakerNotes() ) {\r\n\r\n\t\t\t// Restart GIFs\r\n\t\t\ttoArray( element.querySelectorAll( 'img[src$=\".gif\"]' ) ).forEach( function( el ) {\r\n\t\t\t\t// Setting the same unchanged source like this was confirmed\r\n\t\t\t\t// to work in Chrome, FF & Safari\r\n\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'src' ) );\r\n\t\t\t} );\r\n\r\n\t\t\t// HTML5 media elements\r\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\r\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prefer an explicit global autoplay setting\r\n\t\t\t\tvar autoplay = config.autoPlayMedia;\r\n\r\n\t\t\t\t// If no global setting is available, fall back on the element's\r\n\t\t\t\t// own autoplay setting\r\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\r\n\t\t\t\t\tautoplay = el.hasAttribute( 'data-autoplay' ) || !!closestParent( el, '.slide-background' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( autoplay && typeof el.play === 'function' ) {\r\n\r\n\t\t\t\t\t// If the media is ready, start playback\r\n\t\t\t\t\tif( el.readyState > 1 ) {\r\n\t\t\t\t\t\tstartEmbeddedMedia( { target: el } );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Mobile devices never fire a loaded event so instead\r\n\t\t\t\t\t// of waiting, we initiate playback\r\n\t\t\t\t\telse if( isMobileDevice ) {\r\n\t\t\t\t\t\tvar promise = el.play();\r\n\r\n\t\t\t\t\t\t// If autoplay does not work, ensure that the controls are visible so\r\n\t\t\t\t\t\t// that the viewer can start the media on their own\r\n\t\t\t\t\t\tif( promise && typeof promise.catch === 'function' && el.controls === false ) {\r\n\t\t\t\t\t\t\tpromise.catch( function() {\r\n\t\t\t\t\t\t\t\tel.controls = true;\r\n\r\n\t\t\t\t\t\t\t\t// Once the video does start playing, hide the controls again\r\n\t\t\t\t\t\t\t\tel.addEventListener( 'play', function() {\r\n\t\t\t\t\t\t\t\t\tel.controls = false;\r\n\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// If the media isn't loaded, wait before playing\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tel.removeEventListener( 'loadeddata', startEmbeddedMedia ); // remove first to avoid dupes\r\n\t\t\t\t\t\tel.addEventListener( 'loadeddata', startEmbeddedMedia );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Normal iframes\r\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src]' ) ).forEach( function( el ) {\r\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstartEmbeddedIframe( { target: el } );\r\n\t\t\t} );\r\n\r\n\t\t\t// Lazy loading iframes\r\n\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\r\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( el.getAttribute( 'src' ) !== el.getAttribute( 'data-src' ) ) {\r\n\t\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe ); // remove first to avoid dupes\r\n\t\t\t\t\tel.addEventListener( 'load', startEmbeddedIframe );\r\n\t\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'data-src' ) );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Starts playing an embedded video/audio element after\r\n\t * it has finished loading.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction startEmbeddedMedia( event ) {\r\n\r\n\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\r\n\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\r\n\r\n\t\tif( isAttachedToDOM && isVisible ) {\r\n\t\t\tevent.target.currentTime = 0;\r\n\t\t\tevent.target.play();\r\n\t\t}\r\n\r\n\t\tevent.target.removeEventListener( 'loadeddata', startEmbeddedMedia );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * \"Starts\" the content of an embedded iframe using the\r\n\t * postMessage API.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction startEmbeddedIframe( event ) {\r\n\r\n\t\tvar iframe = event.target;\r\n\r\n\t\tif( iframe && iframe.contentWindow ) {\r\n\r\n\t\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\r\n\t\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\r\n\r\n\t\t\tif( isAttachedToDOM && isVisible ) {\r\n\r\n\t\t\t\t// Prefer an explicit global autoplay setting\r\n\t\t\t\tvar autoplay = config.autoPlayMedia;\r\n\r\n\t\t\t\t// If no global setting is available, fall back on the element's\r\n\t\t\t\t// own autoplay setting\r\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\r\n\t\t\t\t\tautoplay = iframe.hasAttribute( 'data-autoplay' ) || !!closestParent( iframe, '.slide-background' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// YouTube postMessage API\r\n\t\t\t\tif( /youtube\\.com\\/embed\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\r\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*' );\r\n\t\t\t\t}\r\n\t\t\t\t// Vimeo postMessage API\r\n\t\t\t\telse if( /player\\.vimeo\\.com\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\r\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"method\":\"play\"}', '*' );\r\n\t\t\t\t}\r\n\t\t\t\t// Generic postMessage API\r\n\t\t\t\telse {\r\n\t\t\t\t\tiframe.contentWindow.postMessage( 'slide:start', '*' );\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Stop playback of any embedded content inside of\r\n\t * the targeted slide.\r\n\t *\r\n\t * @param {HTMLElement} element\r\n\t */\r\n\tfunction stopEmbeddedContent( element, options ) {\r\n\r\n\t\toptions = extend( {\r\n\t\t\t// Defaults\r\n\t\t\tunloadIframes: true\r\n\t\t}, options || {} );\r\n\r\n\t\tif( element && element.parentNode ) {\r\n\t\t\t// HTML5 media elements\r\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\r\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && typeof el.pause === 'function' ) {\r\n\t\t\t\t\tel.setAttribute('data-paused-by-reveal', '');\r\n\t\t\t\t\tel.pause();\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Generic postMessage API for non-lazy loaded iframes\r\n\t\t\ttoArray( element.querySelectorAll( 'iframe' ) ).forEach( function( el ) {\r\n\t\t\t\tif( el.contentWindow ) el.contentWindow.postMessage( 'slide:stop', '*' );\r\n\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe );\r\n\t\t\t});\r\n\r\n\t\t\t// YouTube postMessage API\r\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"youtube.com/embed/\"]' ) ).forEach( function( el ) {\r\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\r\n\t\t\t\t\tel.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*' );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Vimeo postMessage API\r\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"player.vimeo.com/\"]' ) ).forEach( function( el ) {\r\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\r\n\t\t\t\t\tel.contentWindow.postMessage( '{\"method\":\"pause\"}', '*' );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif( options.unloadIframes === true ) {\r\n\t\t\t\t// Unload lazy-loaded iframes\r\n\t\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\r\n\t\t\t\t\t// Only removing the src doesn't actually unload the frame\r\n\t\t\t\t\t// in all browsers (Firefox) so we set it to blank first\r\n\t\t\t\t\tel.setAttribute( 'src', 'about:blank' );\r\n\t\t\t\t\tel.removeAttribute( 'src' );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the number of past slides. This can be used as a global\r\n\t * flattened index for slides.\r\n\t *\r\n\t * @param {HTMLElement} [slide=currentSlide] The slide we're counting before\r\n\t *\r\n\t * @return {number} Past slide count\r\n\t */\r\n\tfunction getSlidePastCount( slide ) {\r\n\r\n\t\tif( slide === undefined ) {\r\n\t\t\tslide = currentSlide;\r\n\t\t}\r\n\r\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\r\n\r\n\t\t// The number of past slides\r\n\t\tvar pastCount = 0;\r\n\r\n\t\t// Step through all slides and count the past ones\r\n\t\tmainLoop: for( var i = 0; i < horizontalSlides.length; i++ ) {\r\n\r\n\t\t\tvar horizontalSlide = horizontalSlides[i];\r\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\r\n\r\n\t\t\tfor( var j = 0; j < verticalSlides.length; j++ ) {\r\n\r\n\t\t\t\t// Stop as soon as we arrive at the present\r\n\t\t\t\tif( verticalSlides[j] === slide ) {\r\n\t\t\t\t\tbreak mainLoop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpastCount++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Stop as soon as we arrive at the present\r\n\t\t\tif( horizontalSlide === slide ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// Don't count the wrapping section for vertical slides\r\n\t\t\tif( horizontalSlide.classList.contains( 'stack' ) === false ) {\r\n\t\t\t\tpastCount++;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn pastCount;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a value ranging from 0-1 that represents\r\n\t * how far into the presentation we have navigated.\r\n\t *\r\n\t * @return {number}\r\n\t */\r\n\tfunction getProgress() {\r\n\r\n\t\t// The number of past and total slides\r\n\t\tvar totalCount = getTotalSlides();\r\n\t\tvar pastCount = getSlidePastCount();\r\n\r\n\t\tif( currentSlide ) {\r\n\r\n\t\t\tvar allFragments = currentSlide.querySelectorAll( '.fragment' );\r\n\r\n\t\t\t// If there are fragments in the current slide those should be\r\n\t\t\t// accounted for in the progress.\r\n\t\t\tif( allFragments.length > 0 ) {\r\n\t\t\t\tvar visibleFragments = currentSlide.querySelectorAll( '.fragment.visible' );\r\n\r\n\t\t\t\t// This value represents how big a portion of the slide progress\r\n\t\t\t\t// that is made up by its fragments (0-1)\r\n\t\t\t\tvar fragmentWeight = 0.9;\r\n\r\n\t\t\t\t// Add fragment progress to the past slide count\r\n\t\t\t\tpastCount += ( visibleFragments.length / allFragments.length ) * fragmentWeight;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.min( pastCount / ( totalCount - 1 ), 1 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if this presentation is running inside of the\r\n\t * speaker notes window.\r\n\t *\r\n\t * @return {boolean}\r\n\t */\r\n\tfunction isSpeakerNotes() {\r\n\r\n\t\treturn !!window.location.search.match( /receiver/gi );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Reads the current URL (hash) and navigates accordingly.\r\n\t */\r\n\tfunction readURL() {\r\n\r\n\t\tvar hash = window.location.hash;\r\n\r\n\t\t// Attempt to parse the hash as either an index or name\r\n\t\tvar bits = hash.slice( 2 ).split( '/' ),\r\n\t\t\tname = hash.replace( /#|\\//gi, '' );\r\n\r\n\t\t// If the first bit is not fully numeric and there is a name we\r\n\t\t// can assume that this is a named link\r\n\t\tif( !/^[0-9]*$/.test( bits[0] ) && name.length ) {\r\n\t\t\tvar element;\r\n\r\n\t\t\t// Ensure the named link is a valid HTML ID attribute\r\n\t\t\ttry {\r\n\t\t\t\telement = document.getElementById( decodeURIComponent( name ) );\r\n\t\t\t}\r\n\t\t\tcatch ( error ) { }\r\n\r\n\t\t\t// Ensure that we're not already on a slide with the same name\r\n\t\t\tvar isSameNameAsCurrentSlide = currentSlide ? currentSlide.getAttribute( 'id' ) === name : false;\r\n\r\n\t\t\tif( element ) {\r\n\t\t\t\t// If the slide exists and is not the current slide...\r\n\t\t\t\tif ( !isSameNameAsCurrentSlide ) {\r\n\t\t\t\t\t// ...find the position of the named slide and navigate to it\r\n\t\t\t\t\tvar indices = Reveal.getIndices(element);\r\n\t\t\t\t\tslide(indices.h, indices.v);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// If the slide doesn't exist, navigate to the current slide\r\n\t\t\telse {\r\n\t\t\t\tslide( indexh || 0, indexv || 0 );\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar hashIndexBase = config.hashOneBasedIndex ? 1 : 0;\r\n\r\n\t\t\t// Read the index components of the hash\r\n\t\t\tvar h = ( parseInt( bits[0], 10 ) - hashIndexBase ) || 0,\r\n\t\t\t\tv = ( parseInt( bits[1], 10 ) - hashIndexBase ) || 0,\r\n\t\t\t\tf;\r\n\r\n\t\t\tif( config.fragmentInURL ) {\r\n\t\t\t\tf = parseInt( bits[2], 10 );\r\n\t\t\t\tif( isNaN( f ) ) {\r\n\t\t\t\t\tf = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif( h !== indexh || v !== indexv || f !== undefined ) {\r\n\t\t\t\tslide( h, v, f );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the page URL (hash) to reflect the current\r\n\t * state.\r\n\t *\r\n\t * @param {number} delay The time in ms to wait before\r\n\t * writing the hash\r\n\t */\r\n\tfunction writeURL( delay ) {\r\n\r\n\t\t// Make sure there's never more than one timeout running\r\n\t\tclearTimeout( writeURLTimeout );\r\n\r\n\t\t// If a delay is specified, timeout this call\r\n\t\tif( typeof delay === 'number' ) {\r\n\t\t\twriteURLTimeout = setTimeout( writeURL, delay );\r\n\t\t}\r\n\t\telse if( currentSlide ) {\r\n\t\t\t// If we're configured to push to history OR the history\r\n\t\t\t// API is not avaialble.\r\n\t\t\tif( config.history || !window.history ) {\r\n\t\t\t\twindow.location.hash = locationHash();\r\n\t\t\t}\r\n\t\t\t// If we're configured to reflect the current slide in the\r\n\t\t\t// URL without pushing to history.\r\n\t\t\telse if( config.hash ) {\r\n\t\t\t\twindow.history.replaceState( null, null, '#' + locationHash() );\r\n\t\t\t}\r\n\t\t\t// If history and hash are both disabled, a hash may still\r\n\t\t\t// be added to the URL by clicking on a href with a hash\r\n\t\t\t// target. Counter this by always removing the hash.\r\n\t\t\telse {\r\n\t\t\t\twindow.history.replaceState( null, null, window.location.pathname + window.location.search );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\t/**\r\n\t * Retrieves the h/v location and fragment of the current,\r\n\t * or specified, slide.\r\n\t *\r\n\t * @param {HTMLElement} [slide] If specified, the returned\r\n\t * index will be for this slide rather than the currently\r\n\t * active one\r\n\t *\r\n\t * @return {{h: number, v: number, f: number}}\r\n\t */\r\n\tfunction getIndices( slide ) {\r\n\r\n\t\t// By default, return the current indices\r\n\t\tvar h = indexh,\r\n\t\t\tv = indexv,\r\n\t\t\tf;\r\n\r\n\t\t// If a slide is specified, return the indices of that slide\r\n\t\tif( slide ) {\r\n\t\t\tvar isVertical = isVerticalSlide( slide );\r\n\t\t\tvar slideh = isVertical ? slide.parentNode : slide;\r\n\r\n\t\t\t// Select all horizontal slides\r\n\t\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\r\n\r\n\t\t\t// Now that we know which the horizontal slide is, get its index\r\n\t\t\th = Math.max( horizontalSlides.indexOf( slideh ), 0 );\r\n\r\n\t\t\t// Assume we're not vertical\r\n\t\t\tv = undefined;\r\n\r\n\t\t\t// If this is a vertical slide, grab the vertical index\r\n\t\t\tif( isVertical ) {\r\n\t\t\t\tv = Math.max( toArray( slide.parentNode.querySelectorAll( 'section' ) ).indexOf( slide ), 0 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( !slide && currentSlide ) {\r\n\t\t\tvar hasFragments = currentSlide.querySelectorAll( '.fragment' ).length > 0;\r\n\t\t\tif( hasFragments ) {\r\n\t\t\t\tvar currentFragment = currentSlide.querySelector( '.current-fragment' );\r\n\t\t\t\tif( currentFragment && currentFragment.hasAttribute( 'data-fragment-index' ) ) {\r\n\t\t\t\t\tf = parseInt( currentFragment.getAttribute( 'data-fragment-index' ), 10 );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tf = currentSlide.querySelectorAll( '.fragment.visible' ).length - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn { h: h, v: v, f: f };\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves all slides in this presentation.\r\n\t */\r\n\tfunction getSlides() {\r\n\r\n\t\treturn toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ':not(.stack)' ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of all horizontal slides in the deck. Each\r\n\t * vertical stack is included as one horizontal slide in the\r\n\t * resulting array.\r\n\t */\r\n\tfunction getHorizontalSlides() {\r\n\r\n\t\treturn toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all vertical slides that exist within this deck.\r\n\t */\r\n\tfunction getVerticalSlides() {\r\n\r\n\t\treturn toArray( dom.wrapper.querySelectorAll( '.slides>section>section' ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns true if there are at least two horizontal slides.\r\n\t */\r\n\tfunction hasHorizontalSlides() {\r\n\r\n\t\treturn getHorizontalSlides().length > 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns true if there are at least two vertical slides.\r\n\t */\r\n\tfunction hasVerticalSlides() {\r\n\r\n\t\treturn getVerticalSlides().length > 1;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an array of objects where each object represents the\r\n\t * attributes on its respective slide.\r\n\t */\r\n\tfunction getSlidesAttributes() {\r\n\r\n\t\treturn getSlides().map( function( slide ) {\r\n\r\n\t\t\tvar attributes = {};\r\n\t\t\tfor( var i = 0; i < slide.attributes.length; i++ ) {\r\n\t\t\t\tvar attribute = slide.attributes[ i ];\r\n\t\t\t\tattributes[ attribute.name ] = attribute.value;\r\n\t\t\t}\r\n\t\t\treturn attributes;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves the total number of slides in this presentation.\r\n\t *\r\n\t * @return {number}\r\n\t */\r\n\tfunction getTotalSlides() {\r\n\r\n\t\treturn getSlides().length;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the slide element matching the specified index.\r\n\t *\r\n\t * @return {HTMLElement}\r\n\t */\r\n\tfunction getSlide( x, y ) {\r\n\r\n\t\tvar horizontalSlide = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR )[ x ];\r\n\t\tvar verticalSlides = horizontalSlide && horizontalSlide.querySelectorAll( 'section' );\r\n\r\n\t\tif( verticalSlides && verticalSlides.length && typeof y === 'number' ) {\r\n\t\t\treturn verticalSlides ? verticalSlides[ y ] : undefined;\r\n\t\t}\r\n\r\n\t\treturn horizontalSlide;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the background element for the given slide.\r\n\t * All slides, even the ones with no background properties\r\n\t * defined, have a background element so as long as the\r\n\t * index is valid an element will be returned.\r\n\t *\r\n\t * @param {mixed} x Horizontal background index OR a slide\r\n\t * HTML element\r\n\t * @param {number} y Vertical background index\r\n\t * @return {(HTMLElement[]|*)}\r\n\t */\r\n\tfunction getSlideBackground( x, y ) {\r\n\r\n\t\tvar slide = typeof x === 'number' ? getSlide( x, y ) : x;\r\n\t\tif( slide ) {\r\n\t\t\treturn slide.slideBackgroundElement;\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves the speaker notes from a slide. Notes can be\r\n\t * defined in two ways:\r\n\t * 1. As a data-notes attribute on the slide <section>\r\n\t * 2. As an <aside class=\"notes\"> inside of the slide\r\n\t *\r\n\t * @param {HTMLElement} [slide=currentSlide]\r\n\t * @return {(string|null)}\r\n\t */\r\n\tfunction getSlideNotes( slide ) {\r\n\r\n\t\t// Default to the current slide\r\n\t\tslide = slide || currentSlide;\r\n\r\n\t\t// Notes can be specified via the data-notes attribute...\r\n\t\tif( slide.hasAttribute( 'data-notes' ) ) {\r\n\t\t\treturn slide.getAttribute( 'data-notes' );\r\n\t\t}\r\n\r\n\t\t// ... or using an <aside class=\"notes\"> element\r\n\t\tvar notesElement = slide.querySelector( 'aside.notes' );\r\n\t\tif( notesElement ) {\r\n\t\t\treturn notesElement.innerHTML;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves the current state of the presentation as\r\n\t * an object. This state can then be restored at any\r\n\t * time.\r\n\t *\r\n\t * @return {{indexh: number, indexv: number, indexf: number, paused: boolean, overview: boolean}}\r\n\t */\r\n\tfunction getState() {\r\n\r\n\t\tvar indices = getIndices();\r\n\r\n\t\treturn {\r\n\t\t\tindexh: indices.h,\r\n\t\t\tindexv: indices.v,\r\n\t\t\tindexf: indices.f,\r\n\t\t\tpaused: isPaused(),\r\n\t\t\toverview: isOverview()\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Restores the presentation to the given state.\r\n\t *\r\n\t * @param {object} state As generated by getState()\r\n\t * @see {@link getState} generates the parameter `state`\r\n\t */\r\n\tfunction setState( state ) {\r\n\r\n\t\tif( typeof state === 'object' ) {\r\n\t\t\tslide( deserialize( state.indexh ), deserialize( state.indexv ), deserialize( state.indexf ) );\r\n\r\n\t\t\tvar pausedFlag = deserialize( state.paused ),\r\n\t\t\t\toverviewFlag = deserialize( state.overview );\r\n\r\n\t\t\tif( typeof pausedFlag === 'boolean' && pausedFlag !== isPaused() ) {\r\n\t\t\t\ttogglePause( pausedFlag );\r\n\t\t\t}\r\n\r\n\t\t\tif( typeof overviewFlag === 'boolean' && overviewFlag !== isOverview() ) {\r\n\t\t\t\ttoggleOverview( overviewFlag );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Return a sorted fragments list, ordered by an increasing\r\n\t * \"data-fragment-index\" attribute.\r\n\t *\r\n\t * Fragments will be revealed in the order that they are returned by\r\n\t * this function, so you can use the index attributes to control the\r\n\t * order of fragment appearance.\r\n\t *\r\n\t * To maintain a sensible default fragment order, fragments are presumed\r\n\t * to be passed in document order. This function adds a \"fragment-index\"\r\n\t * attribute to each node if such an attribute is not already present,\r\n\t * and sets that attribute to an integer value which is the position of\r\n\t * the fragment within the fragments list.\r\n\t *\r\n\t * @param {object[]|*} fragments\r\n\t * @param {boolean} grouped If true the returned array will contain\r\n\t * nested arrays for all fragments with the same index\r\n\t * @return {object[]} sorted Sorted array of fragments\r\n\t */\r\n\tfunction sortFragments( fragments, grouped ) {\r\n\r\n\t\tfragments = toArray( fragments );\r\n\r\n\t\tvar ordered = [],\r\n\t\t\tunordered = [],\r\n\t\t\tsorted = [];\r\n\r\n\t\t// Group ordered and unordered elements\r\n\t\tfragments.forEach( function( fragment, i ) {\r\n\t\t\tif( fragment.hasAttribute( 'data-fragment-index' ) ) {\r\n\t\t\t\tvar index = parseInt( fragment.getAttribute( 'data-fragment-index' ), 10 );\r\n\r\n\t\t\t\tif( !ordered[index] ) {\r\n\t\t\t\t\tordered[index] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tordered[index].push( fragment );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tunordered.push( [ fragment ] );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Append fragments without explicit indices in their\r\n\t\t// DOM order\r\n\t\tordered = ordered.concat( unordered );\r\n\r\n\t\t// Manually count the index up per group to ensure there\r\n\t\t// are no gaps\r\n\t\tvar index = 0;\r\n\r\n\t\t// Push all fragments in their sorted order to an array,\r\n\t\t// this flattens the groups\r\n\t\tordered.forEach( function( group ) {\r\n\t\t\tgroup.forEach( function( fragment ) {\r\n\t\t\t\tsorted.push( fragment );\r\n\t\t\t\tfragment.setAttribute( 'data-fragment-index', index );\r\n\t\t\t} );\r\n\r\n\t\t\tindex ++;\r\n\t\t} );\r\n\r\n\t\treturn grouped === true ? ordered : sorted;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Refreshes the fragments on the current slide so that they\r\n\t * have the appropriate classes (.visible + .current-fragment).\r\n\t *\r\n\t * @param {number} [index] The index of the current fragment\r\n\t * @param {array} [fragments] Array containing all fragments\r\n\t * in the current slide\r\n\t *\r\n\t * @return {{shown: array, hidden: array}}\r\n\t */\r\n\tfunction updateFragments( index, fragments ) {\r\n\r\n\t\tvar changedFragments = {\r\n\t\t\tshown: [],\r\n\t\t\thidden: []\r\n\t\t};\r\n\r\n\t\tif( currentSlide && config.fragments ) {\r\n\r\n\t\t\tfragments = fragments || sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\r\n\r\n\t\t\tif( fragments.length ) {\r\n\r\n\t\t\t\tvar maxIndex = 0;\r\n\r\n\t\t\t\tif( typeof index !== 'number' ) {\r\n\t\t\t\t\tvar currentFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\r\n\t\t\t\t\tif( currentFragment ) {\r\n\t\t\t\t\t\tindex = parseInt( currentFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoArray( fragments ).forEach( function( el, i ) {\r\n\r\n\t\t\t\t\tif( el.hasAttribute( 'data-fragment-index' ) ) {\r\n\t\t\t\t\t\ti = parseInt( el.getAttribute( 'data-fragment-index' ), 10 );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmaxIndex = Math.max( maxIndex, i );\r\n\r\n\t\t\t\t\t// Visible fragments\r\n\t\t\t\t\tif( i <= index ) {\r\n\t\t\t\t\t\tif( !el.classList.contains( 'visible' ) ) changedFragments.shown.push( el );\r\n\t\t\t\t\t\tel.classList.add( 'visible' );\r\n\t\t\t\t\t\tel.classList.remove( 'current-fragment' );\r\n\r\n\t\t\t\t\t\t// Announce the fragments one by one to the Screen Reader\r\n\t\t\t\t\t\tdom.statusDiv.textContent = getStatusText( el );\r\n\r\n\t\t\t\t\t\tif( i === index ) {\r\n\t\t\t\t\t\t\tel.classList.add( 'current-fragment' );\r\n\t\t\t\t\t\t\tstartEmbeddedContent( el );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Hidden fragments\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif( el.classList.contains( 'visible' ) ) changedFragments.hidden.push( el );\r\n\t\t\t\t\t\tel.classList.remove( 'visible' );\r\n\t\t\t\t\t\tel.classList.remove( 'current-fragment' );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t// Write the current fragment index to the slide <section>.\r\n\t\t\t\t// This can be used by end users to apply styles based on\r\n\t\t\t\t// the current fragment index.\r\n\t\t\t\tindex = typeof index === 'number' ? index : -1;\r\n\t\t\t\tindex = Math.max( Math.min( index, maxIndex ), -1 );\r\n\t\t\t\tcurrentSlide.setAttribute( 'data-fragment', index );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn changedFragments;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Navigate to the specified slide fragment.\r\n\t *\r\n\t * @param {?number} index The index of the fragment that\r\n\t * should be shown, -1 means all are invisible\r\n\t * @param {number} offset Integer offset to apply to the\r\n\t * fragment index\r\n\t *\r\n\t * @return {boolean} true if a change was made in any\r\n\t * fragments visibility as part of this call\r\n\t */\r\n\tfunction navigateFragment( index, offset ) {\r\n\r\n\t\tif( currentSlide && config.fragments ) {\r\n\r\n\t\t\tvar fragments = sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\r\n\t\t\tif( fragments.length ) {\r\n\r\n\t\t\t\t// If no index is specified, find the current\r\n\t\t\t\tif( typeof index !== 'number' ) {\r\n\t\t\t\t\tvar lastVisibleFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\r\n\r\n\t\t\t\t\tif( lastVisibleFragment ) {\r\n\t\t\t\t\t\tindex = parseInt( lastVisibleFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tindex = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If an offset is specified, apply it to the index\r\n\t\t\t\tif( typeof offset === 'number' ) {\r\n\t\t\t\t\tindex += offset;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar changedFragments = updateFragments( index, fragments );\r\n\r\n\t\t\t\tif( changedFragments.hidden.length ) {\r\n\t\t\t\t\tdispatchEvent( 'fragmenthidden', { fragment: changedFragments.hidden[0], fragments: changedFragments.hidden } );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( changedFragments.shown.length ) {\r\n\t\t\t\t\tdispatchEvent( 'fragmentshown', { fragment: changedFragments.shown[0], fragments: changedFragments.shown } );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateControls();\r\n\t\t\t\tupdateProgress();\r\n\r\n\t\t\t\tif( config.fragmentInURL ) {\r\n\t\t\t\t\twriteURL();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn !!( changedFragments.shown.length || changedFragments.hidden.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Navigate to the next slide fragment.\r\n\t *\r\n\t * @return {boolean} true if there was a next fragment,\r\n\t * false otherwise\r\n\t */\r\n\tfunction nextFragment() {\r\n\r\n\t\treturn navigateFragment( null, 1 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Navigate to the previous slide fragment.\r\n\t *\r\n\t * @return {boolean} true if there was a previous fragment,\r\n\t * false otherwise\r\n\t */\r\n\tfunction previousFragment() {\r\n\r\n\t\treturn navigateFragment( null, -1 );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Cues a new automated slide if enabled in the config.\r\n\t */\r\n\tfunction cueAutoSlide() {\r\n\r\n\t\tcancelAutoSlide();\r\n\r\n\t\tif( currentSlide && config.autoSlide !== false ) {\r\n\r\n\t\t\tvar fragment = currentSlide.querySelector( '.current-fragment' );\r\n\r\n\t\t\t// When the slide first appears there is no \"current\" fragment so\r\n\t\t\t// we look for a data-autoslide timing on the first fragment\r\n\t\t\tif( !fragment ) fragment = currentSlide.querySelector( '.fragment' );\r\n\r\n\t\t\tvar fragmentAutoSlide = fragment ? fragment.getAttribute( 'data-autoslide' ) : null;\r\n\t\t\tvar parentAutoSlide = currentSlide.parentNode ? currentSlide.parentNode.getAttribute( 'data-autoslide' ) : null;\r\n\t\t\tvar slideAutoSlide = currentSlide.getAttribute( 'data-autoslide' );\r\n\r\n\t\t\t// Pick value in the following priority order:\r\n\t\t\t// 1. Current fragment's data-autoslide\r\n\t\t\t// 2. Current slide's data-autoslide\r\n\t\t\t// 3. Parent slide's data-autoslide\r\n\t\t\t// 4. Global autoSlide setting\r\n\t\t\tif( fragmentAutoSlide ) {\r\n\t\t\t\tautoSlide = parseInt( fragmentAutoSlide, 10 );\r\n\t\t\t}\r\n\t\t\telse if( slideAutoSlide ) {\r\n\t\t\t\tautoSlide = parseInt( slideAutoSlide, 10 );\r\n\t\t\t}\r\n\t\t\telse if( parentAutoSlide ) {\r\n\t\t\t\tautoSlide = parseInt( parentAutoSlide, 10 );\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tautoSlide = config.autoSlide;\r\n\t\t\t}\r\n\r\n\t\t\t// If there are media elements with data-autoplay,\r\n\t\t\t// automatically set the autoSlide duration to the\r\n\t\t\t// length of that media. Not applicable if the slide\r\n\t\t\t// is divided up into fragments.\r\n\t\t\t// playbackRate is accounted for in the duration.\r\n\t\t\tif( currentSlide.querySelectorAll( '.fragment' ).length === 0 ) {\r\n\t\t\t\ttoArray( currentSlide.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\r\n\t\t\t\t\tif( el.hasAttribute( 'data-autoplay' ) ) {\r\n\t\t\t\t\t\tif( autoSlide && (el.duration * 1000 / el.playbackRate ) > autoSlide ) {\r\n\t\t\t\t\t\t\tautoSlide = ( el.duration * 1000 / el.playbackRate ) + 1000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\t// Cue the next auto-slide if:\r\n\t\t\t// - There is an autoSlide value\r\n\t\t\t// - Auto-sliding isn't paused by the user\r\n\t\t\t// - The presentation isn't paused\r\n\t\t\t// - The overview isn't active\r\n\t\t\t// - The presentation isn't over\r\n\t\t\tif( autoSlide && !autoSlidePaused && !isPaused() && !isOverview() && ( !Reveal.isLastSlide() || availableFragments().next || config.loop === true ) ) {\r\n\t\t\t\tautoSlideTimeout = setTimeout( function() {\r\n\t\t\t\t\ttypeof config.autoSlideMethod === 'function' ? config.autoSlideMethod() : navigateNext();\r\n\t\t\t\t\tcueAutoSlide();\r\n\t\t\t\t}, autoSlide );\r\n\t\t\t\tautoSlideStartTime = Date.now();\r\n\t\t\t}\r\n\r\n\t\t\tif( autoSlidePlayer ) {\r\n\t\t\t\tautoSlidePlayer.setPlaying( autoSlideTimeout !== -1 );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Cancels any ongoing request to auto-slide.\r\n\t */\r\n\tfunction cancelAutoSlide() {\r\n\r\n\t\tclearTimeout( autoSlideTimeout );\r\n\t\tautoSlideTimeout = -1;\r\n\r\n\t}\r\n\r\n\tfunction pauseAutoSlide() {\r\n\r\n\t\tif( autoSlide && !autoSlidePaused ) {\r\n\t\t\tautoSlidePaused = true;\r\n\t\t\tdispatchEvent( 'autoslidepaused' );\r\n\t\t\tclearTimeout( autoSlideTimeout );\r\n\r\n\t\t\tif( autoSlidePlayer ) {\r\n\t\t\t\tautoSlidePlayer.setPlaying( false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction resumeAutoSlide() {\r\n\r\n\t\tif( autoSlide && autoSlidePaused ) {\r\n\t\t\tautoSlidePaused = false;\r\n\t\t\tdispatchEvent( 'autoslideresumed' );\r\n\t\t\tcueAutoSlide();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction navigateLeft() {\r\n\r\n\t\t// Reverse for RTL\r\n\t\tif( config.rtl ) {\r\n\t\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().left ) {\r\n\t\t\t\tslide( indexh + 1, config.navigationMode === 'grid' ? indexv : undefined );\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Normal navigation\r\n\t\telse if( ( isOverview() || previousFragment() === false ) && availableRoutes().left ) {\r\n\t\t\tslide( indexh - 1, config.navigationMode === 'grid' ? indexv : undefined );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction navigateRight() {\r\n\r\n\t\thasNavigatedRight = true;\r\n\r\n\t\t// Reverse for RTL\r\n\t\tif( config.rtl ) {\r\n\t\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().right ) {\r\n\t\t\t\tslide( indexh - 1, config.navigationMode === 'grid' ? indexv : undefined );\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Normal navigation\r\n\t\telse if( ( isOverview() || nextFragment() === false ) && availableRoutes().right ) {\r\n\t\t\tslide( indexh + 1, config.navigationMode === 'grid' ? indexv : undefined );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction navigateUp() {\r\n\r\n\t\t// Prioritize hiding fragments\r\n\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().up ) {\r\n\t\t\tslide( indexh, indexv - 1 );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction navigateDown() {\r\n\r\n\t\thasNavigatedDown = true;\r\n\r\n\t\t// Prioritize revealing fragments\r\n\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().down ) {\r\n\t\t\tslide( indexh, indexv + 1 );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Navigates backwards, prioritized in the following order:\r\n\t * 1) Previous fragment\r\n\t * 2) Previous vertical slide\r\n\t * 3) Previous horizontal slide\r\n\t */\r\n\tfunction navigatePrev() {\r\n\r\n\t\t// Prioritize revealing fragments\r\n\t\tif( previousFragment() === false ) {\r\n\t\t\tif( availableRoutes().up ) {\r\n\t\t\t\tnavigateUp();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Fetch the previous horizontal slide, if there is one\r\n\t\t\t\tvar previousSlide;\r\n\r\n\t\t\t\tif( config.rtl ) {\r\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.future' ) ).pop();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.past' ) ).pop();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( previousSlide ) {\r\n\t\t\t\t\tvar v = ( previousSlide.querySelectorAll( 'section' ).length - 1 ) || undefined;\r\n\t\t\t\t\tvar h = indexh - 1;\r\n\t\t\t\t\tslide( h, v );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The reverse of #navigatePrev().\r\n\t */\r\n\tfunction navigateNext() {\r\n\r\n\t\thasNavigatedRight = true;\r\n\t\thasNavigatedDown = true;\r\n\r\n\t\t// Prioritize revealing fragments\r\n\t\tif( nextFragment() === false ) {\r\n\r\n\t\t\tvar routes = availableRoutes();\r\n\r\n\t\t\t// When looping is enabled `routes.down` is always available\r\n\t\t\t// so we need a separate check for when we've reached the\r\n\t\t\t// end of a stack and should move horizontally\r\n\t\t\tif( routes.down && routes.right && config.loop && Reveal.isLastVerticalSlide( currentSlide ) ) {\r\n\t\t\t\troutes.down = false;\r\n\t\t\t}\r\n\r\n\t\t\tif( routes.down ) {\r\n\t\t\t\tnavigateDown();\r\n\t\t\t}\r\n\t\t\telse if( config.rtl ) {\r\n\t\t\t\tnavigateLeft();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnavigateRight();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the target element prevents the triggering of\r\n\t * swipe navigation.\r\n\t */\r\n\tfunction isSwipePrevented( target ) {\r\n\r\n\t\twhile( target && typeof target.hasAttribute === 'function' ) {\r\n\t\t\tif( target.hasAttribute( 'data-prevent-swipe' ) ) return true;\r\n\t\t\ttarget = target.parentNode;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\r\n\t// --------------------------------------------------------------------//\r\n\t// ----------------------------- EVENTS -------------------------------//\r\n\t// --------------------------------------------------------------------//\r\n\r\n\t/**\r\n\t * Called by all event handlers that are based on user\r\n\t * input.\r\n\t *\r\n\t * @param {object} [event]\r\n\t */\r\n\tfunction onUserInput( event ) {\r\n\r\n\t\tif( config.autoSlideStoppable ) {\r\n\t\t\tpauseAutoSlide();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Called whenever there is mouse input at the document level\r\n\t * to determine if the cursor is active or not.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onDocumentCursorActive( event ) {\r\n\r\n\t\tshowCursor();\r\n\r\n\t\tclearTimeout( cursorInactiveTimeout );\r\n\r\n\t\tcursorInactiveTimeout = setTimeout( hideCursor, config.hideCursorTime );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for the document level 'keypress' event.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onDocumentKeyPress( event ) {\r\n\r\n\t\t// Check if the pressed key is question mark\r\n\t\tif( event.shiftKey && event.charCode === 63 ) {\r\n\t\t\ttoggleHelp();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for the document level 'keydown' event.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onDocumentKeyDown( event ) {\r\n\r\n\t\t// If there's a condition specified and it returns false,\r\n\t\t// ignore this event\r\n\t\tif( typeof config.keyboardCondition === 'function' && config.keyboardCondition(event) === false ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Shorthand\r\n\t\tvar keyCode = event.keyCode;\r\n\r\n\t\t// Remember if auto-sliding was paused so we can toggle it\r\n\t\tvar autoSlideWasPaused = autoSlidePaused;\r\n\r\n\t\tonUserInput( event );\r\n\r\n\t\t// Is there a focused element that could be using the keyboard?\r\n\t\tvar activeElementIsCE = document.activeElement && document.activeElement.contentEditable !== 'inherit';\r\n\t\tvar activeElementIsInput = document.activeElement && document.activeElement.tagName && /input|textarea/i.test( document.activeElement.tagName );\r\n\t\tvar activeElementIsNotes = document.activeElement && document.activeElement.className && /speaker-notes/i.test( document.activeElement.className);\r\n\r\n\t\t// Whitelist specific modified + keycode combinations\r\n\t\tvar prevSlideShortcut = event.shiftKey && event.keyCode === 32;\r\n\t\tvar firstSlideShortcut = event.shiftKey && keyCode === 37;\r\n\t\tvar lastSlideShortcut = event.shiftKey && keyCode === 39;\r\n\r\n\t\t// Prevent all other events when a modifier is pressed\r\n\t\tvar unusedModifier = \t!prevSlideShortcut && !firstSlideShortcut && !lastSlideShortcut &&\r\n\t\t\t\t\t\t\t\t( event.shiftKey || event.altKey || event.ctrlKey || event.metaKey );\r\n\r\n\t\t// Disregard the event if there's a focused element or a\r\n\t\t// keyboard modifier key is present\r\n\t\tif( activeElementIsCE || activeElementIsInput || activeElementIsNotes || unusedModifier ) return;\r\n\r\n\t\t// While paused only allow resume keyboard events; 'b', 'v', '.'\r\n\t\tvar resumeKeyCodes = [66,86,190,191];\r\n\t\tvar key;\r\n\r\n\t\t// Custom key bindings for togglePause should be able to resume\r\n\t\tif( typeof config.keyboard === 'object' ) {\r\n\t\t\tfor( key in config.keyboard ) {\r\n\t\t\t\tif( config.keyboard[key] === 'togglePause' ) {\r\n\t\t\t\t\tresumeKeyCodes.push( parseInt( key, 10 ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( isPaused() && resumeKeyCodes.indexOf( keyCode ) === -1 ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Use linear navigation if we're configured to OR if\r\n\t\t// the presentation is one-dimensional\r\n\t\tvar useLinearMode = config.navigationMode === 'linear' || !hasHorizontalSlides() || !hasVerticalSlides();\r\n\r\n\t\tvar triggered = false;\r\n\r\n\t\t// 1. User defined key bindings\r\n\t\tif( typeof config.keyboard === 'object' ) {\r\n\r\n\t\t\tfor( key in config.keyboard ) {\r\n\r\n\t\t\t\t// Check if this binding matches the pressed key\r\n\t\t\t\tif( parseInt( key, 10 ) === keyCode ) {\r\n\r\n\t\t\t\t\tvar value = config.keyboard[ key ];\r\n\r\n\t\t\t\t\t// Callback function\r\n\t\t\t\t\tif( typeof value === 'function' ) {\r\n\t\t\t\t\t\tvalue.apply( null, [ event ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// String shortcuts to reveal.js API\r\n\t\t\t\t\telse if( typeof value === 'string' && typeof Reveal[ value ] === 'function' ) {\r\n\t\t\t\t\t\tReveal[ value ].call();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttriggered = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// 2. Registered custom key bindings\r\n\t\tif( triggered === false ) {\r\n\r\n\t\t\tfor( key in registeredKeyBindings ) {\r\n\r\n\t\t\t\t// Check if this binding matches the pressed key\r\n\t\t\t\tif( parseInt( key, 10 ) === keyCode ) {\r\n\r\n\t\t\t\t\tvar action = registeredKeyBindings[ key ].callback;\r\n\r\n\t\t\t\t\t// Callback function\r\n\t\t\t\t\tif( typeof action === 'function' ) {\r\n\t\t\t\t\t\taction.apply( null, [ event ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// String shortcuts to reveal.js API\r\n\t\t\t\t\telse if( typeof action === 'string' && typeof Reveal[ action ] === 'function' ) {\r\n\t\t\t\t\t\tReveal[ action ].call();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttriggered = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 3. System defined key bindings\r\n\t\tif( triggered === false ) {\r\n\r\n\t\t\t// Assume true and try to prove false\r\n\t\t\ttriggered = true;\r\n\r\n\t\t\t// P, PAGE UP\r\n\t\t\tif( keyCode === 80 || keyCode === 33 ) {\r\n\t\t\t\tnavigatePrev();\r\n\t\t\t}\r\n\t\t\t// N, PAGE DOWN\r\n\t\t\telse if( keyCode === 78 || keyCode === 34 ) {\r\n\t\t\t\tnavigateNext();\r\n\t\t\t}\r\n\t\t\t// H, LEFT\r\n\t\t\telse if( keyCode === 72 || keyCode === 37 ) {\r\n\t\t\t\tif( firstSlideShortcut ) {\r\n\t\t\t\t\tslide( 0 );\r\n\t\t\t\t}\r\n\t\t\t\telse if( !isOverview() && useLinearMode ) {\r\n\t\t\t\t\tnavigatePrev();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnavigateLeft();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// L, RIGHT\r\n\t\t\telse if( keyCode === 76 || keyCode === 39 ) {\r\n\t\t\t\tif( lastSlideShortcut ) {\r\n\t\t\t\t\tslide( Number.MAX_VALUE );\r\n\t\t\t\t}\r\n\t\t\t\telse if( !isOverview() && useLinearMode ) {\r\n\t\t\t\t\tnavigateNext();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnavigateRight();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// K, UP\r\n\t\t\telse if( keyCode === 75 || keyCode === 38 ) {\r\n\t\t\t\tif( !isOverview() && useLinearMode ) {\r\n\t\t\t\t\tnavigatePrev();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnavigateUp();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// J, DOWN\r\n\t\t\telse if( keyCode === 74 || keyCode === 40 ) {\r\n\t\t\t\tif( !isOverview() && useLinearMode ) {\r\n\t\t\t\t\tnavigateNext();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnavigateDown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// HOME\r\n\t\t\telse if( keyCode === 36 ) {\r\n\t\t\t\tslide( 0 );\r\n\t\t\t}\r\n\t\t\t// END\r\n\t\t\telse if( keyCode === 35 ) {\r\n\t\t\t\tslide( Number.MAX_VALUE );\r\n\t\t\t}\r\n\t\t\t// SPACE\r\n\t\t\telse if( keyCode === 32 ) {\r\n\t\t\t\tif( isOverview() ) {\r\n\t\t\t\t\tdeactivateOverview();\r\n\t\t\t\t}\r\n\t\t\t\tif( event.shiftKey ) {\r\n\t\t\t\t\tnavigatePrev();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnavigateNext();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// TWO-SPOT, SEMICOLON, B, V, PERIOD, LOGITECH PRESENTER TOOLS \"BLACK SCREEN\" BUTTON\r\n\t\t\telse if( keyCode === 58 || keyCode === 59 || keyCode === 66 || keyCode === 86 || keyCode === 190 || keyCode === 191 ) {\r\n\t\t\t\ttogglePause();\r\n\t\t\t}\r\n\t\t\t// F\r\n\t\t\telse if( keyCode === 70 ) {\r\n\t\t\t\tenterFullscreen();\r\n\t\t\t}\r\n\t\t\t// A\r\n\t\t\telse if( keyCode === 65 ) {\r\n\t\t\t\tif ( config.autoSlideStoppable ) {\r\n\t\t\t\t\ttoggleAutoSlide( autoSlideWasPaused );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttriggered = false;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// If the input resulted in a triggered action we should prevent\r\n\t\t// the browsers default behavior\r\n\t\tif( triggered ) {\r\n\t\t\tevent.preventDefault && event.preventDefault();\r\n\t\t}\r\n\t\t// ESC or O key\r\n\t\telse if ( ( keyCode === 27 || keyCode === 79 ) && features.transforms3d ) {\r\n\t\t\tif( dom.overlay ) {\r\n\t\t\t\tcloseOverlay();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttoggleOverview();\r\n\t\t\t}\r\n\r\n\t\t\tevent.preventDefault && event.preventDefault();\r\n\t\t}\r\n\r\n\t\t// If auto-sliding is enabled we need to cue up\r\n\t\t// another timeout\r\n\t\tcueAutoSlide();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for the 'touchstart' event, enables support for\r\n\t * swipe and pinch gestures.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif( isSwipePrevented( event.target ) ) return true;\r\n\r\n\t\ttouch.startX = event.touches[0].clientX;\r\n\t\ttouch.startY = event.touches[0].clientY;\r\n\t\ttouch.startCount = event.touches.length;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for the 'touchmove' event.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif( isSwipePrevented( event.target ) ) return true;\r\n\r\n\t\t// Each touch should only trigger one action\r\n\t\tif( !touch.captured ) {\r\n\t\t\tonUserInput( event );\r\n\r\n\t\t\tvar currentX = event.touches[0].clientX;\r\n\t\t\tvar currentY = event.touches[0].clientY;\r\n\r\n\t\t\t// There was only one touch point, look for a swipe\r\n\t\t\tif( event.touches.length === 1 && touch.startCount !== 2 ) {\r\n\r\n\t\t\t\tvar deltaX = currentX - touch.startX,\r\n\t\t\t\t\tdeltaY = currentY - touch.startY;\r\n\r\n\t\t\t\tif( deltaX > touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\r\n\t\t\t\t\ttouch.captured = true;\r\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\r\n\t\t\t\t\t\tif( config.rtl ) {\r\n\t\t\t\t\t\t\tnavigateNext();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tnavigatePrev();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnavigateLeft();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if( deltaX < -touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\r\n\t\t\t\t\ttouch.captured = true;\r\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\r\n\t\t\t\t\t\tif( config.rtl ) {\r\n\t\t\t\t\t\t\tnavigatePrev();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tnavigateNext();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnavigateRight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if( deltaY > touch.threshold ) {\r\n\t\t\t\t\ttouch.captured = true;\r\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\r\n\t\t\t\t\t\tnavigatePrev();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnavigateUp();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if( deltaY < -touch.threshold ) {\r\n\t\t\t\t\ttouch.captured = true;\r\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\r\n\t\t\t\t\t\tnavigateNext();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnavigateDown();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If we're embedded, only block touch events if they have\r\n\t\t\t\t// triggered an action\r\n\t\t\t\tif( config.embedded ) {\r\n\t\t\t\t\tif( touch.captured || isVerticalSlide( currentSlide ) ) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Not embedded? Block them all to avoid needless tossing\r\n\t\t\t\t// around of the viewport in iOS\r\n\t\t\t\telse {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t// There's a bug with swiping on some Android devices unless\r\n\t\t// the default action is always prevented\r\n\t\telse if( UA.match( /android/gi ) ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for the 'touchend' event.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\ttouch.captured = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Convert pointer down to touch start.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onPointerDown( event ) {\r\n\r\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" ) {\r\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\r\n\t\t\tonTouchStart( event );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Convert pointer move to touch move.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onPointerMove( event ) {\r\n\r\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\r\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\r\n\t\t\tonTouchMove( event );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Convert pointer up to touch end.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onPointerUp( event ) {\r\n\r\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\r\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\r\n\t\t\tonTouchEnd( event );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles mouse wheel scrolling, throttled to avoid skipping\r\n\t * multiple slides.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onDocumentMouseScroll( event ) {\r\n\r\n\t\tif( Date.now() - lastMouseWheelStep > 600 ) {\r\n\r\n\t\t\tlastMouseWheelStep = Date.now();\r\n\r\n\t\t\tvar delta = event.detail || -event.wheelDelta;\r\n\t\t\tif( delta > 0 ) {\r\n\t\t\t\tnavigateNext();\r\n\t\t\t}\r\n\t\t\telse if( delta < 0 ) {\r\n\t\t\t\tnavigatePrev();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clicking on the progress bar results in a navigation to the\r\n\t * closest approximate horizontal slide using this equation:\r\n\t *\r\n\t * ( clickX / presentationWidth ) * numberOfSlides\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onProgressClicked( event ) {\r\n\r\n\t\tonUserInput( event );\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar slidesTotal = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).length;\r\n\t\tvar slideIndex = Math.floor( ( event.clientX / dom.wrapper.offsetWidth ) * slidesTotal );\r\n\r\n\t\tif( config.rtl ) {\r\n\t\t\tslideIndex = slidesTotal - slideIndex;\r\n\t\t}\r\n\r\n\t\tslide( slideIndex );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Event handler for navigation control buttons.\r\n\t */\r\n\tfunction onNavigateLeftClicked( event ) { event.preventDefault(); onUserInput(); config.navigationMode === 'linear' ? navigatePrev() : navigateLeft(); }\r\n\tfunction onNavigateRightClicked( event ) { event.preventDefault(); onUserInput(); config.navigationMode === 'linear' ? navigateNext() : navigateRight(); }\r\n\tfunction onNavigateUpClicked( event ) { event.preventDefault(); onUserInput(); navigateUp(); }\r\n\tfunction onNavigateDownClicked( event ) { event.preventDefault(); onUserInput(); navigateDown(); }\r\n\tfunction onNavigatePrevClicked( event ) { event.preventDefault(); onUserInput(); navigatePrev(); }\r\n\tfunction onNavigateNextClicked( event ) { event.preventDefault(); onUserInput(); navigateNext(); }\r\n\r\n\t/**\r\n\t * Handler for the window level 'hashchange' event.\r\n\t *\r\n\t * @param {object} [event]\r\n\t */\r\n\tfunction onWindowHashChange( event ) {\r\n\r\n\t\treadURL();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for the window level 'resize' event.\r\n\t *\r\n\t * @param {object} [event]\r\n\t */\r\n\tfunction onWindowResize( event ) {\r\n\r\n\t\tlayout();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handle for the window level 'visibilitychange' event.\r\n\t *\r\n\t * @param {object} [event]\r\n\t */\r\n\tfunction onPageVisibilityChange( event ) {\r\n\r\n\t\tvar isHidden =  document.webkitHidden ||\r\n\t\t\t\t\t\tdocument.msHidden ||\r\n\t\t\t\t\t\tdocument.hidden;\r\n\r\n\t\t// If, after clicking a link or similar and we're coming back,\r\n\t\t// focus the document.body to ensure we can use keyboard shortcuts\r\n\t\tif( isHidden === false && document.activeElement !== document.body ) {\r\n\t\t\t// Not all elements support .blur() - SVGs among them.\r\n\t\t\tif( typeof document.activeElement.blur === 'function' ) {\r\n\t\t\t\tdocument.activeElement.blur();\r\n\t\t\t}\r\n\t\t\tdocument.body.focus();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Invoked when a slide is and we're in the overview.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onOverviewSlideClicked( event ) {\r\n\r\n\t\t// TODO There's a bug here where the event listeners are not\r\n\t\t// removed after deactivating the overview.\r\n\t\tif( eventsAreBound && isOverview() ) {\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tvar element = event.target;\r\n\r\n\t\t\twhile( element && !element.nodeName.match( /section/gi ) ) {\r\n\t\t\t\telement = element.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tif( element && !element.classList.contains( 'disabled' ) ) {\r\n\r\n\t\t\t\tdeactivateOverview();\r\n\r\n\t\t\t\tif( element.nodeName.match( /section/gi ) ) {\r\n\t\t\t\t\tvar h = parseInt( element.getAttribute( 'data-index-h' ), 10 ),\r\n\t\t\t\t\t\tv = parseInt( element.getAttribute( 'data-index-v' ), 10 );\r\n\r\n\t\t\t\t\tslide( h, v );\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles clicks on links that are set to preview in the\r\n\t * iframe overlay.\r\n\t *\r\n\t * @param {object} event\r\n\t */\r\n\tfunction onPreviewLinkClicked( event ) {\r\n\r\n\t\tif( event.currentTarget && event.currentTarget.hasAttribute( 'href' ) ) {\r\n\t\t\tvar url = event.currentTarget.getAttribute( 'href' );\r\n\t\t\tif( url ) {\r\n\t\t\t\tshowPreview( url );\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles click on the auto-sliding controls element.\r\n\t *\r\n\t * @param {object} [event]\r\n\t */\r\n\tfunction onAutoSlidePlayerClick( event ) {\r\n\r\n\t\t// Replay\r\n\t\tif( Reveal.isLastSlide() && config.loop === false ) {\r\n\t\t\tslide( 0, 0 );\r\n\t\t\tresumeAutoSlide();\r\n\t\t}\r\n\t\t// Resume\r\n\t\telse if( autoSlidePaused ) {\r\n\t\t\tresumeAutoSlide();\r\n\t\t}\r\n\t\t// Pause\r\n\t\telse {\r\n\t\t\tpauseAutoSlide();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// --------------------------------------------------------------------//\r\n\t// ------------------------ PLAYBACK COMPONENT ------------------------//\r\n\t// --------------------------------------------------------------------//\r\n\r\n\r\n\t/**\r\n\t * Constructor for the playback component, which displays\r\n\t * play/pause/progress controls.\r\n\t *\r\n\t * @param {HTMLElement} container The component will append\r\n\t * itself to this\r\n\t * @param {function} progressCheck A method which will be\r\n\t * called frequently to get the current progress on a range\r\n\t * of 0-1\r\n\t */\r\n\tfunction Playback( container, progressCheck ) {\r\n\r\n\t\t// Cosmetics\r\n\t\tthis.diameter = 100;\r\n\t\tthis.diameter2 = this.diameter/2;\r\n\t\tthis.thickness = 6;\r\n\r\n\t\t// Flags if we are currently playing\r\n\t\tthis.playing = false;\r\n\r\n\t\t// Current progress on a 0-1 range\r\n\t\tthis.progress = 0;\r\n\r\n\t\t// Used to loop the animation smoothly\r\n\t\tthis.progressOffset = 1;\r\n\r\n\t\tthis.container = container;\r\n\t\tthis.progressCheck = progressCheck;\r\n\r\n\t\tthis.canvas = document.createElement( 'canvas' );\r\n\t\tthis.canvas.className = 'playback';\r\n\t\tthis.canvas.width = this.diameter;\r\n\t\tthis.canvas.height = this.diameter;\r\n\t\tthis.canvas.style.width = this.diameter2 + 'px';\r\n\t\tthis.canvas.style.height = this.diameter2 + 'px';\r\n\t\tthis.context = this.canvas.getContext( '2d' );\r\n\r\n\t\tthis.container.appendChild( this.canvas );\r\n\r\n\t\tthis.render();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param value\r\n\t */\r\n\tPlayback.prototype.setPlaying = function( value ) {\r\n\r\n\t\tvar wasPlaying = this.playing;\r\n\r\n\t\tthis.playing = value;\r\n\r\n\t\t// Start repainting if we weren't already\r\n\t\tif( !wasPlaying && this.playing ) {\r\n\t\t\tthis.animate();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tPlayback.prototype.animate = function() {\r\n\r\n\t\tvar progressBefore = this.progress;\r\n\r\n\t\tthis.progress = this.progressCheck();\r\n\r\n\t\t// When we loop, offset the progress so that it eases\r\n\t\t// smoothly rather than immediately resetting\r\n\t\tif( progressBefore > 0.8 && this.progress < 0.2 ) {\r\n\t\t\tthis.progressOffset = this.progress;\r\n\t\t}\r\n\r\n\t\tthis.render();\r\n\r\n\t\tif( this.playing ) {\r\n\t\t\tfeatures.requestAnimationFrameMethod.call( window, this.animate.bind( this ) );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Renders the current progress and playback state.\r\n\t */\r\n\tPlayback.prototype.render = function() {\r\n\r\n\t\tvar progress = this.playing ? this.progress : 0,\r\n\t\t\tradius = ( this.diameter2 ) - this.thickness,\r\n\t\t\tx = this.diameter2,\r\n\t\t\ty = this.diameter2,\r\n\t\t\ticonSize = 28;\r\n\r\n\t\t// Ease towards 1\r\n\t\tthis.progressOffset += ( 1 - this.progressOffset ) * 0.1;\r\n\r\n\t\tvar endAngle = ( - Math.PI / 2 ) + ( progress * ( Math.PI * 2 ) );\r\n\t\tvar startAngle = ( - Math.PI / 2 ) + ( this.progressOffset * ( Math.PI * 2 ) );\r\n\r\n\t\tthis.context.save();\r\n\t\tthis.context.clearRect( 0, 0, this.diameter, this.diameter );\r\n\r\n\t\t// Solid background color\r\n\t\tthis.context.beginPath();\r\n\t\tthis.context.arc( x, y, radius + 4, 0, Math.PI * 2, false );\r\n\t\tthis.context.fillStyle = 'rgba( 0, 0, 0, 0.4 )';\r\n\t\tthis.context.fill();\r\n\r\n\t\t// Draw progress track\r\n\t\tthis.context.beginPath();\r\n\t\tthis.context.arc( x, y, radius, 0, Math.PI * 2, false );\r\n\t\tthis.context.lineWidth = this.thickness;\r\n\t\tthis.context.strokeStyle = 'rgba( 255, 255, 255, 0.2 )';\r\n\t\tthis.context.stroke();\r\n\r\n\t\tif( this.playing ) {\r\n\t\t\t// Draw progress on top of track\r\n\t\t\tthis.context.beginPath();\r\n\t\t\tthis.context.arc( x, y, radius, startAngle, endAngle, false );\r\n\t\t\tthis.context.lineWidth = this.thickness;\r\n\t\t\tthis.context.strokeStyle = '#fff';\r\n\t\t\tthis.context.stroke();\r\n\t\t}\r\n\r\n\t\tthis.context.translate( x - ( iconSize / 2 ), y - ( iconSize / 2 ) );\r\n\r\n\t\t// Draw play/pause icons\r\n\t\tif( this.playing ) {\r\n\t\t\tthis.context.fillStyle = '#fff';\r\n\t\t\tthis.context.fillRect( 0, 0, iconSize / 2 - 4, iconSize );\r\n\t\t\tthis.context.fillRect( iconSize / 2 + 4, 0, iconSize / 2 - 4, iconSize );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.context.beginPath();\r\n\t\t\tthis.context.translate( 4, 0 );\r\n\t\t\tthis.context.moveTo( 0, 0 );\r\n\t\t\tthis.context.lineTo( iconSize - 4, iconSize / 2 );\r\n\t\t\tthis.context.lineTo( 0, iconSize );\r\n\t\t\tthis.context.fillStyle = '#fff';\r\n\t\t\tthis.context.fill();\r\n\t\t}\r\n\r\n\t\tthis.context.restore();\r\n\r\n\t};\r\n\r\n\tPlayback.prototype.on = function( type, listener ) {\r\n\t\tthis.canvas.addEventListener( type, listener, false );\r\n\t};\r\n\r\n\tPlayback.prototype.off = function( type, listener ) {\r\n\t\tthis.canvas.removeEventListener( type, listener, false );\r\n\t};\r\n\r\n\tPlayback.prototype.destroy = function() {\r\n\r\n\t\tthis.playing = false;\r\n\r\n\t\tif( this.canvas.parentNode ) {\r\n\t\t\tthis.container.removeChild( this.canvas );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\t// --------------------------------------------------------------------//\r\n\t// ------------------------------- API --------------------------------//\r\n\t// --------------------------------------------------------------------//\r\n\r\n\r\n\tReveal = {\r\n\t\tVERSION: VERSION,\r\n\r\n\t\tinitialize: initialize,\r\n\t\tconfigure: configure,\r\n\r\n\t\tsync: sync,\r\n\t\tsyncSlide: syncSlide,\r\n\t\tsyncFragments: syncFragments,\r\n\r\n\t\t// Navigation methods\r\n\t\tslide: slide,\r\n\t\tleft: navigateLeft,\r\n\t\tright: navigateRight,\r\n\t\tup: navigateUp,\r\n\t\tdown: navigateDown,\r\n\t\tprev: navigatePrev,\r\n\t\tnext: navigateNext,\r\n\r\n\t\t// Fragment methods\r\n\t\tnavigateFragment: navigateFragment,\r\n\t\tprevFragment: previousFragment,\r\n\t\tnextFragment: nextFragment,\r\n\r\n\t\t// Deprecated aliases\r\n\t\tnavigateTo: slide,\r\n\t\tnavigateLeft: navigateLeft,\r\n\t\tnavigateRight: navigateRight,\r\n\t\tnavigateUp: navigateUp,\r\n\t\tnavigateDown: navigateDown,\r\n\t\tnavigatePrev: navigatePrev,\r\n\t\tnavigateNext: navigateNext,\r\n\r\n\t\t// Forces an update in slide layout\r\n\t\tlayout: layout,\r\n\r\n\t\t// Randomizes the order of slides\r\n\t\tshuffle: shuffle,\r\n\r\n\t\t// Returns an object with the available routes as booleans (left/right/top/bottom)\r\n\t\tavailableRoutes: availableRoutes,\r\n\r\n\t\t// Returns an object with the available fragments as booleans (prev/next)\r\n\t\tavailableFragments: availableFragments,\r\n\r\n\t\t// Toggles a help overlay with keyboard shortcuts\r\n\t\ttoggleHelp: toggleHelp,\r\n\r\n\t\t// Toggles the overview mode on/off\r\n\t\ttoggleOverview: toggleOverview,\r\n\r\n\t\t// Toggles the \"black screen\" mode on/off\r\n\t\ttogglePause: togglePause,\r\n\r\n\t\t// Toggles the auto slide mode on/off\r\n\t\ttoggleAutoSlide: toggleAutoSlide,\r\n\r\n\t\t// State checks\r\n\t\tisOverview: isOverview,\r\n\t\tisPaused: isPaused,\r\n\t\tisAutoSliding: isAutoSliding,\r\n\t\tisSpeakerNotes: isSpeakerNotes,\r\n\r\n\t\t// Slide preloading\r\n\t\tloadSlide: loadSlide,\r\n\t\tunloadSlide: unloadSlide,\r\n\r\n\t\t// Adds or removes all internal event listeners (such as keyboard)\r\n\t\taddEventListeners: addEventListeners,\r\n\t\tremoveEventListeners: removeEventListeners,\r\n\r\n\t\t// Facility for persisting and restoring the presentation state\r\n\t\tgetState: getState,\r\n\t\tsetState: setState,\r\n\r\n\t\t// Presentation progress\r\n\t\tgetSlidePastCount: getSlidePastCount,\r\n\r\n\t\t// Presentation progress on range of 0-1\r\n\t\tgetProgress: getProgress,\r\n\r\n\t\t// Returns the indices of the current, or specified, slide\r\n\t\tgetIndices: getIndices,\r\n\r\n\t\t// Returns an Array of all slides\r\n\t\tgetSlides: getSlides,\r\n\r\n\t\t// Returns an Array of objects representing the attributes on\r\n\t\t// the slides\r\n\t\tgetSlidesAttributes: getSlidesAttributes,\r\n\r\n\t\t// Returns the total number of slides\r\n\t\tgetTotalSlides: getTotalSlides,\r\n\r\n\t\t// Returns the slide element at the specified index\r\n\t\tgetSlide: getSlide,\r\n\r\n\t\t// Returns the slide background element at the specified index\r\n\t\tgetSlideBackground: getSlideBackground,\r\n\r\n\t\t// Returns the speaker notes string for a slide, or null\r\n\t\tgetSlideNotes: getSlideNotes,\r\n\r\n\t\t// Returns an array with all horizontal/vertical slides in the deck\r\n\t\tgetHorizontalSlides: getHorizontalSlides,\r\n\t\tgetVerticalSlides: getVerticalSlides,\r\n\r\n\t\t// Checks if the presentation contains two or more\r\n\t\t// horizontal/vertical slides\r\n\t\thasHorizontalSlides: hasHorizontalSlides,\r\n\t\thasVerticalSlides: hasVerticalSlides,\r\n\r\n\t\t// Returns the previous slide element, may be null\r\n\t\tgetPreviousSlide: function() {\r\n\t\t\treturn previousSlide;\r\n\t\t},\r\n\r\n\t\t// Returns the current slide element\r\n\t\tgetCurrentSlide: function() {\r\n\t\t\treturn currentSlide;\r\n\t\t},\r\n\r\n\t\t// Returns the current scale of the presentation content\r\n\t\tgetScale: function() {\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\t// Returns the current configuration object\r\n\t\tgetConfig: function() {\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\t// Helper method, retrieves query string as a key/value hash\r\n\t\tgetQueryHash: function() {\r\n\t\t\tvar query = {};\r\n\r\n\t\t\tlocation.search.replace( /[A-Z0-9]+?=([\\w\\.%-]*)/gi, function(a) {\r\n\t\t\t\tquery[ a.split( '=' ).shift() ] = a.split( '=' ).pop();\r\n\t\t\t} );\r\n\r\n\t\t\t// Basic deserialization\r\n\t\t\tfor( var i in query ) {\r\n\t\t\t\tvar value = query[ i ];\r\n\r\n\t\t\t\tquery[ i ] = deserialize( unescape( value ) );\r\n\t\t\t}\r\n\r\n\t\t\treturn query;\r\n\t\t},\r\n\r\n\t\t// Returns the top-level DOM element\r\n\t\tgetRevealElement: function() {\r\n\t\t\treturn dom.wrapper || document.querySelector( '.reveal' );\r\n\t\t},\r\n\r\n\t\t// Returns a hash with all registered plugins\r\n\t\tgetPlugins: function() {\r\n\t\t\treturn plugins;\r\n\t\t},\r\n\r\n\t\t// Returns true if we're currently on the first slide\r\n\t\tisFirstSlide: function() {\r\n\t\t\treturn ( indexh === 0 && indexv === 0 );\r\n\t\t},\r\n\r\n\t\t// Returns true if we're currently on the last slide\r\n\t\tisLastSlide: function() {\r\n\t\t\tif( currentSlide ) {\r\n\t\t\t\t// Does this slide have a next sibling?\r\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\r\n\r\n\t\t\t\t// If it's vertical, does its parent have a next sibling?\r\n\t\t\t\tif( isVerticalSlide( currentSlide ) && currentSlide.parentNode.nextElementSibling ) return false;\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t// Returns true if we're on the last slide in the current\r\n\t\t// vertical stack\r\n\t\tisLastVerticalSlide: function() {\r\n\t\t\tif( currentSlide && isVerticalSlide( currentSlide ) ) {\r\n\t\t\t\t// Does this slide have a next sibling?\r\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t// Checks if reveal.js has been loaded and is ready for use\r\n\t\tisReady: function() {\r\n\t\t\treturn loaded;\r\n\t\t},\r\n\r\n\t\t// Forward event binding to the reveal DOM element\r\n\t\taddEventListener: function( type, listener, useCapture ) {\r\n\t\t\tif( 'addEventListener' in window ) {\r\n\t\t\t\tReveal.getRevealElement().addEventListener( type, listener, useCapture );\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveEventListener: function( type, listener, useCapture ) {\r\n\t\t\tif( 'addEventListener' in window ) {\r\n\t\t\t\tReveal.getRevealElement().removeEventListener( type, listener, useCapture );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Adds/removes a custom key binding\r\n\t\taddKeyBinding: addKeyBinding,\r\n\t\tremoveKeyBinding: removeKeyBinding,\r\n\r\n\t\t// API for registering and retrieving plugins\r\n\t\tregisterPlugin: registerPlugin,\r\n\t\thasPlugin: hasPlugin,\r\n\t\tgetPlugin: getPlugin,\r\n\r\n\t\t// Programmatically triggers a keyboard event\r\n\t\ttriggerKey: function( keyCode ) {\r\n\t\t\tonDocumentKeyDown( { keyCode: keyCode } );\r\n\t\t},\r\n\r\n\t\t// Registers a new shortcut to include in the help overlay\r\n\t\tregisterKeyboardShortcut: function( key, value ) {\r\n\t\t\tkeyboardShortcuts[key] = value;\r\n\t\t}\r\n\t};\r\n\r\n\treturn Reveal;\r\n\r\n}));\r\n","import * as Reveal from \"./js/reveal\";\r\n\r\nconst PLUGIN_DIST = \"./plugin\";\r\n\r\nconst markdownCondition = () => !!document.querySelector(\"[data-markdown]\");\r\n\r\nconst parseDependencies = (dependencies = []) =>\r\n  dependencies.map(({ src, ...dependency }) => ({\r\n    ...dependency,\r\n    src: `${PLUGIN_DIST}/${src}`\r\n  }));\r\n\r\nconst markdown = (condition = markdownCondition) => [\r\n  { src: `markdown/marked.js`, condition },\r\n  { src: \"markdown/markdown.js\", condition }\r\n];\r\n\r\nconst highlight = () => [{ src: `highlight/highlight.js` }];\r\nconst search = (async = true) => [{ src: `search/search.js`, async }];\r\nconst zoom = (async = true) => [{ src: `zoom-js/zoom.js`, async }];\r\nconst notes = (async = true) => [{ src: `notes/notes.js`, async }];\r\n\r\nexport const DEPENDENCIES = {\r\n  markdown,\r\n  highlight,\r\n  search,\r\n  zoom,\r\n  notes\r\n};\r\n\r\nexport const TRANSITION = {\r\n  SLIDE: \"slide\",\r\n  NONE: \"none\",\r\n  FADE: \"fade\",\r\n  CONVEX: \"convex\",\r\n  ZOOM: \"zoom\"\r\n};\r\n\r\nexport const reveal = ({\r\n  dependencies,\r\n  ...rest\r\n}) => {\r\n  global.Reveal = Reveal;\r\n  Reveal.initialize({\r\n    ...rest,\r\n    dependencies: parseDependencies(dependencies)\r\n  });\r\n};\r\n","import { reveal, TRANSITION, DEPENDENCIES } from \"./lib/reveal.js\";\r\n\r\nwindow.onload = () => {\r\n  reveal({\r\n    controls: true,\r\n    progress: true,\r\n    center: true,\r\n    hash: true,\r\n    slideNumber: 'c/t',\r\n    hideInactiveCursor: false,\r\n    transition: TRANSITION.SLIDE,\r\n    dependencies: [\r\n      ...DEPENDENCIES.markdown(),\r\n      ...DEPENDENCIES.highlight(),\r\n      ...DEPENDENCIES.search(),\r\n      ...DEPENDENCIES.notes(),\r\n      ...DEPENDENCIES.zoom()\r\n    ]\r\n  });\r\n};\r\n"]}